/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/bin/python /home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py
Running data side...
Running logic side...
2022-04-30 07:35:50: Account value sum: 2413.81, Bina: 1198.23 Drift: 1215.58
        binance_pos    drift_pos binance_pair  drift_pair  inplay  binance_inplay  drift_inplay  imbalance
symbol                                                                                                    
ADA            0.00     0.000000      ADAUSDT           9   False           False         False      False
BNB            0.00     0.000000      BNBUSDT           5   False           False         False      False
ETH            0.00     0.000000      ETHUSDT           2   False           False         False      False
DOGE           0.00     0.000000     DOGEUSDT          15   False           False         False      False
APE            0.00     0.000000      APEUSDT          14   False           False         False      False
LTC            0.00     0.000000      LTCUSDT          12   False           False         False      False
LUNA           0.00     0.000000     LUNAUSDT           3   False           False         False      False
SRM          474.00  -474.601266      SRMUSDT          17    True            True          True      False
ATOM          39.05   -39.213695     ATOMUSDT           7    True            True          True      False
NEAR          67.00   -67.001190     NEARUSDT          16    True            True          True      False
ALGO           0.00     0.000000     ALGOUSDT          10   False           False         False      False
AVAX           0.00     0.000000     AVAXUSDT           4   False           False         False      False
MATIC        808.00  -809.569534    MATICUSDT           6    True            True          True      False
SOL            0.00     0.000000      SOLUSDT           0   False           False         False      False
BTC            0.00     0.000000      BTCUSDT           1   False           False         False      False
GMT            0.00     0.000000      GMTUSDT          18   False           False         False      False
XRP         1264.60 -1264.146233      XRPUSDT          13    True            True          True      False
FTT            0.00     0.000000      FTTUSDT          11   False           False         False      False
CRV            0.00     0.000000      CRVUSDT          19   False           False         False      False
DOT            0.00     0.000000      DOTUSDT           8   False           False         False      False
                 timestamp binance_pair  drift_pair    bina_price   drift_price  gap_perc   gap_abs  fast_avg_gap  top_avg_gaps  bottom_avg_gaps  gap_range  open_l_drift  open_s_drift  open_somewhere  close_l_drift  close_s_drift
symbol                                                                                                                                                                                                                               
LTC    2022-04-30 07:35:45      LTCUSDT          12    100.850000    100.842006  0.007927  0.007927     -0.031674           NaN              NaN        NaN         False         False           False          False          False
ETH    2022-04-30 07:35:45      ETHUSDT           2   2826.220000   2825.716595  0.017812  0.017812     -0.039177           NaN              NaN        NaN         False         False           False          False          False
BTC    2022-04-30 07:35:45      BTCUSDT           1  38677.292434  38658.057384  0.049732  0.049732     -0.005840           NaN              NaN        NaN         False         False           False          False          False
LUNA   2022-04-30 07:35:45     LUNAUSDT           3     85.214000     85.258554 -0.052285  0.052285     -0.070487           NaN              NaN        NaN         False         False           False          False          False
BNB    2022-04-30 07:35:45      BNBUSDT           5    398.810000    399.153226 -0.086063  0.086063     -0.099753           NaN              NaN        NaN         False         False           False          False          False
NEAR   2022-04-30 07:35:45     NEARUSDT          16     11.379000     11.389009 -0.087960  0.087960     -0.171454           NaN              NaN        NaN         False         False           False          False          False
ADA    2022-04-30 07:35:45      ADAUSDT           9      0.814500      0.815493 -0.121862  0.121862     -0.215912           NaN              NaN        NaN         False         False           False          False          False
GMT    2022-04-30 07:35:45      GMTUSDT          18      3.888000      3.893881 -0.151261  0.151261     -0.086860           NaN              NaN        NaN         False         False           False          False          False
DOT    2022-04-30 07:35:45      DOTUSDT           8     16.268000     16.302517 -0.212176  0.212176     -0.298132           NaN              NaN        NaN         False         False           False          False          False
SOL    2022-04-30 07:35:45      SOLUSDT           0     94.290000     94.492710 -0.214985  0.214985     -0.259720           NaN              NaN        NaN         False         False           False          False          False
FTT    2022-04-30 07:35:45      FTTUSDT          11     38.899000     38.989658 -0.233059  0.233059     -0.316566           NaN              NaN        NaN         False         False           False          False          False
MATIC  2022-04-30 07:35:45    MATICUSDT           6      1.156300      1.159119 -0.243824  0.243824     -0.289903           NaN              NaN        NaN         False         False           False          False          False
XRP    2022-04-30 07:35:45      XRPUSDT          13      0.624500      0.626271 -0.283535  0.283535     -0.315662           NaN              NaN        NaN         False         False           False          False          False
CRV    2022-04-30 07:35:45      CRVUSDT          19      2.228000      2.236179 -0.367118  0.367118     -0.407183           NaN              NaN        NaN         False         False           False          False          False
AVAX   2022-04-30 07:35:45     AVAXUSDT           4     63.490925     63.740304 -0.392780  0.392780     -0.401072           NaN              NaN        NaN         False         False           False          False          False
SRM    2022-04-30 07:35:45      SRMUSDT          17      1.984000      1.991928 -0.399616  0.399616     -0.399616           NaN              NaN        NaN         False         False           False          False          False
ALGO   2022-04-30 07:35:45     ALGOUSDT          10      0.635515      0.638086 -0.404606  0.404606     -0.413938           NaN              NaN        NaN         False         False           False          False          False
DOGE   2022-04-30 07:35:45     DOGEUSDT          15      0.135630      0.136318 -0.507187  0.507187     -0.551654           NaN              NaN        NaN         False         False           False          False          False
ATOM   2022-04-30 07:35:45     ATOMUSDT           7     19.186000     19.298601 -0.586891  0.586891     -0.524017           NaN              NaN        NaN         False         False           False          False          False
APE    2022-04-30 07:35:45      APEUSDT          14     24.113000     23.923222  0.787036  0.787036      1.252405           NaN              NaN        NaN         False         False           False          False          False
Logic only list: 1.15
Not enough data or wrong load, logic sleeping...
Logic only list: 1.18
Not enough data or wrong load, logic sleeping...
Logic only list: 1.17
Not enough data or wrong load, logic sleeping...
Logic only list: 1.18
Not enough data or wrong load, logic sleeping...
Logic only list: 1.18
Not enough data or wrong load, logic sleeping...
Logic only list: 1.23
Not enough data or wrong load, logic sleeping...
Logic only list: 1.21
Not enough data or wrong load, logic sleeping...
Logic only list: 1.21
Not enough data or wrong load, logic sleeping...
Logic only list: 1.23
Not enough data or wrong load, logic sleeping...
Logic only list: 1.3
Not enough data or wrong load, logic sleeping...
Logic only list: 1.24
Not enough data or wrong load, logic sleeping...
Logic only list: 1.25
Not enough data or wrong load, logic sleeping...
Logic only list: 1.26
Not enough data or wrong load, logic sleeping...
Logic only list: 1.29
Not enough data or wrong load, logic sleeping...
Logic only list: 1.28
Not enough data or wrong load, logic sleeping...
Logic only list: 1.32
Not enough data or wrong load, logic sleeping...
Logic only list: 1.32
Not enough data or wrong load, logic sleeping...
Logic only list: 1.31
Not enough data or wrong load, logic sleeping...
Logic only list: 1.32
Not enough data or wrong load, logic sleeping...
Logic only list: 1.35
Not enough data or wrong load, logic sleeping...
Logic only list: 1.36
Not enough data or wrong load, logic sleeping...
Logic only list: 1.35
Not enough data or wrong load, logic sleeping...
Logic only list: 1.51
Not enough data or wrong load, logic sleeping...
Logic only list: 1.38
Not enough data or wrong load, logic sleeping...
Logic only list: 1.39
Not enough data or wrong load, logic sleeping...
Logic only list: 1.41
Not enough data or wrong load, logic sleeping...
Logic only list: 1.43
Not enough data or wrong load, logic sleeping...
Logic only list: 1.51
Not enough data or wrong load, logic sleeping...
Logic only list: 1.43
Not enough data or wrong load, logic sleeping...
Logic only list: 1.45
Not enough data or wrong load, logic sleeping...
2022-04-30 07:51:05 --- Data loop 3.76 seconds ---
Logic only list: 1.47
Not enough data or wrong load, logic sleeping...
Logic only list: 1.49
Not enough data or wrong load, logic sleeping...
Logic only list: 1.48
Not enough data or wrong load, logic sleeping...
Logic only list: 1.5
Not enough data or wrong load, logic sleeping...
Logic only list: 1.5
Not enough data or wrong load, logic sleeping...
Logic only list: 1.5
Not enough data or wrong load, logic sleeping...
Logic only list: 1.6
Not enough data or wrong load, logic sleeping...
Logic only list: 1.54
Not enough data or wrong load, logic sleeping...
Logic only list: 1.55
Not enough data or wrong load, logic sleeping...
Logic only list: 1.56
Not enough data or wrong load, logic sleeping...
Logic only list: 1.63
Not enough data or wrong load, logic sleeping...
Logic only list: 1.6
Not enough data or wrong load, logic sleeping...
Logic only list: 1.58
Not enough data or wrong load, logic sleeping...
Logic only list: 1.58
Not enough data or wrong load, logic sleeping...
Logic only list: 1.67
Not enough data or wrong load, logic sleeping...
Logic only list: 1.62
Not enough data or wrong load, logic sleeping...
Logic only list: 1.62
Not enough data or wrong load, logic sleeping...
Logic only list: 1.65
Not enough data or wrong load, logic sleeping...
Logic only list: 1.69
Not enough data or wrong load, logic sleeping...
Logic only list: 1.73
Not enough data or wrong load, logic sleeping...
Logic only list: 1.68
Not enough data or wrong load, logic sleeping...
Logic only list: 1.68
Not enough data or wrong load, logic sleeping...
Logic only list: 1.72
Not enough data or wrong load, logic sleeping...
Logic only list: 1.71
Not enough data or wrong load, logic sleeping...
Logic only list: 1.78
Not enough data or wrong load, logic sleeping...
Logic only list: 1.72
Not enough data or wrong load, logic sleeping...
Logic only list: 1.77
Not enough data or wrong load, logic sleeping...
Logic only list: 1.75
Not enough data or wrong load, logic sleeping...
Logic only list: 1.76
Not enough data or wrong load, logic sleeping...
Logic only list: 1.86
Not enough data or wrong load, logic sleeping...
Logic only list: 1.8
Not enough data or wrong load, logic sleeping...
Logic only list: 1.8
Not enough data or wrong load, logic sleeping...
Logic only list: 1.79
Not enough data or wrong load, logic sleeping...
Logic only list: 1.85
Not enough data or wrong load, logic sleeping...
Logic only list: 1.88
Not enough data or wrong load, logic sleeping...
Logic only list: 1.83
Not enough data or wrong load, logic sleeping...
Logic only list: 1.83
Not enough data or wrong load, logic sleeping...
Logic only list: 1.84
Not enough data or wrong load, logic sleeping...
Logic only list: 1.95
Not enough data or wrong load, logic sleeping...
Logic only list: 1.96
Not enough data or wrong load, logic sleeping...
Logic only list: 1.9
Not enough data or wrong load, logic sleeping...
Logic only list: 1.92
Not enough data or wrong load, logic sleeping...
Logic only list: 1.91
Not enough data or wrong load, logic sleeping...
Logic only list: 1.98
Not enough data or wrong load, logic sleeping...
Logic only list: 1.98
Not enough data or wrong load, logic sleeping...
Logic only list: 1.96
Not enough data or wrong load, logic sleeping...
Logic only list: 2.0
Not enough data or wrong load, logic sleeping...
Logic only list: 1.95
Not enough data or wrong load, logic sleeping...
Logic only list: 2.1
Not enough data or wrong load, logic sleeping...
Logic only list: 1.96
Not enough data or wrong load, logic sleeping...
Logic only list: 1.98
Not enough data or wrong load, logic sleeping...
Logic only list: 2.14
Not enough data or wrong load, logic sleeping...
Logic only list: 2.08
Not enough data or wrong load, logic sleeping...
Logic only list: 2.06
Not enough data or wrong load, logic sleeping...
Logic only list: 2.07
Not enough data or wrong load, logic sleeping...
Logic only list: 2.08
Not enough data or wrong load, logic sleeping...
Logic only list: 2.05
Not enough data or wrong load, logic sleeping...
Logic only list: 2.12
Not enough data or wrong load, logic sleeping...
Logic only list: 2.06
Not enough data or wrong load, logic sleeping...
Logic only list: 2.07
Not enough data or wrong load, logic sleeping...
Logic only list: 2.09
Not enough data or wrong load, logic sleeping...
Logic only list: 2.09
Not enough data or wrong load, logic sleeping...
Logic only list: 2.19
Not enough data or wrong load, logic sleeping...
2022-04-30 08:24:35 --- Data loop 3.2 seconds ---
Logic only list: 2.13
Not enough data or wrong load, logic sleeping...
Logic only list: 2.17
Not enough data or wrong load, logic sleeping...
Logic only list: 2.15
Not enough data or wrong load, logic sleeping...
Logic only list: 2.22
Not enough data or wrong load, logic sleeping...
Logic only list: 2.18
Not enough data or wrong load, logic sleeping...
Logic only list: 2.2
Not enough data or wrong load, logic sleeping...
Logic only list: 2.19
Not enough data or wrong load, logic sleeping...
Logic only list: 2.23
Not enough data or wrong load, logic sleeping...
Logic only list: 2.29
Not enough data or wrong load, logic sleeping...
Logic only list: 2.21
Not enough data or wrong load, logic sleeping...
Logic only list: 2.24
Not enough data or wrong load, logic sleeping...
Logic only list: 2.23
Not enough data or wrong load, logic sleeping...
Logic only list: 2.31
Not enough data or wrong load, logic sleeping...
Logic only list: 2.29
Not enough data or wrong load, logic sleeping...
Logic only list: 2.27
Not enough data or wrong load, logic sleeping...
Logic only list: 2.35
Not enough data or wrong load, logic sleeping...
Logic only list: 2.3
Not enough data or wrong load, logic sleeping...
Logic only list: 2.38
Not enough data or wrong load, logic sleeping...
Logic only list: 2.31
Not enough data or wrong load, logic sleeping...
Logic only list: 2.33
Not enough data or wrong load, logic sleeping...
Logic only list: 2.34
Not enough data or wrong load, logic sleeping...
Logic only list: 2.41
Not enough data or wrong load, logic sleeping...
Logic only list: 2.41
Not enough data or wrong load, logic sleeping...
Logic only list: 2.39
Not enough data or wrong load, logic sleeping...
Logic only list: 2.38
Not enough data or wrong load, logic sleeping...
Logic only list: 2.41
Not enough data or wrong load, logic sleeping...
Logic only list: 2.5
Not enough data or wrong load, logic sleeping...
Logic only list: 2.49
Not enough data or wrong load, logic sleeping...
Logic only list: 2.41
Not enough data or wrong load, logic sleeping...
Logic only list: 2.45
Not enough data or wrong load, logic sleeping...
Logic only list: 2.47
Not enough data or wrong load, logic sleeping...
Logic only list: 2.54
Not enough data or wrong load, logic sleeping...
Logic only list: 2.5
Not enough data or wrong load, logic sleeping...
Logic only list: 2.57
Not enough data or wrong load, logic sleeping...
Logic only list: 2.51
Not enough data or wrong load, logic sleeping...
Logic only list: 2.61
Not enough data or wrong load, logic sleeping...
Logic only list: 2.5
Not enough data or wrong load, logic sleeping...
Logic only list: 2.53
Not enough data or wrong load, logic sleeping...
Logic only list: 2.54
Not enough data or wrong load, logic sleeping...
Logic only list: 2.54
Not enough data or wrong load, logic sleeping...
Logic only list: 2.66
Not enough data or wrong load, logic sleeping...
Logic only list: 2.72
Not enough data or wrong load, logic sleeping...
Logic only list: 2.59
Not enough data or wrong load, logic sleeping...
Logic only list: 2.63
Not enough data or wrong load, logic sleeping...
Logic only list: 2.6
Not enough data or wrong load, logic sleeping...
Logic only list: 2.7
Not enough data or wrong load, logic sleeping...
Logic only list: 2.63
Not enough data or wrong load, logic sleeping...
Logic only list: 2.63
Not enough data or wrong load, logic sleeping...
Logic only list: 2.68
Not enough data or wrong load, logic sleeping...
Logic only list: 2.71
Not enough data or wrong load, logic sleeping...
Logic only list: 2.7
Not enough data or wrong load, logic sleeping...
Logic only list: 2.67
Not enough data or wrong load, logic sleeping...
Logic only list: 2.69
Not enough data or wrong load, logic sleeping...
Logic only list: 2.7
Not enough data or wrong load, logic sleeping...
Logic only list: 2.84
Not enough data or wrong load, logic sleeping...
Logic only list: 2.76
Not enough data or wrong load, logic sleeping...
Logic only list: 2.81
Not enough data or wrong load, logic sleeping...
Logic only list: 2.78
Not enough data or wrong load, logic sleeping...
Logic only list: 2.79
Not enough data or wrong load, logic sleeping...
Logic only list: 2.8
Not enough data or wrong load, logic sleeping...
Logic only list: 2.87
Not enough data or wrong load, logic sleeping...
Logic only list: 2.91
Not enough data or wrong load, logic sleeping...
Logic only list: 2.83
Not enough data or wrong load, logic sleeping...
Logic only list: 2.81
Not enough data or wrong load, logic sleeping...
Logic only list: 2.89
Not enough data or wrong load, logic sleeping...
Logic only list: 2.93
Not enough data or wrong load, logic sleeping...
Logic only list: 2.88
Not enough data or wrong load, logic sleeping...
Logic only list: 2.88
Not enough data or wrong load, logic sleeping...
Logic only list: 2.93
Not enough data or wrong load, logic sleeping...
Logic only list: 2.95
Not enough data or wrong load, logic sleeping...
Logic only list: 2.91
Not enough data or wrong load, logic sleeping...
Logic only list: 2.9
Not enough data or wrong load, logic sleeping...
Logic only list: 2.97
Not enough data or wrong load, logic sleeping...
Logic only list: 3.05
Not enough data or wrong load, logic sleeping...
Logic only list: 2.92
Not enough data or wrong load, logic sleeping...
Logic only list: 3.06
Not enough data or wrong load, logic sleeping...
Logic only list: 2.96
Not enough data or wrong load, logic sleeping...
Logic only list: 3.02
Not enough data or wrong load, logic sleeping...
Logic only list: 3.04
Not enough data or wrong load, logic sleeping...
Logic only list: 3.07
Not enough data or wrong load, logic sleeping...
Logic only list: 2.98
Not enough data or wrong load, logic sleeping...
Logic only list: 3.07
Not enough data or wrong load, logic sleeping...
Logic only list: 3.01
Not enough data or wrong load, logic sleeping...
Logic only list: 3.09
Not enough data or wrong load, logic sleeping...
Logic only list: 3.08
Not enough data or wrong load, logic sleeping...
Logic only list: 3.07
Not enough data or wrong load, logic sleeping...
Logic only list: 3.08
Not enough data or wrong load, logic sleeping...
Logic only list: 3.14
Not enough data or wrong load, logic sleeping...
Logic only list: 3.18
Not enough data or wrong load, logic sleeping...
Logic only list: 3.18
Not enough data or wrong load, logic sleeping...
Logic only list: 3.16
Not enough data or wrong load, logic sleeping...
Logic only list: 3.21
Not enough data or wrong load, logic sleeping...
Logic only list: 3.23
Not enough data or wrong load, logic sleeping...
Logic only list: 3.23
Not enough data or wrong load, logic sleeping...
Logic only list: 3.22
Not enough data or wrong load, logic sleeping...
Logic only list: 3.17
Not enough data or wrong load, logic sleeping...
Logic only list: 3.24
Not enough data or wrong load, logic sleeping...
Logic only list: 3.23
Not enough data or wrong load, logic sleeping...
Logic only list: 3.25
Not enough data or wrong load, logic sleeping...
Logic only list: 3.29
Not enough data or wrong load, logic sleeping...
Logic only list: 3.28
Not enough data or wrong load, logic sleeping...
Logic only list: 3.31
Not enough data or wrong load, logic sleeping...
Logic only list: 3.29
Not enough data or wrong load, logic sleeping...
Logic only list: 3.31
Not enough data or wrong load, logic sleeping...
Logic only list: 3.31
Not enough data or wrong load, logic sleeping...
Logic only list: 3.27
Not enough data or wrong load, logic sleeping...
Logic only list: 3.48
Not enough data or wrong load, logic sleeping...
Logic only list: 3.4
Not enough data or wrong load, logic sleeping...
Logic only list: 3.39
Not enough data or wrong load, logic sleeping...
Logic only list: 3.44
Not enough data or wrong load, logic sleeping...
Logic only list: 3.39
Not enough data or wrong load, logic sleeping...
Logic only list: 3.43
Not enough data or wrong load, logic sleeping...
Logic only list: 3.48
Not enough data or wrong load, logic sleeping...
Logic only list: 3.44
Not enough data or wrong load, logic sleeping...
Logic only list: 3.6
Not enough data or wrong load, logic sleeping...
Logic only list: 3.42
Not enough data or wrong load, logic sleeping...
Logic only list: 3.5
Not enough data or wrong load, logic sleeping...
Logic only list: 3.45
Not enough data or wrong load, logic sleeping...
Logic only list: 3.48
Not enough data or wrong load, logic sleeping...
Logic only list: 3.58
Not enough data or wrong load, logic sleeping...
Logic only list: 3.47
Not enough data or wrong load, logic sleeping...
Logic only list: 3.61
Not enough data or wrong load, logic sleeping...
Logic only list: 3.5
Not enough data or wrong load, logic sleeping...
Logic only list: 3.55
Not enough data or wrong load, logic sleeping...
Logic only list: 3.67
Not enough data or wrong load, logic sleeping...
Logic only list: 3.49
Not enough data or wrong load, logic sleeping...
Logic only list: 3.54
Not enough data or wrong load, logic sleeping...
Logic only list: 3.51
Not enough data or wrong load, logic sleeping...
Logic only list: 3.57
Not enough data or wrong load, logic sleeping...
Logic only list: 3.72
Not enough data or wrong load, logic sleeping...
Logic only list: 3.55
Not enough data or wrong load, logic sleeping...
Logic only list: 3.63
Not enough data or wrong load, logic sleeping...
2022-04-30 09:37:05 --- Data loop 3.88 seconds ---
Logic only list: 3.65
Not enough data or wrong load, logic sleeping...
Logic only list: 3.65
Not enough data or wrong load, logic sleeping...
Logic only list: 3.66
Not enough data or wrong load, logic sleeping...
Logic only list: 3.61
Not enough data or wrong load, logic sleeping...
Logic only list: 3.69
Not enough data or wrong load, logic sleeping...
Logic only list: 3.66
Not enough data or wrong load, logic sleeping...
Logic only list: 3.72
Not enough data or wrong load, logic sleeping...
Logic only list: 3.83
Not enough data or wrong load, logic sleeping...
Logic only list: 3.86
Not enough data or wrong load, logic sleeping...
Logic only list: 3.77
Not enough data or wrong load, logic sleeping...
Logic only list: 3.77
Not enough data or wrong load, logic sleeping...
Logic only list: 3.8
Not enough data or wrong load, logic sleeping...
Logic only list: 3.81
Not enough data or wrong load, logic sleeping...
Logic only list: 3.73
Not enough data or wrong load, logic sleeping...
Logic only list: 3.83
Not enough data or wrong load, logic sleeping...
Logic only list: 3.91
Not enough data or wrong load, logic sleeping...
Logic only list: 3.87
Not enough data or wrong load, logic sleeping...
Logic only list: 3.83
Not enough data or wrong load, logic sleeping...
Logic only list: 3.93
Not enough data or wrong load, logic sleeping...
Logic only list: 3.88
Not enough data or wrong load, logic sleeping...
Logic only list: 3.83
Not enough data or wrong load, logic sleeping...
Logic only list: 3.92
Not enough data or wrong load, logic sleeping...
Logic only list: 3.91
Not enough data or wrong load, logic sleeping...
Logic only list: 3.96
Not enough data or wrong load, logic sleeping...
Logic only list: 3.99
Not enough data or wrong load, logic sleeping...
Logic only list: 3.92
Not enough data or wrong load, logic sleeping...
Logic only list: 4.0
Not enough data or wrong load, logic sleeping...
Logic only list: 3.97
Not enough data or wrong load, logic sleeping...
Logic only list: 3.95
Not enough data or wrong load, logic sleeping...
Logic only list: 4.0
Not enough data or wrong load, logic sleeping...
Logic only list: 4.04
Not enough data or wrong load, logic sleeping...
Logic only list: 4.01
Not enough data or wrong load, logic sleeping...
Logic only list: 3.97
Not enough data or wrong load, logic sleeping...
Logic only list: 4.01
Not enough data or wrong load, logic sleeping...
Logic only list: 4.08
Not enough data or wrong load, logic sleeping...
Logic only list: 4.26
Not enough data or wrong load, logic sleeping...
Logic only list: 4.17
Not enough data or wrong load, logic sleeping...
Logic only list: 4.09
Not enough data or wrong load, logic sleeping...
Logic only list: 4.11
Not enough data or wrong load, logic sleeping...
Logic only list: 4.14
Not enough data or wrong load, logic sleeping...
Logic only list: 4.1
Not enough data or wrong load, logic sleeping...
Logic only list: 4.1
Not enough data or wrong load, logic sleeping...
Logic only list: 4.18
Not enough data or wrong load, logic sleeping...
Logic only list: 4.16
Not enough data or wrong load, logic sleeping...
Logic only list: 4.2
Not enough data or wrong load, logic sleeping...
Logic only list: 4.23
Not enough data or wrong load, logic sleeping...
Logic only list: 4.29
Test time only selecting coin:4.19
Logic selecting coin (plus potential list): 8.48
Logic only logic positions: 8.48
Test time only selecting coin:4.24
Logic selecting coin (plus potential list): 12.71
Logic only logic positions: 12.71
Test time only selecting coin:4.26
Logic selecting coin (plus potential list): 16.97
Logic only logic positions: 16.97
Test time only selecting coin:4.21
Logic selecting coin (plus potential list): 21.18
Logic only logic positions: 21.18
Test time only selecting coin:4.24
Logic selecting coin (plus potential list): 25.42
Logic only logic positions: 25.42
2022-04-30 10:03:50 --- Logic loop 25.42 seconds ---
Logic only list: 4.29
Test time only selecting coin:4.26
Logic selecting coin (plus potential list): 8.55
Logic only logic positions: 8.55
Test time only selecting coin:4.3
Logic selecting coin (plus potential list): 12.85
Logic only logic positions: 12.85
Test time only selecting coin:4.46
Logic selecting coin (plus potential list): 17.3
Logic only logic positions: 17.3
Test time only selecting coin:4.32
Logic selecting coin (plus potential list): 21.62
Logic only logic positions: 21.62
Test time only selecting coin:4.31
Logic selecting coin (plus potential list): 25.92
Logic only logic positions: 25.92
2022-04-30 10:04:15 --- Logic loop 25.92 seconds ---
Logic only list: 4.33
Test time only selecting coin:4.38
Logic selecting coin (plus potential list): 8.7
Logic only logic positions: 8.7
Test time only selecting coin:4.36
Logic selecting coin (plus potential list): 13.06
Logic only logic positions: 13.06
Test time only selecting coin:4.51
Logic selecting coin (plus potential list): 17.57
Logic only logic positions: 17.57
Test time only selecting coin:4.45
Logic selecting coin (plus potential list): 22.01
Logic only logic positions: 22.01
Test time only selecting coin:4.37
Logic selecting coin (plus potential list): 26.38
Logic only logic positions: 26.38
2022-04-30 10:04:40 --- Logic loop 26.38 seconds ---
Logic only list: 4.45
Test time only selecting coin:4.54
Logic selecting coin (plus potential list): 8.99
Logic only logic positions: 8.99
Test time only selecting coin:4.43
Logic selecting coin (plus potential list): 13.42
Logic only logic positions: 13.42
Test time only selecting coin:4.49
Logic selecting coin (plus potential list): 17.91
Logic only logic positions: 17.91
Test time only selecting coin:4.55
Logic selecting coin (plus potential list): 22.47
Logic only logic positions: 22.47
Test time only selecting coin:4.52
Logic selecting coin (plus potential list): 26.99
Logic only logic positions: 26.99
Test time only selecting coin:4.53
Logic selecting coin (plus potential list): 31.52
Logic only logic positions: 31.52
2022-04-30 10:05:15 --- Logic loop 31.52 seconds ---
Logic only list: 4.5
Test time only selecting coin:4.52
Logic selecting coin (plus potential list): 9.02
Logic only logic positions: 9.02
Test time only selecting coin:4.54
Logic selecting coin (plus potential list): 13.56
Logic only logic positions: 13.56
Test time only selecting coin:4.55
Logic selecting coin (plus potential list): 18.11
Logic only logic positions: 18.11
Test time only selecting coin:4.59
Logic selecting coin (plus potential list): 22.69
Logic only logic positions: 22.69
Test time only selecting coin:4.56
Logic selecting coin (plus potential list): 27.26
Logic only logic positions: 27.26
Test time only selecting coin:4.79
Logic selecting coin (plus potential list): 32.05
Logic only logic positions: 32.05
2022-04-30 10:05:45 --- Logic loop 32.05 seconds ---
Logic only list: 4.71
Test time only selecting coin:4.61
Logic selecting coin (plus potential list): 9.31
Logic only logic positions: 9.31
Test time only selecting coin:4.65
Logic selecting coin (plus potential list): 13.97
Logic only logic positions: 13.97
Test time only selecting coin:4.76
Logic selecting coin (plus potential list): 18.72
Logic only logic positions: 18.72
Test time only selecting coin:4.65
Logic selecting coin (plus potential list): 23.38
Logic only logic positions: 23.38
Test time only selecting coin:4.75
Logic selecting coin (plus potential list): 28.12
Logic only logic positions: 28.12
2022-04-30 10:06:15 --- Logic loop 28.12 seconds ---
Logic only list: 4.77
Test time only selecting coin:4.72
Logic selecting coin (plus potential list): 9.49
Logic only logic positions: 9.49
Test time only selecting coin:4.74
Logic selecting coin (plus potential list): 14.23
Logic only logic positions: 14.23
Test time only selecting coin:4.76
Logic selecting coin (plus potential list): 18.99
Logic only logic positions: 18.99
Test time only selecting coin:4.79
Logic selecting coin (plus potential list): 23.78
Logic only logic positions: 23.78
Test time only selecting coin:4.83
Logic selecting coin (plus potential list): 28.61
Logic only logic positions: 28.61
2022-04-30 10:06:40 --- Logic loop 28.61 seconds ---
Logic only list: 4.85
Test time only selecting coin:4.86
Logic selecting coin (plus potential list): 9.7
Logic only logic positions: 9.7
Test time only selecting coin:4.95
Logic selecting coin (plus potential list): 14.66
Logic only logic positions: 14.66
Test time only selecting coin:4.97
Logic selecting coin (plus potential list): 19.62
Logic only logic positions: 19.62
Test time only selecting coin:5.04
Logic selecting coin (plus potential list): 24.67
Logic only logic positions: 24.67
Test time only selecting coin:4.93
Logic selecting coin (plus potential list): 29.59
Logic only logic positions: 29.59
2022-04-30 10:07:10 --- Logic loop 29.59 seconds ---
Logic only list: 4.91
Test time only selecting coin:4.98
Logic selecting coin (plus potential list): 9.89
Logic only logic positions: 9.89
Test time only selecting coin:4.98
Logic selecting coin (plus potential list): 14.87
Logic only logic positions: 14.87
Test time only selecting coin:5.02
Logic selecting coin (plus potential list): 19.88
Logic only logic positions: 19.88
Test time only selecting coin:5.18
Logic selecting coin (plus potential list): 25.06
Logic only logic positions: 25.06
Test time only selecting coin:4.97
Logic selecting coin (plus potential list): 30.03
Logic only logic positions: 30.03
Test time only selecting coin:4.95
Logic selecting coin (plus potential list): 34.98
Logic only logic positions: 34.98
2022-04-30 10:07:45 --- Logic loop 34.98 seconds ---
Logic only list: 5.05
Test time only selecting coin:5.13
Logic selecting coin (plus potential list): 10.18
Logic only logic positions: 10.18
Test time only selecting coin:4.99
Logic selecting coin (plus potential list): 15.18
Logic only logic positions: 15.18
Test time only selecting coin:5.05
Logic selecting coin (plus potential list): 20.22
Logic only logic positions: 20.22
Test time only selecting coin:5.13
Logic selecting coin (plus potential list): 25.35
Logic only logic positions: 25.35
Test time only selecting coin:5.03
Logic selecting coin (plus potential list): 30.38
Logic only logic positions: 30.38
2022-04-30 10:08:15 --- Logic loop 30.38 seconds ---
Logic only list: 5.11
Test time only selecting coin:5.27
Logic selecting coin (plus potential list): 10.38
Logic only logic positions: 10.38
Test time only selecting coin:5.29
Logic selecting coin (plus potential list): 15.66
Logic only logic positions: 15.66
Test time only selecting coin:5.19
Logic selecting coin (plus potential list): 20.85
Logic only logic positions: 20.85
Test time only selecting coin:5.16
Logic selecting coin (plus potential list): 26.01
Logic only logic positions: 26.01
Test time only selecting coin:5.2
Logic selecting coin (plus potential list): 31.21
Logic only logic positions: 31.21
2022-04-30 10:08:45 --- Logic loop 31.21 seconds ---
Logic only list: 5.25
Test time only selecting coin:5.26
Logic selecting coin (plus potential list): 10.52
Logic only logic positions: 10.52
Test time only selecting coin:5.42
Logic selecting coin (plus potential list): 15.93
Logic only logic positions: 15.93
Test time only selecting coin:5.38
Logic selecting coin (plus potential list): 21.31
Logic only logic positions: 21.31
Test time only selecting coin:5.31
Logic selecting coin (plus potential list): 26.62
Logic only logic positions: 26.62
Test time only selecting coin:5.43
Logic selecting coin (plus potential list): 32.05
Logic only logic positions: 32.05
2022-04-30 10:09:20 --- Logic loop 32.05 seconds ---
Logic only list: 5.34
Test time only selecting coin:5.35
Logic selecting coin (plus potential list): 10.69
Logic only logic positions: 10.69
Test time only selecting coin:5.5
Logic selecting coin (plus potential list): 16.19
Logic only logic positions: 16.19
Test time only selecting coin:5.4
Logic selecting coin (plus potential list): 21.59
Logic only logic positions: 21.59
Test time only selecting coin:5.79
Logic selecting coin (plus potential list): 27.39
Logic only logic positions: 27.39
Test time only selecting coin:5.44
Logic selecting coin (plus potential list): 32.83
Logic only logic positions: 32.83
2022-04-30 10:09:50 --- Logic loop 32.83 seconds ---
Logic only list: 5.47
Test time only selecting coin:5.45
Logic selecting coin (plus potential list): 10.93
Logic only logic positions: 10.93
Test time only selecting coin:5.57
Logic selecting coin (plus potential list): 16.5
Logic only logic positions: 16.5
Test time only selecting coin:5.57
Logic selecting coin (plus potential list): 22.07
Logic only logic positions: 22.07
Test time only selecting coin:5.56
Logic selecting coin (plus potential list): 27.63
Logic only logic positions: 27.63
Test time only selecting coin:5.63
Logic selecting coin (plus potential list): 33.26
Logic only logic positions: 33.26
2022-04-30 10:10:25 --- Logic loop 33.26 seconds ---
Logic only list: 5.59
Test time only selecting coin:5.69
Logic selecting coin (plus potential list): 11.28
Logic only logic positions: 11.28
Test time only selecting coin:5.65
Logic selecting coin (plus potential list): 16.92
Logic only logic positions: 16.92
Test time only selecting coin:5.69
Logic selecting coin (plus potential list): 22.62
Logic only logic positions: 22.62
Test time only selecting coin:5.95
Logic selecting coin (plus potential list): 28.57
Logic only logic positions: 28.57
Test time only selecting coin:5.86
Logic selecting coin (plus potential list): 34.44
Logic only logic positions: 34.44
2022-04-30 10:11:00 --- Logic loop 34.44 seconds ---
Logic only list: 5.7
Test time only selecting coin:5.68
Logic selecting coin (plus potential list): 11.38
Logic only logic positions: 11.38
Test time only selecting coin:5.69
Logic selecting coin (plus potential list): 17.07
Logic only logic positions: 17.07
Test time only selecting coin:5.78
Logic selecting coin (plus potential list): 22.85
Logic only logic positions: 22.85
Test time only selecting coin:5.79
Logic selecting coin (plus potential list): 28.64
Logic only logic positions: 28.64
Test time only selecting coin:5.76
Logic selecting coin (plus potential list): 34.4
Logic only logic positions: 34.4
Test time only selecting coin:5.75
Logic selecting coin (plus potential list): 40.15
Logic only logic positions: 40.15
2022-04-30 10:11:40 --- Logic loop 40.15 seconds ---
Logic only list: 5.8
Test time only selecting coin:5.81
Logic selecting coin (plus potential list): 11.61
Logic only logic positions: 11.61
Test time only selecting coin:5.77
Logic selecting coin (plus potential list): 17.37
Logic only logic positions: 17.37
Test time only selecting coin:5.82
Logic selecting coin (plus potential list): 23.19
Logic only logic positions: 23.19
Test time only selecting coin:5.88
Logic selecting coin (plus potential list): 29.07
Logic only logic positions: 29.07
Test time only selecting coin:6.12
Logic selecting coin (plus potential list): 35.19
Logic only logic positions: 35.19
Test time only selecting coin:6.02
Logic selecting coin (plus potential list): 41.21
Logic only logic positions: 41.21
2022-04-30 10:12:20 --- Logic loop 41.21 seconds ---
Logic only list: 5.92
Test time only selecting coin:5.96
Logic selecting coin (plus potential list): 11.88
Logic only logic positions: 11.88
Test time only selecting coin:5.96
Logic selecting coin (plus potential list): 17.84
Logic only logic positions: 17.84
Test time only selecting coin:6.06
Logic selecting coin (plus potential list): 23.9
Logic only logic positions: 23.9
Test time only selecting coin:6.04
Logic selecting coin (plus potential list): 29.95
Logic only logic positions: 29.95
Test time only selecting coin:6.0
Logic selecting coin (plus potential list): 35.95
Logic only logic positions: 35.95
Test time only selecting coin:6.09
Logic selecting coin (plus potential list): 42.04
Logic only logic positions: 42.04
Test time only selecting coin:6.09
Logic selecting coin (plus potential list): 48.13
Logic only logic positions: 48.13
2022-04-30 10:13:10 --- Logic loop 48.13 seconds ---
Logic only list: 6.09
Test time only selecting coin:6.12
Logic selecting coin (plus potential list): 12.21
Logic only logic positions: 12.21
Test time only selecting coin:6.19
Logic selecting coin (plus potential list): 18.4
Logic only logic positions: 18.4
Test time only selecting coin:6.16
Logic selecting coin (plus potential list): 24.56
Logic only logic positions: 24.56
Test time only selecting coin:6.21
Logic selecting coin (plus potential list): 30.77
Logic only logic positions: 30.77
Test time only selecting coin:6.22
Logic selecting coin (plus potential list): 36.99
Logic only logic positions: 36.99
Test time only selecting coin:6.31
Logic selecting coin (plus potential list): 43.3
Logic only logic positions: 43.3
Test time only selecting coin:6.73
Logic selecting coin (plus potential list): 50.02
Logic only logic positions: 50.02
2022-04-30 10:14:00 --- Logic loop 50.02 seconds ---
Logic only list: 6.54
Test time only selecting coin:6.28
Logic selecting coin (plus potential list): 12.82
Logic only logic positions: 12.82
Test time only selecting coin:6.28
Logic selecting coin (plus potential list): 19.09
Logic only logic positions: 19.09
Test time only selecting coin:6.38
Logic selecting coin (plus potential list): 25.48
Logic only logic positions: 25.48
Test time only selecting coin:6.42
Logic selecting coin (plus potential list): 31.9
Logic only logic positions: 31.9
Test time only selecting coin:6.38
Logic selecting coin (plus potential list): 38.28
Logic only logic positions: 38.28
Test time only selecting coin:6.47
Logic selecting coin (plus potential list): 44.75
Logic only logic positions: 44.75
2022-04-30 10:14:45 --- Logic loop 44.75 seconds ---
Logic only list: 6.42
Test time only selecting coin:6.49
Logic selecting coin (plus potential list): 12.91
Logic only logic positions: 12.91
Test time only selecting coin:6.48
Logic selecting coin (plus potential list): 19.38
Logic only logic positions: 19.38
Test time only selecting coin:6.64
Logic selecting coin (plus potential list): 26.02
Logic only logic positions: 26.02
Test time only selecting coin:6.49
Logic selecting coin (plus potential list): 32.51
Logic only logic positions: 32.51
Test time only selecting coin:6.53
Logic selecting coin (plus potential list): 39.04
Logic only logic positions: 39.04
2022-04-30 10:15:25 --- Logic loop 39.04 seconds ---
Logic only list: 6.56
Test time only selecting coin:6.69
Logic selecting coin (plus potential list): 13.24
Logic only logic positions: 13.24
Test time only selecting coin:6.58
Logic selecting coin (plus potential list): 19.83
Logic only logic positions: 19.83
Test time only selecting coin:6.65
Logic selecting coin (plus potential list): 26.47
Logic only logic positions: 26.47
Test time only selecting coin:6.6
Logic selecting coin (plus potential list): 33.08
Logic only logic positions: 33.08
Test time only selecting coin:6.92
Logic selecting coin (plus potential list): 40.0
Logic only logic positions: 40.0
Test time only selecting coin:6.74
Logic selecting coin (plus potential list): 46.74
Logic only logic positions: 46.74
2022-04-30 10:16:10 --- Logic loop 46.74 seconds ---
Logic only list: 6.64
Test time only selecting coin:6.71
Logic selecting coin (plus potential list): 13.35
Logic only logic positions: 13.35
Test time only selecting coin:6.73
Logic selecting coin (plus potential list): 20.08
Logic only logic positions: 20.08
Test time only selecting coin:6.69
Logic selecting coin (plus potential list): 26.77
Logic only logic positions: 26.77
Test time only selecting coin:6.83
Logic selecting coin (plus potential list): 33.6
Logic only logic positions: 33.6
Test time only selecting coin:6.77
Logic selecting coin (plus potential list): 40.37
Logic only logic positions: 40.37
Test time only selecting coin:6.95
Logic selecting coin (plus potential list): 47.32
Logic only logic positions: 47.32
2022-04-30 10:16:55 --- Logic loop 47.32 seconds ---
Logic only list: 6.83
Test time only selecting coin:6.95
Logic selecting coin (plus potential list): 13.78
Logic only logic positions: 13.78
Test time only selecting coin:6.94
Logic selecting coin (plus potential list): 20.73
Logic only logic positions: 20.73
Test time only selecting coin:6.9
Logic selecting coin (plus potential list): 27.63
Logic only logic positions: 27.63
Test time only selecting coin:6.89
Logic selecting coin (plus potential list): 34.51
Logic only logic positions: 34.51
Test time only selecting coin:6.93
Logic selecting coin (plus potential list): 41.44
Logic only logic positions: 41.44
Test time only selecting coin:7.02
Logic selecting coin (plus potential list): 48.46
Logic only logic positions: 48.46
Test time only selecting coin:7.06
Logic selecting coin (plus potential list): 55.52
Logic only logic positions: 55.52
2022-04-30 10:17:55 --- Logic loop 55.52 seconds ---
Logic only list: 7.0
Test time only selecting coin:7.13
Logic selecting coin (plus potential list): 14.13
Logic only logic positions: 14.13
Test time only selecting coin:7.1
Logic selecting coin (plus potential list): 21.23
Logic only logic positions: 21.23
Test time only selecting coin:7.28
Logic selecting coin (plus potential list): 28.52
Logic only logic positions: 28.52
Test time only selecting coin:7.14
Logic selecting coin (plus potential list): 35.66
Logic only logic positions: 35.66
Test time only selecting coin:7.31
Logic selecting coin (plus potential list): 42.97
Logic only logic positions: 42.97
Test time only selecting coin:7.21
Logic selecting coin (plus potential list): 50.18
Logic only logic positions: 50.18
2022-04-30 10:18:45 --- Logic loop 50.18 seconds ---
Logic only list: 7.2
Test time only selecting coin:7.27
Logic selecting coin (plus potential list): 14.47
Logic only logic positions: 14.47
Test time only selecting coin:7.31
Logic selecting coin (plus potential list): 21.78
Logic only logic positions: 21.78
Test time only selecting coin:7.38
Logic selecting coin (plus potential list): 29.16
Logic only logic positions: 29.16
Test time only selecting coin:7.28
Logic selecting coin (plus potential list): 36.44
Logic only logic positions: 36.44
Test time only selecting coin:7.3
Logic selecting coin (plus potential list): 43.74
Logic only logic positions: 43.74
Test time only selecting coin:7.34
Logic selecting coin (plus potential list): 51.08
Logic only logic positions: 51.08
2022-04-30 10:19:35 --- Logic loop 51.08 seconds ---
Logic only list: 7.37
Test time only selecting coin:7.32
Logic selecting coin (plus potential list): 14.69
Logic only logic positions: 14.69
Test time only selecting coin:7.38
Logic selecting coin (plus potential list): 22.07
Logic only logic positions: 22.07
Test time only selecting coin:7.45
Logic selecting coin (plus potential list): 29.52
Logic only logic positions: 29.52
Test time only selecting coin:7.48
Logic selecting coin (plus potential list): 37.0
Logic only logic positions: 37.0
Test time only selecting coin:7.46
Logic selecting coin (plus potential list): 44.46
Logic only logic positions: 44.46
Test time only selecting coin:7.56
Logic selecting coin (plus potential list): 52.03
Logic only logic positions: 52.03
2022-04-30 10:20:25 --- Logic loop 52.03 seconds ---
Logic only list: 7.57
Test time only selecting coin:7.5
Logic selecting coin (plus potential list): 15.06
Logic only logic positions: 15.06
Test time only selecting coin:7.73
Logic selecting coin (plus potential list): 22.79
Logic only logic positions: 22.79
Test time only selecting coin:7.7
Logic selecting coin (plus potential list): 30.5
Logic only logic positions: 30.5
Test time only selecting coin:7.67
Logic selecting coin (plus potential list): 38.17
Logic only logic positions: 38.17
Test time only selecting coin:7.67
Logic selecting coin (plus potential list): 45.83
Logic only logic positions: 45.84
Test time only selecting coin:7.77
Logic selecting coin (plus potential list): 53.6
Logic only logic positions: 53.6
2022-04-30 10:21:20 --- Logic loop 53.6 seconds ---
Logic only list: 7.68
Test time only selecting coin:7.79
Logic selecting coin (plus potential list): 15.47
Logic only logic positions: 15.47
Test time only selecting coin:7.78
Logic selecting coin (plus potential list): 23.24
Logic only logic positions: 23.24
Test time only selecting coin:7.72
Logic selecting coin (plus potential list): 30.97
Logic only logic positions: 30.97
Test time only selecting coin:7.75
Logic selecting coin (plus potential list): 38.72
Logic only logic positions: 38.72
Test time only selecting coin:7.78
Logic selecting coin (plus potential list): 46.49
Logic only logic positions: 46.49
2022-04-30 10:22:05 --- Logic loop 46.49 seconds ---
Logic only list: 7.84
Test time only selecting coin:7.84
Logic selecting coin (plus potential list): 15.68
Logic only logic positions: 15.68
Test time only selecting coin:7.85
Logic selecting coin (plus potential list): 23.53
Logic only logic positions: 23.53
Test time only selecting coin:7.88
Logic selecting coin (plus potential list): 31.41
Logic only logic positions: 31.41
Test time only selecting coin:7.94
Logic selecting coin (plus potential list): 39.35
Logic only logic positions: 39.35
Test time only selecting coin:7.98
Logic selecting coin (plus potential list): 47.33
Logic only logic positions: 47.33
2022-04-30 10:22:55 --- Logic loop 47.33 seconds ---
Logic only list: 7.98
Test time only selecting coin:7.99
Logic selecting coin (plus potential list): 15.97
Logic only logic positions: 15.97
Test time only selecting coin:8.09
Logic selecting coin (plus potential list): 24.06
Logic only logic positions: 24.06
Test time only selecting coin:8.08
Logic selecting coin (plus potential list): 32.14
Logic only logic positions: 32.14
Test time only selecting coin:8.14
Logic selecting coin (plus potential list): 40.28
Logic only logic positions: 40.28
Test time only selecting coin:8.15
Logic selecting coin (plus potential list): 48.43
Logic only logic positions: 48.43
2022-04-30 10:23:40 --- Logic loop 48.43 seconds ---
Logic only list: 8.14
Test time only selecting coin:8.15
Logic selecting coin (plus potential list): 16.29
Logic only logic positions: 16.29
Test time only selecting coin:8.16
Logic selecting coin (plus potential list): 24.45
Logic only logic positions: 24.45
Test time only selecting coin:8.48
Logic selecting coin (plus potential list): 32.93
Logic only logic positions: 32.93
Test time only selecting coin:8.41
Logic selecting coin (plus potential list): 41.34
Logic only logic positions: 41.34
Test time only selecting coin:8.49
Logic selecting coin (plus potential list): 49.83
Logic only logic positions: 49.83
2022-04-30 10:24:30 --- Logic loop 49.83 seconds ---
Logic only list: 8.34
Test time only selecting coin:8.42
Logic selecting coin (plus potential list): 16.76
Logic only logic positions: 16.76
Test time only selecting coin:8.83
Logic selecting coin (plus potential list): 25.59
Logic only logic positions: 25.59
Test time only selecting coin:8.53
Logic selecting coin (plus potential list): 34.12
Logic only logic positions: 34.12
Test time only selecting coin:8.49
Logic selecting coin (plus potential list): 42.61
Logic only logic positions: 42.61
Test time only selecting coin:8.52
Logic selecting coin (plus potential list): 51.13
Logic only logic positions: 51.13
2022-04-30 10:25:25 --- Logic loop 51.13 seconds ---
Logic only list: 8.51
Test time only selecting coin:8.47
Logic selecting coin (plus potential list): 16.98
Logic only logic positions: 16.98
Test time only selecting coin:8.72
Logic selecting coin (plus potential list): 25.71
Logic only logic positions: 25.71
Test time only selecting coin:8.82
Logic selecting coin (plus potential list): 34.53
Logic only logic positions: 34.53
Test time only selecting coin:8.55
Logic selecting coin (plus potential list): 43.08
Logic only logic positions: 43.08
Test time only selecting coin:8.64
Logic selecting coin (plus potential list): 51.72
Logic only logic positions: 51.72
2022-04-30 10:26:15 --- Logic loop 51.72 seconds ---
Logic only list: 8.64
Test time only selecting coin:8.73
Logic selecting coin (plus potential list): 17.37
Logic only logic positions: 17.37
Test time only selecting coin:8.78
Logic selecting coin (plus potential list): 26.15
Logic only logic positions: 26.15
Test time only selecting coin:8.72
Logic selecting coin (plus potential list): 34.87
Logic only logic positions: 34.87
Test time only selecting coin:9.13
Logic selecting coin (plus potential list): 44.0
Logic only logic positions: 44.0
Test time only selecting coin:8.74
Logic selecting coin (plus potential list): 52.74
Logic only logic positions: 52.74
2022-04-30 10:27:10 --- Logic loop 52.74 seconds ---
Logic only list: 8.84
Test time only selecting coin:8.89
Logic selecting coin (plus potential list): 17.72
Logic only logic positions: 17.72
Test time only selecting coin:8.82
Logic selecting coin (plus potential list): 26.54
Logic only logic positions: 26.54
Test time only selecting coin:8.95
Logic selecting coin (plus potential list): 35.49
Logic only logic positions: 35.49
Test time only selecting coin:9.07
Logic selecting coin (plus potential list): 44.56
Logic only logic positions: 44.56
Test time only selecting coin:8.99
Logic selecting coin (plus potential list): 53.55
Logic only logic positions: 53.55
2022-04-30 10:28:00 --- Logic loop 53.55 seconds ---
Logic only list: 9.01
Test time only selecting coin:9.08
Logic selecting coin (plus potential list): 18.09
Logic only logic positions: 18.09
Test time only selecting coin:9.03
Logic selecting coin (plus potential list): 27.13
Logic only logic positions: 27.13
Test time only selecting coin:9.26
Logic selecting coin (plus potential list): 36.38
Logic only logic positions: 36.38
Test time only selecting coin:9.14
Logic selecting coin (plus potential list): 45.52
Logic only logic positions: 45.52
Test time only selecting coin:9.21
Logic selecting coin (plus potential list): 54.74
Logic only logic positions: 54.74
2022-04-30 10:28:55 --- Logic loop 54.74 seconds ---
Logic only list: 9.37
Test time only selecting coin:9.44
Logic selecting coin (plus potential list): 18.81
Logic only logic positions: 18.81
Test time only selecting coin:9.27
Logic selecting coin (plus potential list): 28.08
Logic only logic positions: 28.08
Test time only selecting coin:9.27
Logic selecting coin (plus potential list): 37.36
Logic only logic positions: 37.36
Test time only selecting coin:9.27
Logic selecting coin (plus potential list): 46.62
Logic only logic positions: 46.62
Test time only selecting coin:9.31
Logic selecting coin (plus potential list): 55.94
Logic only logic positions: 55.94
2022-04-30 10:29:50 --- Logic loop 55.94 seconds ---
Logic only list: 9.38
Test time only selecting coin:9.36
Logic selecting coin (plus potential list): 18.75
Logic only logic positions: 18.75
Test time only selecting coin:9.39
Logic selecting coin (plus potential list): 28.13
Logic only logic positions: 28.13
Test time only selecting coin:9.48
Logic selecting coin (plus potential list): 37.61
2022-04-30 10:30:30 NEAR Closing Drift short: All, closing Binance long: 74.0
                 timestamp binance_pair  drift_pair    bina_price   drift_price  gap_perc   gap_abs  fast_avg_gap  top_avg_gaps  bottom_avg_gaps  gap_range  open_l_drift  open_s_drift  open_somewhere  close_l_drift  close_s_drift
symbol                                                                                                                                                                                                                               
BTC    2022-04-30 10:30:20      BTCUSDT           1  38623.100000  38620.662784  0.006310  0.006310     -0.030078     -0.006534        -0.195148   0.188614         False         False           False          False          False
ADA    2022-04-30 10:30:20      ADAUSDT           9      0.809648      0.809920 -0.033522  0.033522     -0.033730     -0.039815        -0.307965   0.268149         False         False           False          False          False
SOL    2022-04-30 10:30:20      SOLUSDT           0     94.343862     94.304417  0.041810  0.041810     -0.012850     -0.062088        -0.308767   0.246679         False         False           False          False          False
FTT    2022-04-30 10:30:20      FTTUSDT          11     38.987000     38.969249  0.045531  0.045531     -0.056402     -0.087757        -0.355683   0.267926         False         False           False          False          False
DOT    2022-04-30 10:30:20      DOTUSDT           8     16.162000     16.170327 -0.051523  0.051523     -0.165397     -0.195165        -0.449743   0.254578         False         False           False          False          False
XRP    2022-04-30 10:30:20      XRPUSDT          13      0.620600      0.620994 -0.063484  0.063484     -0.136763     -0.112520        -0.378066   0.265546         False         False           False          False          False
ETH    2022-04-30 10:30:20      ETHUSDT           2   2835.570000   2833.297201  0.080153  0.080153      0.025717      0.065869        -0.183110   0.248979         False         False           False          False           True
CRV    2022-04-30 10:30:20      CRVUSDT          19      2.222000      2.224215 -0.099696  0.099696     -0.314534     -0.272324        -0.657008   0.384684         False         False           False          False          False
NEAR   2022-04-30 10:30:20     NEARUSDT          16     11.459000     11.447379  0.101416  0.101416      0.083341     -0.083799        -0.381443   0.297644         False         False           False          False           True
BNB    2022-04-30 10:30:20      BNBUSDT           5    397.797866    397.360444  0.109961  0.109961      0.037623      0.091633        -0.126338   0.217971         False         False           False          False           True
MATIC  2022-04-30 10:30:20    MATICUSDT           6      1.140856      1.142138 -0.112390  0.112390     -0.234352     -0.204140        -0.571577   0.367437         False         False           False          False          False
ALGO   2022-04-30 10:30:20     ALGOUSDT          10      0.635000      0.635717 -0.112840  0.112840     -0.213138     -0.266000        -0.554050   0.288050         False         False           False          False          False
LUNA   2022-04-30 10:30:20     LUNAUSDT           3     83.979000     83.878322  0.119885  0.119885      0.133409      0.080450        -0.158831   0.239281         False         False           False          False          False
GMT    2022-04-30 10:30:20      GMTUSDT          18      3.847800      3.843079  0.122692  0.122692      0.072157      0.139151        -0.190037   0.329187         False         False           False          False          False
LTC    2022-04-30 10:30:20      LTCUSDT          12    100.780000    100.654618  0.124412  0.124412      0.048953      0.030511        -0.211403   0.241913         False         False           False          False           True
AVAX   2022-04-30 10:30:20     AVAXUSDT           4     62.860000     62.938215 -0.124427  0.124427     -0.223022     -0.205138        -0.489149   0.284012         False         False           False          False          False
DOGE   2022-04-30 10:30:20     DOGEUSDT          15      0.135281      0.135552 -0.200320  0.200320     -0.283801     -0.331064        -0.587371   0.256306         False         False           False          False          False
ATOM   2022-04-30 10:30:20     ATOMUSDT           7     19.028000     19.070848 -0.225181  0.225181     -0.324468     -0.335364        -0.614802   0.279438         False         False           False          False          False
SRM    2022-04-30 10:30:20      SRMUSDT          17      1.966077      1.975616 -0.485155  0.485155     -0.521048     -0.364311        -0.732586   0.368275         False         False           False          False          False
APE    2022-04-30 10:30:20      APEUSDT          14     23.194749     23.056352  0.596676  0.596676      0.472144      1.241752         0.104765   1.136987         False         False           False          False          False
Try number: 1
--- Drift orders 6.44 seconds ---
--- Bina orders 0.29 seconds ---
Error on closing positions: cannot convert float NaN to integer
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 516, in run_constant_parallel_logic
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

Err: cannot convert float NaN to integer
Err type: <class 'ValueError'>
Err cause: None
Err cause type: <class 'NoneType'>
Err context: cannot convert float NaN to integer
Err context type: <class 'ValueError'>
Error on logic: cannot convert float NaN to integer
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 516, in run_constant_parallel_logic
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 526, in run_constant_parallel_logic
    imbalance_status, positions_dataframe = await self.imbalance_checker(fresh_data, coin_symbol, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 250, in imbalance_checker
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

Logic only list: 9.69
Test time only selecting coin:9.83
Logic selecting coin (plus potential list): 19.53
Logic only logic positions: 19.53
Test time only selecting coin:9.66
Logic selecting coin (plus potential list): 29.19
Logic only logic positions: 29.19
Test time only selecting coin:9.95
Logic selecting coin (plus potential list): 39.14
Logic only logic positions: 39.14
Test time only selecting coin:9.69
Logic selecting coin (plus potential list): 48.83
Logic only logic positions: 48.83
Test time only selecting coin:9.87
Logic selecting coin (plus potential list): 58.69
Logic only logic positions: 58.69
2022-04-30 10:31:55 --- Logic loop 58.69 seconds ---
Logic only list: 9.89
Test time only selecting coin:9.95
Logic selecting coin (plus potential list): 19.85
Logic only logic positions: 19.85
Test time only selecting coin:10.24
Logic selecting coin (plus potential list): 30.09
Logic only logic positions: 30.09
Test time only selecting coin:10.0
Logic selecting coin (plus potential list): 40.09
Logic only logic positions: 40.09
Test time only selecting coin:10.02
Logic selecting coin (plus potential list): 50.12
Logic only logic positions: 50.12
Test time only selecting coin:10.11
Logic selecting coin (plus potential list): 60.23
Logic only logic positions: 60.23
2022-04-30 10:32:55 --- Logic loop 60.23 seconds ---
Logic only list: 10.09
Test time only selecting coin:10.23
Logic selecting coin (plus potential list): 20.33
Logic only logic positions: 20.33
Test time only selecting coin:10.1
Logic selecting coin (plus potential list): 30.43
Logic only logic positions: 30.43
Test time only selecting coin:10.03
Logic selecting coin (plus potential list): 40.46
Logic only logic positions: 40.46
Test time only selecting coin:10.15
Logic selecting coin (plus potential list): 50.61
Logic only logic positions: 50.61
Test time only selecting coin:10.35
Logic selecting coin (plus potential list): 60.96
Logic only logic positions: 60.96
2022-04-30 10:33:55 --- Logic loop 60.96 seconds ---
Logic only list: 10.11
Test time only selecting coin:10.21
Logic selecting coin (plus potential list): 20.32
Logic only logic positions: 20.32
Test time only selecting coin:10.23
Logic selecting coin (plus potential list): 30.55
Logic only logic positions: 30.55
Test time only selecting coin:10.32
Logic selecting coin (plus potential list): 40.87
Logic only logic positions: 40.87
Test time only selecting coin:10.35
Logic selecting coin (plus potential list): 51.22
Logic only logic positions: 51.22
Test time only selecting coin:10.34
Logic selecting coin (plus potential list): 61.56
Logic only logic positions: 61.56
2022-04-30 10:34:55 --- Logic loop 61.56 seconds ---
Logic only list: 10.58
Test time only selecting coin:10.37
Logic selecting coin (plus potential list): 20.95
Logic only logic positions: 20.95
Test time only selecting coin:10.44
Logic selecting coin (plus potential list): 31.39
Logic only logic positions: 31.39
Test time only selecting coin:10.44
Logic selecting coin (plus potential list): 41.83
Logic only logic positions: 41.83
Test time only selecting coin:10.52
Logic selecting coin (plus potential list): 52.35
Logic only logic positions: 52.35
Test time only selecting coin:11.07
Logic selecting coin (plus potential list): 63.42
Logic only logic positions: 63.42
2022-04-30 10:36:00 --- Logic loop 63.42 seconds ---
Logic only list: 10.56
Test time only selecting coin:10.58
Logic selecting coin (plus potential list): 21.14
Logic only logic positions: 21.14
Test time only selecting coin:10.63
Logic selecting coin (plus potential list): 31.76
Logic only logic positions: 31.76
Test time only selecting coin:10.65
Logic selecting coin (plus potential list): 42.42
Logic only logic positions: 42.42
Test time only selecting coin:10.77
Logic selecting coin (plus potential list): 53.19
Logic only logic positions: 53.19
Test time only selecting coin:10.78
Logic selecting coin (plus potential list): 63.97
Logic only logic positions: 63.97
2022-04-30 10:37:05 --- Logic loop 63.97 seconds ---
Logic only list: 10.85
Test time only selecting coin:10.94
Logic selecting coin (plus potential list): 21.79
Logic only logic positions: 21.79
Test time only selecting coin:10.91
Logic selecting coin (plus potential list): 32.7
Logic only logic positions: 32.7
Test time only selecting coin:11.14
Logic selecting coin (plus potential list): 43.85
Logic only logic positions: 43.85
Test time only selecting coin:11.0
Logic selecting coin (plus potential list): 54.85
Logic only logic positions: 54.85
Test time only selecting coin:11.01
Logic selecting coin (plus potential list): 65.86
Logic only logic positions: 65.86
2022-04-30 10:38:10 --- Logic loop 65.86 seconds ---
Logic only list: 11.21
Test time only selecting coin:11.44
Logic selecting coin (plus potential list): 22.65
Logic only logic positions: 22.65
Test time only selecting coin:11.14
Logic selecting coin (plus potential list): 33.8
Logic only logic positions: 33.8
Test time only selecting coin:11.18
Logic selecting coin (plus potential list): 44.98
Logic only logic positions: 44.98
Test time only selecting coin:11.33
Logic selecting coin (plus potential list): 56.3
Logic only logic positions: 56.3
Test time only selecting coin:11.28
Logic selecting coin (plus potential list): 67.58
Logic only logic positions: 67.58
2022-04-30 10:39:20 --- Logic loop 67.58 seconds ---
Logic only list: 11.32
Test time only selecting coin:11.28
Logic selecting coin (plus potential list): 22.6
Logic only logic positions: 22.6
Test time only selecting coin:11.26
Logic selecting coin (plus potential list): 33.86
Logic only logic positions: 33.86
Test time only selecting coin:11.43
Logic selecting coin (plus potential list): 45.28
Logic only logic positions: 45.28
Test time only selecting coin:11.32
Logic selecting coin (plus potential list): 56.6
Logic only logic positions: 56.6
Test time only selecting coin:11.47
Logic selecting coin (plus potential list): 68.07
Logic only logic positions: 68.07
Test time only selecting coin:11.62
Logic selecting coin (plus potential list): 79.69
Logic only logic positions: 79.69
2022-04-30 10:40:40 --- Logic loop 79.69 seconds ---
Logic only list: 11.47
Test time only selecting coin:12.0
Logic selecting coin (plus potential list): 23.47
Logic only logic positions: 23.47
Test time only selecting coin:12.09
Logic selecting coin (plus potential list): 35.56
Logic only logic positions: 35.56
Test time only selecting coin:11.7
Logic selecting coin (plus potential list): 47.27
Logic only logic positions: 47.27
Test time only selecting coin:11.64
Logic selecting coin (plus potential list): 58.9
Logic only logic positions: 58.9
Test time only selecting coin:11.74
Logic selecting coin (plus potential list): 70.64
Logic only logic positions: 70.64
Test time only selecting coin:11.72
Logic selecting coin (plus potential list): 82.36
Logic only logic positions: 82.36
2022-04-30 10:42:00 --- Logic loop 82.36 seconds ---
Logic only list: 11.87
Test time only selecting coin:11.92
Logic selecting coin (plus potential list): 23.79
Logic only logic positions: 23.79
Test time only selecting coin:11.88
Logic selecting coin (plus potential list): 35.67
Logic only logic positions: 35.67
Test time only selecting coin:12.1
Logic selecting coin (plus potential list): 47.77
Logic only logic positions: 47.77
Test time only selecting coin:11.91
Logic selecting coin (plus potential list): 59.68
Logic only logic positions: 59.68
Test time only selecting coin:11.91
Logic selecting coin (plus potential list): 71.59
Logic only logic positions: 71.59
2022-04-30 10:43:10 --- Logic loop 71.59 seconds ---
Logic only list: 11.99
Test time only selecting coin:12.03
Logic selecting coin (plus potential list): 24.02
Logic only logic positions: 24.02
Test time only selecting coin:12.27
Logic selecting coin (plus potential list): 36.28
Logic only logic positions: 36.28
Test time only selecting coin:12.03
Logic selecting coin (plus potential list): 48.31
Logic only logic positions: 48.31
Test time only selecting coin:12.13
Logic selecting coin (plus potential list): 60.44
Logic only logic positions: 60.44
Test time only selecting coin:12.15
Logic selecting coin (plus potential list): 72.6
Logic only logic positions: 72.6
2022-04-30 10:44:25 --- Logic loop 72.6 seconds ---
Logic only list: 12.25
Test time only selecting coin:12.47
Logic selecting coin (plus potential list): 24.72
Logic only logic positions: 24.72
Test time only selecting coin:12.53
Logic selecting coin (plus potential list): 37.25
Logic only logic positions: 37.25
Test time only selecting coin:12.25
Logic selecting coin (plus potential list): 49.51
Logic only logic positions: 49.51
Test time only selecting coin:12.99
Logic selecting coin (plus potential list): 62.49
Logic only logic positions: 62.49
Test time only selecting coin:12.44
Logic selecting coin (plus potential list): 74.93
Logic only logic positions: 74.93
2022-04-30 10:45:40 --- Logic loop 74.93 seconds ---
Logic only list: 12.54
Test time only selecting coin:12.5
Logic selecting coin (plus potential list): 25.03
Logic only logic positions: 25.03
Test time only selecting coin:12.79
Logic selecting coin (plus potential list): 37.83
Logic only logic positions: 37.83
Test time only selecting coin:12.73
Logic selecting coin (plus potential list): 50.56
Logic only logic positions: 50.56
Test time only selecting coin:12.62
Logic selecting coin (plus potential list): 63.18
Logic only logic positions: 63.18
Test time only selecting coin:12.8
Logic selecting coin (plus potential list): 75.98
Logic only logic positions: 75.98
2022-04-30 10:46:55 --- Logic loop 75.98 seconds ---
2022-04-30 10:46:55: Account value sum: 2413.42, Bina: 1197.84 Drift: 1215.58
Logic only list: 12.8
Test time only selecting coin:12.77
Logic selecting coin (plus potential list): 25.56
Logic only logic positions: 25.56
Test time only selecting coin:12.9
Logic selecting coin (plus potential list): 38.46
Logic only logic positions: 38.46
Test time only selecting coin:12.91
Logic selecting coin (plus potential list): 51.37
Logic only logic positions: 51.37
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 64.41
Logic only logic positions: 64.41
Test time only selecting coin:13.06
Logic selecting coin (plus potential list): 77.48
Logic only logic positions: 77.48
2022-04-30 10:48:15 --- Logic loop 77.48 seconds ---
Logic only list: 12.97
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 26.01
Logic only logic positions: 26.01
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 39.09
Logic only logic positions: 39.09
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 52.09
Logic only logic positions: 52.09
Test time only selecting coin:13.14
Logic selecting coin (plus potential list): 65.23
Logic only logic positions: 65.23
Test time only selecting coin:12.96
Logic selecting coin (plus potential list): 78.18
Logic only logic positions: 78.18
2022-04-30 10:49:35 --- Logic loop 78.18 seconds ---
Logic only list: 13.01
Test time only selecting coin:13.09
Logic selecting coin (plus potential list): 26.1
Logic only logic positions: 26.1
Test time only selecting coin:13.21
Logic selecting coin (plus potential list): 39.31
Logic only logic positions: 39.31
Test time only selecting coin:13.09
Logic selecting coin (plus potential list): 52.4
Logic only logic positions: 52.4
Test time only selecting coin:13.22
Logic selecting coin (plus potential list): 65.61
Logic only logic positions: 65.61
Test time only selecting coin:13.02
Logic selecting coin (plus potential list): 78.64
Logic only logic positions: 78.64
2022-04-30 10:50:50 --- Logic loop 78.64 seconds ---
Logic only list: 13.1
Test time only selecting coin:13.05
Logic selecting coin (plus potential list): 26.15
Logic only logic positions: 26.15
Test time only selecting coin:13.66
Logic selecting coin (plus potential list): 39.81
Logic only logic positions: 39.81
Test time only selecting coin:13.24
Logic selecting coin (plus potential list): 53.05
Logic only logic positions: 53.05
Test time only selecting coin:13.49
Logic selecting coin (plus potential list): 66.54
Logic only logic positions: 66.54
Test time only selecting coin:13.22
Logic selecting coin (plus potential list): 79.76
Logic only logic positions: 79.76
Test time only selecting coin:13.14
Logic selecting coin (plus potential list): 92.9
Logic only logic positions: 92.9
2022-04-30 10:52:25 --- Logic loop 92.9 seconds ---
Logic only list: 13.16
Test time only selecting coin:13.05
Logic selecting coin (plus potential list): 26.21
Logic only logic positions: 26.21
Test time only selecting coin:13.01
Logic selecting coin (plus potential list): 39.22
Logic only logic positions: 39.22
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 52.31
Logic only logic positions: 52.31
Test time only selecting coin:13.19
Logic selecting coin (plus potential list): 65.5
Logic only logic positions: 65.5
Test time only selecting coin:13.19
Logic selecting coin (plus potential list): 78.7
Logic only logic positions: 78.7
Test time only selecting coin:13.01
Logic selecting coin (plus potential list): 91.71
Logic only logic positions: 91.71
2022-04-30 10:53:55 --- Logic loop 91.71 seconds ---
Logic only list: 13.69
Test time only selecting coin:13.33
Logic selecting coin (plus potential list): 27.02
Logic only logic positions: 27.02
Test time only selecting coin:13.06
Logic selecting coin (plus potential list): 40.08
Logic only logic positions: 40.08
Test time only selecting coin:13.23
Logic selecting coin (plus potential list): 53.32
Logic only logic positions: 53.32
Test time only selecting coin:13.23
Logic selecting coin (plus potential list): 66.55
Logic only logic positions: 66.55
Test time only selecting coin:13.21
Logic selecting coin (plus potential list): 79.76
Logic only logic positions: 79.76
2022-04-30 10:55:15 --- Logic loop 79.76 seconds ---
Logic only list: 13.61
Test time only selecting coin:13.05
Logic selecting coin (plus potential list): 26.66
Logic only logic positions: 26.66
Test time only selecting coin:13.17
Logic selecting coin (plus potential list): 39.84
Logic only logic positions: 39.84
Test time only selecting coin:13.23
Logic selecting coin (plus potential list): 53.07
Logic only logic positions: 53.07
Test time only selecting coin:13.36
Logic selecting coin (plus potential list): 66.43
Logic only logic positions: 66.43
Test time only selecting coin:13.05
Logic selecting coin (plus potential list): 79.47
Logic only logic positions: 79.47
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 92.51
Logic only logic positions: 92.51
2022-04-30 10:56:50 --- Logic loop 92.51 seconds ---
Logic only list: 13.45
Test time only selecting coin:13.32
Logic selecting coin (plus potential list): 26.77
Logic only logic positions: 26.77
Test time only selecting coin:13.17
Logic selecting coin (plus potential list): 39.94
Logic only logic positions: 39.94
Test time only selecting coin:13.25
Logic selecting coin (plus potential list): 53.19
Logic only logic positions: 53.19
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 66.19
Logic only logic positions: 66.19
Test time only selecting coin:13.14
Logic selecting coin (plus potential list): 79.32
Logic only logic positions: 79.32
2022-04-30 10:58:10 --- Logic loop 79.32 seconds ---
Logic only list: 13.01
Test time only selecting coin:13.13
Logic selecting coin (plus potential list): 26.15
Logic only logic positions: 26.15
Test time only selecting coin:13.47
Logic selecting coin (plus potential list): 39.62
Logic only logic positions: 39.62
Test time only selecting coin:13.3
Logic selecting coin (plus potential list): 52.92
Logic only logic positions: 52.92
Test time only selecting coin:13.13
Logic selecting coin (plus potential list): 66.04
Logic only logic positions: 66.04
Test time only selecting coin:12.99
Logic selecting coin (plus potential list): 79.03
Logic only logic positions: 79.03
2022-04-30 10:59:25 --- Logic loop 79.03 seconds ---
Logic only list: 13.13
Test time only selecting coin:13.15
Logic selecting coin (plus potential list): 26.28
Logic only logic positions: 26.28
Test time only selecting coin:13.14
Logic selecting coin (plus potential list): 39.43
Logic only logic positions: 39.43
Test time only selecting coin:13.39
Logic selecting coin (plus potential list): 52.82
Logic only logic positions: 52.82
Test time only selecting coin:13.06
Logic selecting coin (plus potential list): 65.87
Logic only logic positions: 65.87
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 78.91
Logic only logic positions: 78.91
2022-04-30 11:00:45 --- Logic loop 78.91 seconds ---
Logic only list: 13.07
Test time only selecting coin:13.22
Logic selecting coin (plus potential list): 26.29
Logic only logic positions: 26.29
Test time only selecting coin:13.23
Logic selecting coin (plus potential list): 39.53
Logic only logic positions: 39.53
Test time only selecting coin:13.1
Logic selecting coin (plus potential list): 52.63
Logic only logic positions: 52.63
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 65.7
Logic only logic positions: 65.7
Test time only selecting coin:13.25
Logic selecting coin (plus potential list): 78.95
Logic only logic positions: 78.95
2022-04-30 11:02:05 --- Logic loop 78.95 seconds ---
Logic only list: 13.08
Test time only selecting coin:13.28
Logic selecting coin (plus potential list): 26.36
Logic only logic positions: 26.36
Test time only selecting coin:13.27
Logic selecting coin (plus potential list): 39.63
Logic only logic positions: 39.63
Test time only selecting coin:13.05
Logic selecting coin (plus potential list): 52.68
Logic only logic positions: 52.68
Test time only selecting coin:13.12
Logic selecting coin (plus potential list): 65.8
Logic only logic positions: 65.8
Test time only selecting coin:13.22
Logic selecting coin (plus potential list): 79.02
Logic only logic positions: 79.02
2022-04-30 11:03:25 --- Logic loop 79.02 seconds ---
Logic only list: 13.14
Test time only selecting coin:12.91
Logic selecting coin (plus potential list): 26.05
Logic only logic positions: 26.05
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 39.13
Logic only logic positions: 39.13
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 52.13
Logic only logic positions: 52.13
Test time only selecting coin:12.92
Logic selecting coin (plus potential list): 65.05
Logic only logic positions: 65.05
Test time only selecting coin:13.02
Logic selecting coin (plus potential list): 78.07
Logic only logic positions: 78.07
2022-04-30 11:04:40 --- Logic loop 78.07 seconds ---
Logic only list: 12.99
Test time only selecting coin:13.27
Logic selecting coin (plus potential list): 26.26
Logic only logic positions: 26.26
Test time only selecting coin:13.19
Logic selecting coin (plus potential list): 39.45
Logic only logic positions: 39.45
Test time only selecting coin:13.19
Logic selecting coin (plus potential list): 52.64
Logic only logic positions: 52.64
Test time only selecting coin:13.06
Logic selecting coin (plus potential list): 65.7
Logic only logic positions: 65.7
Test time only selecting coin:12.94
Logic selecting coin (plus potential list): 78.64
Logic only logic positions: 78.65
2022-04-30 11:06:00 --- Logic loop 78.65 seconds ---
Logic only list: 13.08
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 26.16
Logic only logic positions: 26.16
Test time only selecting coin:12.95
Logic selecting coin (plus potential list): 39.11
Logic only logic positions: 39.11
Test time only selecting coin:13.49
Logic selecting coin (plus potential list): 52.6
Logic only logic positions: 52.6
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 65.68
Logic only logic positions: 65.68
Test time only selecting coin:13.06
Logic selecting coin (plus potential list): 78.75
Logic only logic positions: 78.75
2022-04-30 11:07:20 --- Logic loop 78.75 seconds ---
Logic only list: 13.59
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 26.59
Logic only logic positions: 26.59
Test time only selecting coin:13.23
Logic selecting coin (plus potential list): 39.81
Logic only logic positions: 39.81
Test time only selecting coin:13.35
Logic selecting coin (plus potential list): 53.17
Logic only logic positions: 53.17
Test time only selecting coin:13.18
Logic selecting coin (plus potential list): 66.34
Logic only logic positions: 66.34
Test time only selecting coin:13.15
Logic selecting coin (plus potential list): 79.49
Logic only logic positions: 79.49
2022-04-30 11:08:40 --- Logic loop 79.49 seconds ---
Logic only list: 13.27
Test time only selecting coin:13.32
Logic selecting coin (plus potential list): 26.59
Logic only logic positions: 26.59
Test time only selecting coin:13.19
Logic selecting coin (plus potential list): 39.79
Logic only logic positions: 39.79
Test time only selecting coin:13.01
Logic selecting coin (plus potential list): 52.79
2022-04-30 11:09:30 NEAR Closing Drift short: All, closing Binance long: 74.0
                 timestamp binance_pair  drift_pair    bina_price   drift_price  gap_perc   gap_abs  fast_avg_gap  top_avg_gaps  bottom_avg_gaps  gap_range  open_l_drift  open_s_drift  open_somewhere  close_l_drift  close_s_drift
symbol                                                                                                                                                                                                                               
BNB    2022-04-30 11:09:20      BNBUSDT           5    397.200000    397.285605 -0.021552  0.021552     -0.022616      0.091633        -0.166788   0.258421         False         False           False          False          False
LUNA   2022-04-30 11:09:20     LUNAUSDT           3     84.247000     84.209760  0.044203  0.044203      0.006222      0.085514        -0.159420   0.244934         False         False           False          False          False
GMT    2022-04-30 11:09:20      GMTUSDT          18      3.838415      3.835137  0.085403  0.085403      0.085581      0.143198        -0.148378   0.291576         False         False           False          False          False
BTC    2022-04-30 11:09:20      BTCUSDT           1  38587.000000  38620.660939 -0.087234  0.087234     -0.090247     -0.010780        -0.185647   0.174867         False         False           False          False          False
LTC    2022-04-30 11:09:20      LTCUSDT          12    100.548121    100.459894  0.087746  0.087746      0.066500      0.042003        -0.185412   0.227415         False         False           False          False           True
FTT    2022-04-30 11:09:20      FTTUSDT          11     38.938104     38.973515 -0.090941  0.090941     -0.097623     -0.068403        -0.332746   0.264343         False         False           False          False          False
ETH    2022-04-30 11:09:20      ETHUSDT           2   2831.590000   2834.184131 -0.091614  0.091614     -0.091614      0.057067        -0.208325   0.265391         False         False           False          False          False
SOL    2022-04-30 11:09:20      SOLUSDT           0     94.010000     94.101380 -0.097202  0.097202     -0.107499     -0.054639        -0.293210   0.238571         False         False           False          False          False
XRP    2022-04-30 11:09:20      XRPUSDT          13      0.621000      0.621614 -0.098773  0.098773     -0.110491     -0.118699        -0.358030   0.239330         False         False           False          False          False
ADA    2022-04-30 11:09:20      ADAUSDT           9      0.806436      0.807507 -0.132715  0.132715     -0.145050     -0.052922        -0.334162   0.281240         False         False           False          False          False
NEAR   2022-04-30 11:09:20     NEARUSDT          16     11.535000     11.515810  0.166361  0.166361      0.033865     -0.050987        -0.372920   0.321932         False         False           False          False           True
DOT    2022-04-30 11:09:20      DOTUSDT           8     16.072001     16.104395 -0.201557  0.201557     -0.253136     -0.202877        -0.465601   0.262724         False         False           False          False          False
AVAX   2022-04-30 11:09:20     AVAXUSDT           4     62.912032     63.057536 -0.231280  0.231280     -0.243435     -0.209082        -0.471257   0.262175         False         False           False          False          False
DOGE   2022-04-30 11:09:20     DOGEUSDT          15      0.135212      0.135541 -0.243431  0.243431     -0.273992     -0.310063        -0.561173   0.251110         False         False           False          False          False
CRV    2022-04-30 11:09:20      CRVUSDT          19      2.228000      2.234996 -0.314008  0.314008     -0.280238     -0.275193        -0.657008   0.381815         False         False           False          False          False
MATIC  2022-04-30 11:09:20    MATICUSDT           6      1.146000      1.149689 -0.321901  0.321901     -0.300498     -0.238729        -0.582988   0.344259         False         False           False          False          False
ALGO   2022-04-30 11:09:20     ALGOUSDT          10      0.635100      0.637388 -0.360308  0.360308     -0.374373     -0.281666        -0.564235   0.282569         False         False           False          False          False
ATOM   2022-04-30 11:09:20     ATOMUSDT           7     19.023000     19.098983 -0.399429  0.399429     -0.395718     -0.338320        -0.634784   0.296464         False         False           False          False          False
APE    2022-04-30 11:09:20      APEUSDT          14     22.520824     22.423818  0.430740  0.430740      0.521426      0.762254         0.107388   0.654866         False         False           False          False          False
SRM    2022-04-30 11:09:20      SRMUSDT          17      1.968467      1.978737 -0.521726  0.521726     -0.521883     -0.444742        -0.795756   0.351014         False         False           False          False          False
Try number: 1
Error on closing positions: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

Err: cannot convert float NaN to integer
Err type: <class 'ValueError'>
Err cause: None
Err cause type: <class 'NoneType'>
Err context: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Err context type: <class 'solana.rpc.core.RPCException'>
Error on logic: cannot convert float NaN to integer
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 526, in run_constant_parallel_logic
    imbalance_status, positions_dataframe = await self.imbalance_checker(fresh_data, coin_symbol, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 250, in imbalance_checker
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

Logic only list: 13.3
Test time only selecting coin:13.23
Logic selecting coin (plus potential list): 26.53
Logic only logic positions: 26.53
Test time only selecting coin:13.17
Logic selecting coin (plus potential list): 39.7
Logic only logic positions: 39.7
Test time only selecting coin:12.98
Logic selecting coin (plus potential list): 52.68
Logic only logic positions: 52.68
Test time only selecting coin:13.12
Logic selecting coin (plus potential list): 65.8
Logic only logic positions: 65.8
Test time only selecting coin:13.21
Logic selecting coin (plus potential list): 79.01
Logic only logic positions: 79.01
2022-04-30 11:11:05 --- Logic loop 79.01 seconds ---
Logic only list: 13.02
Test time only selecting coin:12.96
Logic selecting coin (plus potential list): 25.97
Logic only logic positions: 25.97
Test time only selecting coin:13.05
Logic selecting coin (plus potential list): 39.02
Logic only logic positions: 39.02
Test time only selecting coin:13.14
Logic selecting coin (plus potential list): 52.17
Logic only logic positions: 52.17
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 65.16
Logic only logic positions: 65.16
Test time only selecting coin:13.11
Logic selecting coin (plus potential list): 78.27
Logic only logic positions: 78.27
2022-04-30 11:12:25 --- Logic loop 78.27 seconds ---
Logic only list: 13.23
Test time only selecting coin:13.49
Logic selecting coin (plus potential list): 26.72
Logic only logic positions: 26.73
Test time only selecting coin:13.58
Logic selecting coin (plus potential list): 40.3
Logic only logic positions: 40.3
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 53.38
Logic only logic positions: 53.38
Test time only selecting coin:13.1
Logic selecting coin (plus potential list): 66.48
Logic only logic positions: 66.48
Test time only selecting coin:13.11
Logic selecting coin (plus potential list): 79.59
Logic only logic positions: 79.59
2022-04-30 11:13:45 --- Logic loop 79.59 seconds ---
Logic only list: 13.06
Test time only selecting coin:13.11
Logic selecting coin (plus potential list): 26.18
Logic only logic positions: 26.18
Test time only selecting coin:12.99
Logic selecting coin (plus potential list): 39.17
Logic only logic positions: 39.17
Test time only selecting coin:13.2
Logic selecting coin (plus potential list): 52.37
Logic only logic positions: 52.37
Test time only selecting coin:13.3
Logic selecting coin (plus potential list): 65.67
Logic only logic positions: 65.67
Test time only selecting coin:13.25
Logic selecting coin (plus potential list): 78.92
Logic only logic positions: 78.92
2022-04-30 11:15:05 --- Logic loop 78.92 seconds ---
Logic only list: 12.97
Test time only selecting coin:13.12
Logic selecting coin (plus potential list): 26.09
Logic only logic positions: 26.09
Test time only selecting coin:13.03
Logic selecting coin (plus potential list): 39.12
Logic only logic positions: 39.12
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 52.2
Logic only logic positions: 52.2
Test time only selecting coin:12.98
Logic selecting coin (plus potential list): 65.18
Logic only logic positions: 65.18
Test time only selecting coin:13.22
Logic selecting coin (plus potential list): 78.4
Logic only logic positions: 78.4
2022-04-30 11:16:20 --- Logic loop 78.4 seconds ---
Logic only list: 13.13
Test time only selecting coin:13.11
Logic selecting coin (plus potential list): 26.23
Logic only logic positions: 26.23
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 39.27
Logic only logic positions: 39.27
Test time only selecting coin:13.09
Logic selecting coin (plus potential list): 52.36
Logic only logic positions: 52.36
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 65.44
Logic only logic positions: 65.44
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 78.48
Logic only logic positions: 78.48
2022-04-30 11:17:40 --- Logic loop 78.48 seconds ---
Logic only list: 13.34
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 26.42
Logic only logic positions: 26.42
Test time only selecting coin:13.18
Logic selecting coin (plus potential list): 39.6
Logic only logic positions: 39.6
Test time only selecting coin:13.16
Logic selecting coin (plus potential list): 52.76
Logic only logic positions: 52.76
Test time only selecting coin:13.16
Logic selecting coin (plus potential list): 65.92
Logic only logic positions: 65.92
Test time only selecting coin:13.34
Logic selecting coin (plus potential list): 79.25
Logic only logic positions: 79.25
2022-04-30 11:19:00 --- Logic loop 79.25 seconds ---
Logic only list: 13.15
Test time only selecting coin:13.55
Logic selecting coin (plus potential list): 26.69
Logic only logic positions: 26.69
Test time only selecting coin:13.34
Logic selecting coin (plus potential list): 40.03
Logic only logic positions: 40.03
Test time only selecting coin:13.29
Logic selecting coin (plus potential list): 53.32
Logic only logic positions: 53.32
Test time only selecting coin:13.35
Logic selecting coin (plus potential list): 66.68
Logic only logic positions: 66.68
Test time only selecting coin:13.17
Logic selecting coin (plus potential list): 79.85
Logic only logic positions: 79.85
2022-04-30 11:20:20 --- Logic loop 79.85 seconds ---
Logic only list: 13.05
Test time only selecting coin:12.98
Logic selecting coin (plus potential list): 26.04
Logic only logic positions: 26.04
Test time only selecting coin:12.98
Logic selecting coin (plus potential list): 39.02
Logic only logic positions: 39.02
Test time only selecting coin:13.15
Logic selecting coin (plus potential list): 52.17
Logic only logic positions: 52.17
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 65.25
Logic only logic positions: 65.25
Test time only selecting coin:13.26
Logic selecting coin (plus potential list): 78.52
Logic only logic positions: 78.52
2022-04-30 11:21:40 --- Logic loop 78.52 seconds ---
Logic only list: 13.17
Test time only selecting coin:13.17
Logic selecting coin (plus potential list): 26.33
Logic only logic positions: 26.33
Test time only selecting coin:13.21
Logic selecting coin (plus potential list): 39.54
Logic only logic positions: 39.54
Test time only selecting coin:13.32
Logic selecting coin (plus potential list): 52.86
Logic only logic positions: 52.86
Test time only selecting coin:13.18
Logic selecting coin (plus potential list): 66.04
Logic only logic positions: 66.04
Test time only selecting coin:13.46
Logic selecting coin (plus potential list): 79.5
Logic only logic positions: 79.5
2022-04-30 11:23:00 --- Logic loop 79.5 seconds ---
Logic only list: 13.36
Test time only selecting coin:13.26
Logic selecting coin (plus potential list): 26.62
Logic only logic positions: 26.62
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 39.66
Logic only logic positions: 39.66
Test time only selecting coin:13.19
Logic selecting coin (plus potential list): 52.84
Logic only logic positions: 52.84
Test time only selecting coin:13.19
Logic selecting coin (plus potential list): 66.03
Logic only logic positions: 66.03
Test time only selecting coin:13.11
Logic selecting coin (plus potential list): 79.14
Logic only logic positions: 79.14
2022-04-30 11:24:15 --- Logic loop 79.14 seconds ---
Logic only list: 13.87
Test time only selecting coin:13.24
Logic selecting coin (plus potential list): 27.1
Logic only logic positions: 27.1
Test time only selecting coin:13.02
Logic selecting coin (plus potential list): 40.12
Logic only logic positions: 40.12
Test time only selecting coin:13.16
Logic selecting coin (plus potential list): 53.28
2022-04-30 11:25:10 NEAR Closing Drift short: All, closing Binance long: 74.0
                 timestamp binance_pair  drift_pair    bina_price   drift_price  gap_perc   gap_abs  fast_avg_gap  top_avg_gaps  bottom_avg_gaps  gap_range  open_l_drift  open_s_drift  open_somewhere  close_l_drift  close_s_drift
symbol                                                                                                                                                                                                                               
BNB    2022-04-30 11:24:55      BNBUSDT           5    397.122197    397.139254 -0.004295  0.004295     -0.004639      0.091451        -0.158190   0.249641         False         False           False          False          False
LTC    2022-04-30 11:24:55      LTCUSDT          12    100.520185    100.501019  0.019068  0.019068      0.007542      0.042003        -0.171374   0.213377         False         False           False          False          False
ETH    2022-04-30 11:24:55      ETHUSDT           2   2830.400000   2831.591015 -0.042079  0.042079     -0.042433      0.032944        -0.208348   0.241291         False         False           False          False          False
LUNA   2022-04-30 11:24:55     LUNAUSDT           3     84.362420     84.317465  0.053288  0.053288      0.036201      0.086077        -0.153802   0.239879         False         False           False          False          False
BTC    2022-04-30 11:24:55      BTCUSDT           1  38599.200000  38620.660939 -0.055599  0.055599     -0.057181     -0.010780        -0.178730   0.167950         False         False           False          False          False
XRP    2022-04-30 11:24:55      XRPUSDT          13      0.622000      0.622417 -0.067051  0.067051     -0.065809     -0.099818        -0.338956   0.239138         False         False           False          False          False
SOL    2022-04-30 11:24:55      SOLUSDT           0     94.002456     94.089901 -0.093024  0.093024     -0.089008     -0.062088        -0.281318   0.219230         False         False           False          False          False
NEAR   2022-04-30 11:24:55     NEARUSDT          16     11.588805     11.575437  0.115348  0.115348      0.098837     -0.008092        -0.360271   0.352179         False         False           False          False           True
ADA    2022-04-30 11:24:55      ADAUSDT           9      0.807191      0.808497 -0.161832  0.161832     -0.170956     -0.070523        -0.334634   0.264111         False         False           False          False          False
AVAX   2022-04-30 11:24:55     AVAXUSDT           4     62.965702     63.086002 -0.191056  0.191056     -0.198961     -0.202932        -0.466595   0.263662         False         False           False          False          False
FTT    2022-04-30 11:24:55      FTTUSDT          11     38.897000     38.973515 -0.196711  0.196711     -0.216921     -0.067991        -0.325479   0.257489         False         False           False          False          False
CRV    2022-04-30 11:24:55      CRVUSDT          19      2.231000      2.235494 -0.201452  0.201452     -0.201452     -0.272115        -0.654193   0.382078         False         False           False          False          False
GMT    2022-04-30 11:24:55      GMTUSDT          18      3.870100      3.861753  0.215668  0.215668      0.089900      0.147177        -0.125265   0.272442         False         False           False          False           True
DOT    2022-04-30 11:24:55      DOTUSDT           8     16.108000     16.145963 -0.235680  0.235680     -0.226961     -0.211014        -0.460184   0.249170         False         False           False          False          False
DOGE   2022-04-30 11:24:55     DOGEUSDT          15      0.135130      0.135494 -0.269429  0.269429     -0.296056     -0.299570        -0.528166   0.228596         False         False           False          False          False
APE    2022-04-30 11:24:55      APEUSDT          14     22.618000     22.542145  0.335375  0.335375      0.317995      0.724348         0.112899   0.611449         False         False           False          False          False
MATIC  2022-04-30 11:24:55    MATICUSDT           6      1.143800      1.148325 -0.395610  0.395610     -0.416389     -0.264019        -0.589085   0.325066         False         False           False          False          False
ATOM   2022-04-30 11:24:55     ATOMUSDT           7     19.069203     19.145483 -0.400014  0.400014     -0.390555     -0.342430        -0.623879   0.281449         False         False           False          False          False
ALGO   2022-04-30 11:24:55     ALGOUSDT          10      0.635300      0.638026 -0.429165  0.429165     -0.331848     -0.288861        -0.557820   0.268959         False         False           False          False          False
SRM    2022-04-30 11:24:55      SRMUSDT          17      1.966995      1.979062 -0.613455  0.613455     -0.639406     -0.465541        -0.795756   0.330216         False         False           False          False          False
Try number: 1
Error on closing positions: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

Err: cannot convert float NaN to integer
Err type: <class 'ValueError'>
Err cause: None
Err cause type: <class 'NoneType'>
Err context: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Err context type: <class 'solana.rpc.core.RPCException'>
Error on logic: cannot convert float NaN to integer
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 526, in run_constant_parallel_logic
    imbalance_status, positions_dataframe = await self.imbalance_checker(fresh_data, coin_symbol, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 250, in imbalance_checker
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

Logic only list: 13.03
Test time only selecting coin:12.9
Logic selecting coin (plus potential list): 25.94
Logic only logic positions: 25.94
Test time only selecting coin:13.03
Logic selecting coin (plus potential list): 38.97
Logic only logic positions: 38.97
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 51.97
Logic only logic positions: 51.97
Test time only selecting coin:13.53
Logic selecting coin (plus potential list): 65.5
Logic only logic positions: 65.5
Test time only selecting coin:13.35
Logic selecting coin (plus potential list): 78.86
Logic only logic positions: 78.86
2022-04-30 11:26:45 --- Logic loop 78.86 seconds ---
Logic only list: 13.52
Test time only selecting coin:13.11
Logic selecting coin (plus potential list): 26.63
Logic only logic positions: 26.63
Test time only selecting coin:13.13
Logic selecting coin (plus potential list): 39.76
Logic only logic positions: 39.76
Test time only selecting coin:12.98
Logic selecting coin (plus potential list): 52.74
2022-04-30 11:27:40 NEAR Closing Drift short: All, closing Binance long: 74.0
                 timestamp binance_pair  drift_pair    bina_price   drift_price  gap_perc   gap_abs  fast_avg_gap  top_avg_gaps  bottom_avg_gaps  gap_range  open_l_drift  open_s_drift  open_somewhere  close_l_drift  close_s_drift
symbol                                                                                                                                                                                                                               
LUNA   2022-04-30 11:27:25     LUNAUSDT           3     84.304757     84.317465 -0.015073  0.015073     -0.012168      0.086336        -0.153255   0.239590         False         False           False          False          False
LTC    2022-04-30 11:27:25      LTCUSDT          12    100.466565    100.501019 -0.034293  0.034293     -0.045220      0.042003        -0.170522   0.212525         False         False           False          False          False
GMT    2022-04-30 11:27:25      GMTUSDT          18      3.872129      3.870411  0.044370  0.044370      0.034126      0.147287        -0.123504   0.270791         False         False           False          False          False
BNB    2022-04-30 11:27:25      BNBUSDT           5    396.912554    397.139254 -0.057116  0.057116     -0.057760      0.091451        -0.157457   0.248908         False         False           False          False          False
NEAR   2022-04-30 11:27:25     NEARUSDT          16     11.629341     11.617193  0.104457  0.104457      0.070492      0.003310        -0.357106   0.360416         False         False           False          False           True
ETH    2022-04-30 11:27:25      ETHUSDT           2   2828.605313   2831.591015 -0.105554  0.105554     -0.102099      0.032944        -0.208348   0.241291         False         False           False          False          False
BTC    2022-04-30 11:27:25      BTCUSDT           1  38578.000000  38620.660939 -0.110584  0.110584     -0.095382     -0.010780        -0.177974   0.167194         False         False           False          False          False
XRP    2022-04-30 11:27:25      XRPUSDT          13      0.621700      0.622508 -0.129985  0.129985     -0.129985     -0.099470        -0.336856   0.237387         False         False           False          False          False
SOL    2022-04-30 11:27:25      SOLUSDT           0     93.909954     94.089901 -0.191617  0.191617     -0.144600     -0.062088        -0.279236   0.217148         False         False           False          False          False
FTT    2022-04-30 11:27:25      FTTUSDT          11     38.875395     38.973515 -0.252397  0.252397     -0.245723     -0.067991        -0.314132   0.246141         False         False           False          False          False
AVAX   2022-04-30 11:27:25     AVAXUSDT           4     62.930000     63.090224 -0.254607  0.254607     -0.249410     -0.200990        -0.466413   0.265423         False         False           False          False          False
ADA    2022-04-30 11:27:25      ADAUSDT           9      0.806300      0.808497 -0.272480  0.272480     -0.255160     -0.070523        -0.334365   0.263842         False         False           False          False          False
DOT    2022-04-30 11:27:25      DOTUSDT           8     16.098945     16.145963 -0.292060  0.292060     -0.299693     -0.211014        -0.459615   0.248601         False         False           False          False          False
ALGO   2022-04-30 11:27:25     ALGOUSDT          10      0.634670      0.636960 -0.360719  0.360719     -0.308590     -0.288861        -0.554050   0.265188         False         False           False          False          False
DOGE   2022-04-30 11:27:25     DOGEUSDT          15      0.134991      0.135494 -0.372349  0.372349     -0.358848     -0.298504        -0.523521   0.225017         False         False           False          False          False
CRV    2022-04-30 11:27:25      CRVUSDT          19      2.228672      2.237444 -0.393630  0.393630     -0.355732     -0.269119        -0.650928   0.381809         False         False           False          False          False
APE    2022-04-30 11:27:25      APEUSDT          14     22.737000     22.626710  0.485070  0.485070      0.440594      0.719336         0.113231   0.606105         False         False           False          False          False
MATIC  2022-04-30 11:27:25    MATICUSDT           6      1.142356      1.148325 -0.522519  0.522519     -0.509283     -0.264019        -0.589085   0.325066         False         False           False          False          False
ATOM   2022-04-30 11:27:25     ATOMUSDT           7     19.029000     19.145483 -0.612133  0.612133     -0.549742     -0.342430        -0.623315   0.280885         False         False           False          False          False
SRM    2022-04-30 11:27:25      SRMUSDT          17      1.965456      1.979062 -0.692252  0.692252     -0.637406     -0.465541        -0.791374   0.325833         False         False           False          False          False
Try number: 1
Error on closing positions: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

Err: cannot convert float NaN to integer
Err type: <class 'ValueError'>
Err cause: None
Err cause type: <class 'NoneType'>
Err context: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Err context type: <class 'solana.rpc.core.RPCException'>
Error on logic: cannot convert float NaN to integer
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 526, in run_constant_parallel_logic
    imbalance_status, positions_dataframe = await self.imbalance_checker(fresh_data, coin_symbol, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 250, in imbalance_checker
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

Logic only list: 13.09
Test time only selecting coin:13.3
Logic selecting coin (plus potential list): 26.39
Logic only logic positions: 26.39
Test time only selecting coin:13.25
Logic selecting coin (plus potential list): 39.64
Logic only logic positions: 39.64
Test time only selecting coin:13.03
Logic selecting coin (plus potential list): 52.68
Logic only logic positions: 52.68
Test time only selecting coin:13.34
Logic selecting coin (plus potential list): 66.01
Logic only logic positions: 66.01
Test time only selecting coin:13.26
Logic selecting coin (plus potential list): 79.28
Logic only logic positions: 79.28
2022-04-30 11:29:15 --- Logic loop 79.28 seconds ---
Logic only list: 13.27
Test time only selecting coin:13.09
Logic selecting coin (plus potential list): 26.36
Logic only logic positions: 26.36
Test time only selecting coin:13.16
Logic selecting coin (plus potential list): 39.52
Logic only logic positions: 39.52
Test time only selecting coin:13.32
Logic selecting coin (plus potential list): 52.84
Logic only logic positions: 52.84
Test time only selecting coin:12.99
Logic selecting coin (plus potential list): 65.83
Logic only logic positions: 65.83
Test time only selecting coin:13.09
Logic selecting coin (plus potential list): 78.92
Logic only logic positions: 78.92
2022-04-30 11:30:35 --- Logic loop 78.92 seconds ---
Logic only list: 13.44
Test time only selecting coin:12.97
Logic selecting coin (plus potential list): 26.42
Logic only logic positions: 26.42
Test time only selecting coin:13.24
Logic selecting coin (plus potential list): 39.66
Logic only logic positions: 39.66
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 52.66
Logic only logic positions: 52.66
Test time only selecting coin:13.23
Logic selecting coin (plus potential list): 65.89
Logic only logic positions: 65.89
Test time only selecting coin:13.2
Logic selecting coin (plus potential list): 79.09
Logic only logic positions: 79.09
2022-04-30 11:31:55 --- Logic loop 79.09 seconds ---
Logic only list: 13.12
Test time only selecting coin:13.39
Logic selecting coin (plus potential list): 26.52
Logic only logic positions: 26.52
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 39.56
Logic only logic positions: 39.56
Test time only selecting coin:13.2
Logic selecting coin (plus potential list): 52.76
Logic only logic positions: 52.76
Test time only selecting coin:13.23
Logic selecting coin (plus potential list): 65.98
Logic only logic positions: 65.98
Test time only selecting coin:13.16
Logic selecting coin (plus potential list): 79.15
Logic only logic positions: 79.15
2022-04-30 11:33:15 --- Logic loop 79.15 seconds ---
Logic only list: 13.09
Test time only selecting coin:13.13
Logic selecting coin (plus potential list): 26.22
Logic only logic positions: 26.22
Test time only selecting coin:13.28
Logic selecting coin (plus potential list): 39.5
Logic only logic positions: 39.5
Test time only selecting coin:13.13
Logic selecting coin (plus potential list): 52.63
Logic only logic positions: 52.63
Test time only selecting coin:12.96
Logic selecting coin (plus potential list): 65.59
Logic only logic positions: 65.59
Test time only selecting coin:13.01
Logic selecting coin (plus potential list): 78.6
Logic only logic positions: 78.6
2022-04-30 11:34:30 --- Logic loop 78.6 seconds ---
Logic only list: 13.03
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 26.03
Logic only logic positions: 26.03
Test time only selecting coin:12.99
Logic selecting coin (plus potential list): 39.03
Logic only logic positions: 39.03
Test time only selecting coin:13.1
Logic selecting coin (plus potential list): 52.13
Logic only logic positions: 52.13
Test time only selecting coin:13.05
Logic selecting coin (plus potential list): 65.18
Logic only logic positions: 65.18
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 78.19
Logic only logic positions: 78.19
2022-04-30 11:35:50 --- Logic loop 78.19 seconds ---
Logic only list: 12.92
Test time only selecting coin:13.1
Logic selecting coin (plus potential list): 26.02
Logic only logic positions: 26.02
Test time only selecting coin:13.15
Logic selecting coin (plus potential list): 39.17
Logic only logic positions: 39.17
Test time only selecting coin:13.52
Logic selecting coin (plus potential list): 52.69
Logic only logic positions: 52.69
Test time only selecting coin:13.05
Logic selecting coin (plus potential list): 65.74
Logic only logic positions: 65.74
Test time only selecting coin:13.16
Logic selecting coin (plus potential list): 78.9
Logic only logic positions: 78.9
2022-04-30 11:37:10 --- Logic loop 78.9 seconds ---
Logic only list: 13.15
Test time only selecting coin:13.22
Logic selecting coin (plus potential list): 26.37
Logic only logic positions: 26.37
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 39.4
Logic only logic positions: 39.4
Test time only selecting coin:13.02
Logic selecting coin (plus potential list): 52.43
Logic only logic positions: 52.43
Test time only selecting coin:12.9
Logic selecting coin (plus potential list): 65.33
Logic only logic positions: 65.33
Test time only selecting coin:12.97
Logic selecting coin (plus potential list): 78.3
Logic only logic positions: 78.3
2022-04-30 11:38:25 --- Logic loop 78.3 seconds ---
Logic only list: 13.01
Test time only selecting coin:12.94
Logic selecting coin (plus potential list): 25.95
Logic only logic positions: 25.95
Test time only selecting coin:13.24
Logic selecting coin (plus potential list): 39.18
Logic only logic positions: 39.18
Test time only selecting coin:13.05
Logic selecting coin (plus potential list): 52.24
Logic only logic positions: 52.24
Test time only selecting coin:13.19
Logic selecting coin (plus potential list): 65.42
Logic only logic positions: 65.42
Test time only selecting coin:13.09
Logic selecting coin (plus potential list): 78.51
Logic only logic positions: 78.51
2022-04-30 11:39:45 --- Logic loop 78.51 seconds ---
Logic only list: 13.16
Test time only selecting coin:13.13
Logic selecting coin (plus potential list): 26.29
Logic only logic positions: 26.29
Test time only selecting coin:13.1
Logic selecting coin (plus potential list): 39.39
Logic only logic positions: 39.39
Test time only selecting coin:13.01
Logic selecting coin (plus potential list): 52.4
Logic only logic positions: 52.4
Test time only selecting coin:13.17
Logic selecting coin (plus potential list): 65.57
Logic only logic positions: 65.57
Test time only selecting coin:12.95
Logic selecting coin (plus potential list): 78.52
Logic only logic positions: 78.52
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 91.56
Logic only logic positions: 91.56
2022-04-30 11:41:15 --- Logic loop 91.56 seconds ---
Logic only list: 13.07
Test time only selecting coin:13.01
Logic selecting coin (plus potential list): 26.07
Logic only logic positions: 26.07
Test time only selecting coin:13.11
Logic selecting coin (plus potential list): 39.18
Logic only logic positions: 39.18
Test time only selecting coin:12.89
Logic selecting coin (plus potential list): 52.07
Logic only logic positions: 52.07
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 65.15
Logic only logic positions: 65.15
Test time only selecting coin:12.96
Logic selecting coin (plus potential list): 78.11
Logic only logic positions: 78.12
2022-04-30 11:42:35 --- Logic loop 78.12 seconds ---
Logic only list: 13.05
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 26.06
Logic only logic positions: 26.06
Test time only selecting coin:12.97
Logic selecting coin (plus potential list): 39.03
Logic only logic positions: 39.03
Test time only selecting coin:13.01
Logic selecting coin (plus potential list): 52.04
Logic only logic positions: 52.04
Test time only selecting coin:12.92
Logic selecting coin (plus potential list): 64.96
Logic only logic positions: 64.96
Test time only selecting coin:13.17
Logic selecting coin (plus potential list): 78.13
Logic only logic positions: 78.13
2022-04-30 11:43:55 --- Logic loop 78.13 seconds ---
Logic only list: 13.07
Test time only selecting coin:13.03
Logic selecting coin (plus potential list): 26.09
Logic only logic positions: 26.09
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 39.09
Logic only logic positions: 39.09
Test time only selecting coin:13.02
Logic selecting coin (plus potential list): 52.11
Logic only logic positions: 52.11
Test time only selecting coin:13.32
Logic selecting coin (plus potential list): 65.43
Logic only logic positions: 65.43
Test time only selecting coin:13.54
Logic selecting coin (plus potential list): 78.97
Logic only logic positions: 78.97
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 92.05
Logic only logic positions: 92.05
2022-04-30 11:45:25 --- Logic loop 92.05 seconds ---
Logic only list: 13.08
Test time only selecting coin:13.2
Logic selecting coin (plus potential list): 26.29
Logic only logic positions: 26.29
Test time only selecting coin:13.17
Logic selecting coin (plus potential list): 39.45
Logic only logic positions: 39.45
Test time only selecting coin:13.03
Logic selecting coin (plus potential list): 52.48
Logic only logic positions: 52.48
Test time only selecting coin:13.12
Logic selecting coin (plus potential list): 65.61
Logic only logic positions: 65.61
Test time only selecting coin:13.21
Logic selecting coin (plus potential list): 78.81
Logic only logic positions: 78.81
Test time only selecting coin:13.4
Logic selecting coin (plus potential list): 92.22
Logic only logic positions: 92.22
2022-04-30 11:47:00 --- Logic loop 92.22 seconds ---
Logic only list: 13.18
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 26.25
Logic only logic positions: 26.25
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 39.34
Logic only logic positions: 39.34
Test time only selecting coin:13.11
Logic selecting coin (plus potential list): 52.45
Logic only logic positions: 52.45
Test time only selecting coin:12.97
Logic selecting coin (plus potential list): 65.42
Logic only logic positions: 65.42
Test time only selecting coin:12.97
Logic selecting coin (plus potential list): 78.39
Logic only logic positions: 78.39
2022-04-30 11:48:15 --- Logic loop 78.39 seconds ---
Logic only list: 13.03
Test time only selecting coin:13.1
Logic selecting coin (plus potential list): 26.13
Logic only logic positions: 26.13
Test time only selecting coin:13.14
Logic selecting coin (plus potential list): 39.27
Logic only logic positions: 39.27
Test time only selecting coin:13.02
Logic selecting coin (plus potential list): 52.29
Logic only logic positions: 52.29
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 65.29
Logic only logic positions: 65.29
Test time only selecting coin:13.11
Logic selecting coin (plus potential list): 78.41
Logic only logic positions: 78.41
2022-04-30 11:49:35 --- Logic loop 78.41 seconds ---
Logic only list: 13.08
Test time only selecting coin:13.12
Logic selecting coin (plus potential list): 26.2
Logic only logic positions: 26.2
Test time only selecting coin:13.12
Logic selecting coin (plus potential list): 39.32
Logic only logic positions: 39.32
Test time only selecting coin:12.98
Logic selecting coin (plus potential list): 52.3
Logic only logic positions: 52.3
Test time only selecting coin:13.01
Logic selecting coin (plus potential list): 65.31
Logic only logic positions: 65.31
Test time only selecting coin:13.22
Logic selecting coin (plus potential list): 78.53
Logic only logic positions: 78.53
2022-04-30 11:50:55 --- Logic loop 78.53 seconds ---
Logic only list: 13.19
Test time only selecting coin:13.34
Logic selecting coin (plus potential list): 26.53
Logic only logic positions: 26.53
Test time only selecting coin:13.16
Logic selecting coin (plus potential list): 39.69
Logic only logic positions: 39.69
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 52.7
Logic only logic positions: 52.7
Test time only selecting coin:13.02
Logic selecting coin (plus potential list): 65.72
Logic only logic positions: 65.72
Test time only selecting coin:13.3
Logic selecting coin (plus potential list): 79.01
Logic only logic positions: 79.01
2022-04-30 11:52:10 --- Logic loop 79.01 seconds ---
Logic only list: 13.07
Test time only selecting coin:12.88
Logic selecting coin (plus potential list): 25.95
Logic only logic positions: 25.95
Test time only selecting coin:13.1
Logic selecting coin (plus potential list): 39.05
Logic only logic positions: 39.05
Test time only selecting coin:12.94
Logic selecting coin (plus potential list): 51.99
Logic only logic positions: 51.99
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 65.06
Logic only logic positions: 65.06
Test time only selecting coin:13.23
Logic selecting coin (plus potential list): 78.29
Logic only logic positions: 78.29
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 91.3
Logic only logic positions: 91.3
2022-04-30 11:53:45 --- Logic loop 91.3 seconds ---
Logic only list: 13.09
Test time only selecting coin:13.02
Logic selecting coin (plus potential list): 26.11
Logic only logic positions: 26.11
Test time only selecting coin:12.94
Logic selecting coin (plus potential list): 39.05
Logic only logic positions: 39.05
Test time only selecting coin:13.11
Logic selecting coin (plus potential list): 52.16
2022-04-30 11:54:35 NEAR Closing Drift short: All, closing Binance long: 74.0
                 timestamp binance_pair  drift_pair    bina_price   drift_price  gap_perc   gap_abs  fast_avg_gap  top_avg_gaps  bottom_avg_gaps  gap_range  open_l_drift  open_s_drift  open_somewhere  close_l_drift  close_s_drift
symbol                                                                                                                                                                                                                               
BNB    2022-04-30 11:54:20      BNBUSDT           5    397.200000    397.139254  0.015294  0.015294      0.010259      0.083184        -0.154078   0.237261         False         False           False          False          False
LTC    2022-04-30 11:54:20      LTCUSDT          12    100.653431    100.601419  0.051674  0.051674      0.042286      0.055067        -0.150492   0.205559         False         False           False          False          False
LUNA   2022-04-30 11:54:20     LUNAUSDT           3     84.112000     84.155739 -0.052001  0.052001     -0.095803      0.083838        -0.149193   0.233031         False         False           False          False          False
ETH    2022-04-30 11:54:20      ETHUSDT           2   2831.290000   2833.258918 -0.069541  0.069541     -0.082797      0.024662        -0.208232   0.232895         False         False           False          False          False
NEAR   2022-04-30 11:54:20     NEARUSDT          16     11.654738     11.641196  0.116192  0.116192      0.088975      0.044705        -0.334992   0.379697         False         False           False          False           True
BTC    2022-04-30 11:54:20      BTCUSDT           1  38572.157743  38620.660939 -0.125747  0.125747     -0.129211     -0.010386        -0.164772   0.154386         False         False           False          False          False
ALGO   2022-04-30 11:54:20     ALGOUSDT          10      0.636900      0.637702 -0.125940  0.125940     -0.394326     -0.274644        -0.537215   0.262571         False         False           False          False          False
SOL    2022-04-30 11:54:20      SOLUSDT           0     93.925120     94.051601 -0.134661  0.134661     -0.145452     -0.053064        -0.263510   0.210446         False         False           False          False          False
GMT    2022-04-30 11:54:20      GMTUSDT          18      3.891095      3.885320  0.148414  0.148414     -0.043982      0.151739        -0.113906   0.265645         False         False           False          False          False
CRV    2022-04-30 11:54:20      CRVUSDT          19      2.230000      2.233813 -0.170970  0.170970     -0.215910     -0.222490        -0.616107   0.393617         False         False           False          False          False
FTT    2022-04-30 11:54:20      FTTUSDT          11     38.906000     38.973515 -0.173533  0.173533     -0.212691     -0.067991        -0.274050   0.206059         False         False           False          False          False
XRP    2022-04-30 11:54:20      XRPUSDT          13      0.620600      0.621765 -0.187795  0.187795     -0.212017     -0.094623        -0.318758   0.224136         False         False           False          False          False
DOT    2022-04-30 11:54:20      DOTUSDT           8     16.097000     16.127310 -0.188294  0.188294     -0.253693     -0.209400        -0.458087   0.248686         False         False           False          False          False
ADA    2022-04-30 11:54:20      ADAUSDT           9      0.805800      0.808372 -0.319162  0.319162     -0.319350     -0.082379        -0.334569   0.252190         False         False           False          False          False
AVAX   2022-04-30 11:54:20     AVAXUSDT           4     62.910179     63.112327 -0.321327  0.321327     -0.333613     -0.206435        -0.450617   0.244183         False         False           False          False          False
ATOM   2022-04-30 11:54:20     ATOMUSDT           7     19.021000     19.087245 -0.348275  0.348275     -0.559019     -0.346072        -0.619505   0.273432         False         False           False          False          False
DOGE   2022-04-30 11:54:20     DOGEUSDT          15      0.134900      0.135486 -0.434069  0.434069     -0.437486     -0.285989        -0.499691   0.213702         False         False           False          False          False
MATIC  2022-04-30 11:54:20    MATICUSDT           6      1.142900      1.147965 -0.443187  0.443187     -0.487149     -0.284198        -0.579691   0.295494         False         False           False          False          False
SRM    2022-04-30 11:54:20      SRMUSDT          17      1.963171      1.972648 -0.482726  0.482726     -0.491489     -0.479241        -0.784191   0.304950         False         False           False          False          False
APE    2022-04-30 11:54:20      APEUSDT          14     22.879479     22.727503  0.664246  0.664246      0.651380      0.670258         0.142265   0.527993         False         False           False          False          False
Try number: 1
Error on closing positions: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

Err: cannot convert float NaN to integer
Err type: <class 'ValueError'>
Err cause: None
Err cause type: <class 'NoneType'>
Err context: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Err context type: <class 'solana.rpc.core.RPCException'>
Error on logic: cannot convert float NaN to integer
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 526, in run_constant_parallel_logic
    imbalance_status, positions_dataframe = await self.imbalance_checker(fresh_data, coin_symbol, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 250, in imbalance_checker
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

Logic only list: 13.08
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 26.08
Logic only logic positions: 26.08
Test time only selecting coin:13.15
Logic selecting coin (plus potential list): 39.23
Logic only logic positions: 39.23
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 52.27
2022-04-30 11:55:45 NEAR Closing Drift short: All, closing Binance long: 74.0
                 timestamp binance_pair  drift_pair    bina_price   drift_price  gap_perc   gap_abs  fast_avg_gap  top_avg_gaps  bottom_avg_gaps  gap_range  open_l_drift  open_s_drift  open_somewhere  close_l_drift  close_s_drift
symbol                                                                                                                                                                                                                               
ETH    2022-04-30 11:55:30      ETHUSDT           2   2832.920000   2833.258918 -0.011964  0.011964     -0.069541      0.024099        -0.208232   0.232332         False         False           False          False          False
LUNA   2022-04-30 11:55:30     LUNAUSDT           3     84.136000     84.155739 -0.023461  0.023461     -0.054380      0.080699        -0.149193   0.229892         False         False           False          False          False
BNB    2022-04-30 11:55:30      BNBUSDT           5    397.250000    397.139254  0.027878  0.027878      0.014035      0.083184        -0.154078   0.237261         False         False           False          False          False
SOL    2022-04-30 11:55:30      SOLUSDT           0     93.990000     94.051601 -0.065540  0.065540     -0.125891     -0.053290        -0.263510   0.210220         False         False           False          False          False
NEAR   2022-04-30 11:55:30     NEARUSDT          16     11.649475     11.641690  0.066827  0.066827      0.000409      0.047462        -0.334992   0.382453         False         False           False          False           True
BTC    2022-04-30 11:55:30      BTCUSDT           1  38587.800000  38620.660939 -0.085159  0.085159     -0.120316     -0.010603        -0.164772   0.154169         False         False           False          False          False
LTC    2022-04-30 11:55:30      LTCUSDT          12    100.745580    100.601419  0.143094  0.143094      0.052579      0.055741        -0.150492   0.206233         False         False           False          False           True
DOT    2022-04-30 11:55:30      DOTUSDT           8     16.110000     16.133311 -0.144699  0.144699     -0.181110     -0.207857        -0.458087   0.250230         False         False           False          False          False
FTT    2022-04-30 11:55:30      FTTUSDT          11     38.907000     38.973515 -0.170959  0.170959     -0.172246     -0.067991        -0.274050   0.206059         False         False           False          False          False
XRP    2022-04-30 11:55:30      XRPUSDT          13      0.620700      0.621765 -0.171654  0.171654     -0.187795     -0.095005        -0.318758   0.223753         False         False           False          False          False
GMT    2022-04-30 11:55:30      GMTUSDT          18      3.918117      3.911269  0.174790  0.174790      0.111437      0.152201        -0.113169   0.265370         False         False           False          False           True
CRV    2022-04-30 11:55:30      CRVUSDT          19      2.231000      2.234945 -0.176828  0.176828     -0.173096     -0.219815        -0.616107   0.396292         False         False           False          False          False
AVAX   2022-04-30 11:55:30     AVAXUSDT           4     62.950000     63.112327 -0.257866  0.257866     -0.311362     -0.207899        -0.450617   0.242718         False         False           False          False          False
ATOM   2022-04-30 11:55:30     ATOMUSDT           7     19.040000     19.097594 -0.302489  0.302489     -0.335088     -0.345335        -0.619505   0.274170         False         False           False          False          False
ADA    2022-04-30 11:55:30      ADAUSDT           9      0.805845      0.808372 -0.313575  0.313575     -0.319162     -0.085726        -0.334634   0.248908         False         False           False          False          False
MATIC  2022-04-30 11:55:30    MATICUSDT           6      1.144200      1.147965 -0.329067  0.329067     -0.414854     -0.289644        -0.579691   0.290047         False         False           False          False          False
DOGE   2022-04-30 11:55:30     DOGEUSDT          15      0.134929      0.135486 -0.412222  0.412222     -0.419824     -0.286834        -0.499691   0.212857         False         False           False          False          False
ALGO   2022-04-30 11:55:30     ALGOUSDT          10      0.636000      0.638689 -0.422749  0.422749     -0.430143     -0.275921        -0.537215   0.261294         False         False           False          False          False
SRM    2022-04-30 11:55:30      SRMUSDT          17      1.963000      1.974649 -0.593417  0.593417     -0.584522     -0.482397        -0.784191   0.301794         False         False           False          False          False
APE    2022-04-30 11:55:30      APEUSDT          14     22.846551     22.709410  0.600270  0.600270      0.642967      0.662686         0.142265   0.520422         False         False           False          False          False
Try number: 1
Error on closing positions: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

Err: cannot convert float NaN to integer
Err type: <class 'ValueError'>
Err cause: None
Err cause type: <class 'NoneType'>
Err context: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Err context type: <class 'solana.rpc.core.RPCException'>
Error on logic: cannot convert float NaN to integer
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 526, in run_constant_parallel_logic
    imbalance_status, positions_dataframe = await self.imbalance_checker(fresh_data, coin_symbol, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 250, in imbalance_checker
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

Logic only list: 13.48
Test time only selecting coin:13.03
Logic selecting coin (plus potential list): 26.51
Logic only logic positions: 26.51
Test time only selecting coin:12.97
Logic selecting coin (plus potential list): 39.47
Logic only logic positions: 39.47
Test time only selecting coin:13.06
Logic selecting coin (plus potential list): 52.53
Logic only logic positions: 52.53
Test time only selecting coin:12.91
Logic selecting coin (plus potential list): 65.45
Logic only logic positions: 65.45
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 78.51
Logic only logic positions: 78.51
2022-04-30 11:57:20 --- Logic loop 78.51 seconds ---
Logic only list: 13.06
Test time only selecting coin:13.05
Logic selecting coin (plus potential list): 26.11
Logic only logic positions: 26.11
Test time only selecting coin:12.93
Logic selecting coin (plus potential list): 39.04
Logic only logic positions: 39.04
Test time only selecting coin:13.05
Logic selecting coin (plus potential list): 52.09
Logic only logic positions: 52.09
Test time only selecting coin:12.98
Logic selecting coin (plus potential list): 65.07
Logic only logic positions: 65.07
Test time only selecting coin:13.06
Logic selecting coin (plus potential list): 78.13
Logic only logic positions: 78.13
2022-04-30 11:58:35 --- Logic loop 78.13 seconds ---
Logic only list: 13.03
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 26.1
Logic only logic positions: 26.1
Test time only selecting coin:13.17
Logic selecting coin (plus potential list): 39.27
Logic only logic positions: 39.27
Test time only selecting coin:13.29
Logic selecting coin (plus potential list): 52.56
Logic only logic positions: 52.56
Test time only selecting coin:13.13
Logic selecting coin (plus potential list): 65.69
Logic only logic positions: 65.69
Test time only selecting coin:13.1
Logic selecting coin (plus potential list): 78.79
Logic only logic positions: 78.79
2022-04-30 11:59:55 --- Logic loop 78.79 seconds ---
Logic only list: 13.04
Test time only selecting coin:13.16
Logic selecting coin (plus potential list): 26.2
Logic only logic positions: 26.2
Test time only selecting coin:13.03
Logic selecting coin (plus potential list): 39.23
Logic only logic positions: 39.23
Test time only selecting coin:13.13
Logic selecting coin (plus potential list): 52.36
Logic only logic positions: 52.36
Test time only selecting coin:13.18
Logic selecting coin (plus potential list): 65.53
Logic only logic positions: 65.53
Test time only selecting coin:12.99
Logic selecting coin (plus potential list): 78.53
Logic only logic positions: 78.53
Test time only selecting coin:13.27
Logic selecting coin (plus potential list): 91.79
Logic only logic positions: 91.8
2022-04-30 12:01:30 --- Logic loop 91.8 seconds ---
2022-04-30 12:01:30: Account value sum: 2419.11, Bina: 1197.84 Drift: 1221.27
Logic only list: 13.46
Test time only selecting coin:13.15
Logic selecting coin (plus potential list): 26.61
Logic only logic positions: 26.61
Test time only selecting coin:13.05
Logic selecting coin (plus potential list): 39.65
Logic only logic positions: 39.65
Test time only selecting coin:13.31
Logic selecting coin (plus potential list): 52.96
Logic only logic positions: 52.96
Test time only selecting coin:13.26
Logic selecting coin (plus potential list): 66.22
Logic only logic positions: 66.22
Test time only selecting coin:13.25
Logic selecting coin (plus potential list): 79.47
Logic only logic positions: 79.47
2022-04-30 12:02:50 --- Logic loop 79.47 seconds ---
Logic only list: 13.24
Test time only selecting coin:13.2
Logic selecting coin (plus potential list): 26.44
Logic only logic positions: 26.44
Test time only selecting coin:13.37
Logic selecting coin (plus potential list): 39.81
Logic only logic positions: 39.81
Test time only selecting coin:13.03
Logic selecting coin (plus potential list): 52.84
Logic only logic positions: 52.84
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 65.92
Logic only logic positions: 65.92
Test time only selecting coin:13.33
Logic selecting coin (plus potential list): 79.25
Logic only logic positions: 79.25
2022-04-30 12:04:10 --- Logic loop 79.25 seconds ---
Logic only list: 13.03
Test time only selecting coin:13.11
Logic selecting coin (plus potential list): 26.14
Logic only logic positions: 26.14
Test time only selecting coin:13.24
Logic selecting coin (plus potential list): 39.38
Logic only logic positions: 39.38
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 52.44
2022-04-30 12:05:00 NEAR Closing Drift short: All, closing Binance long: 74.0
                 timestamp binance_pair  drift_pair    bina_price   drift_price  gap_perc   gap_abs  fast_avg_gap  top_avg_gaps  bottom_avg_gaps  gap_range  open_l_drift  open_s_drift  open_somewhere  close_l_drift  close_s_drift
symbol                                                                                                                                                                                                                               
ETH    2022-04-30 12:04:45      ETHUSDT           2   2833.190000   2833.258918 -0.002433  0.002433     -0.040568      0.019243        -0.208104   0.227347         False         False           False          False          False
LTC    2022-04-30 12:04:45      LTCUSDT          12    100.951161    100.921942  0.028944  0.028944      0.016886      0.065901        -0.147295   0.213197         False         False           False          False          False
BNB    2022-04-30 12:04:45      BNBUSDT           5    397.340000    397.139254  0.050522  0.050522      0.032911      0.083184        -0.151543   0.234727         False         False           False          False          False
SOL    2022-04-30 12:04:45      SOLUSDT           0     93.996503     94.051601 -0.058617  0.058617     -0.108144     -0.058028        -0.255903   0.197875         False         False           False          False          False
GMT    2022-04-30 12:04:45      GMTUSDT          18      3.873600      3.870418  0.082133  0.082133      0.022725      0.156249        -0.109494   0.265743         False         False           False          False          False
LUNA   2022-04-30 12:04:45     LUNAUSDT           3     84.245000     84.170172  0.088822  0.088822      0.088864      0.082007        -0.147013   0.229020         False         False           False          False          False
BTC    2022-04-30 12:04:45      BTCUSDT           1  38584.600000  38620.660939 -0.093459  0.093459     -0.105215     -0.013373        -0.164179   0.150806         False         False           False          False          False
ADA    2022-04-30 12:04:45      ADAUSDT           9      0.806600      0.807865 -0.156775  0.156775     -0.256211     -0.093294        -0.344156   0.250861         False         False           False          False          False
NEAR   2022-04-30 12:04:45     NEARUSDT          16     11.632000     11.613669  0.157591  0.157591      0.112119      0.064293        -0.328007   0.392300         False         False           False          False           True
FTT    2022-04-30 12:04:45      FTTUSDT          11     38.910000     38.973515 -0.163235  0.163235     -0.165810     -0.067991        -0.270983   0.202993         False         False           False          False          False
XRP    2022-04-30 12:04:45      XRPUSDT          13      0.620200      0.621315 -0.179702  0.179702     -0.244354     -0.095124        -0.317305   0.222181         False         False           False          False          False
DOT    2022-04-30 12:04:45      DOTUSDT           8     16.125000     16.154844 -0.185082  0.185082     -0.230031     -0.204770        -0.455409   0.250639         False         False           False          False          False
AVAX   2022-04-30 12:04:45     AVAXUSDT           4     62.950000     63.112327 -0.257866  0.257866     -0.273795     -0.207899        -0.444785   0.236886         False         False           False          False          False
ALGO   2022-04-30 12:04:45     ALGOUSDT          10      0.635700      0.637555 -0.291797  0.291797     -0.386546     -0.275921        -0.532266   0.256345         False         False           False          False          False
MATIC  2022-04-30 12:04:45    MATICUSDT           6      1.143100      1.146446 -0.292733  0.292733     -0.310283     -0.283169        -0.578307   0.295138         False         False           False          False          False
ATOM   2022-04-30 12:04:45     ATOMUSDT           7     19.047929     19.109779 -0.324707  0.324707     -0.361217     -0.333338        -0.618786   0.285447         False         False           False          False          False
CRV    2022-04-30 12:04:45      CRVUSDT          19      2.227000      2.234945 -0.356759  0.356759     -0.356759     -0.217871        -0.612909   0.395038         False         False           False          False          False
DOGE   2022-04-30 12:04:45     DOGEUSDT          15      0.134913      0.135486 -0.424138  0.424138     -0.435372     -0.286834        -0.487115   0.200281         False         False           False          False          False
SRM    2022-04-30 12:04:45      SRMUSDT          17      1.966930      1.977479 -0.536320  0.536320     -0.537291     -0.486062        -0.784191   0.298128         False         False           False          False          False
APE    2022-04-30 12:04:45      APEUSDT          14     22.882010     22.676531  0.897991  0.897991      0.906770      0.682788         0.150081   0.532708         False         False           False          False          False
Try number: 1
Error on closing positions: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

Err: cannot convert float NaN to integer
Err type: <class 'ValueError'>
Err cause: None
Err cause type: <class 'NoneType'>
Err context: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Err context type: <class 'solana.rpc.core.RPCException'>
Error on logic: cannot convert float NaN to integer
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 526, in run_constant_parallel_logic
    imbalance_status, positions_dataframe = await self.imbalance_checker(fresh_data, coin_symbol, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 250, in imbalance_checker
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

Logic only list: 13.1
Test time only selecting coin:12.94
Logic selecting coin (plus potential list): 26.04
Logic only logic positions: 26.04
Test time only selecting coin:13.33
Logic selecting coin (plus potential list): 39.37
Logic only logic positions: 39.37
Test time only selecting coin:12.94
Logic selecting coin (plus potential list): 52.31
Logic only logic positions: 52.31
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 65.35
Logic only logic positions: 65.35
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 78.35
Logic only logic positions: 78.35
Test time only selecting coin:12.98
Logic selecting coin (plus potential list): 91.33
Logic only logic positions: 91.33
2022-04-30 12:06:50 --- Logic loop 91.33 seconds ---
Logic only list: 13.08
Test time only selecting coin:13.19
Logic selecting coin (plus potential list): 26.27
Logic only logic positions: 26.27
Test time only selecting coin:13.23
Logic selecting coin (plus potential list): 39.5
Logic only logic positions: 39.5
Test time only selecting coin:12.94
Logic selecting coin (plus potential list): 52.44
2022-04-30 12:07:40 NEAR Closing Drift short: All, closing Binance long: 74.0
                 timestamp binance_pair  drift_pair    bina_price   drift_price  gap_perc   gap_abs  fast_avg_gap  top_avg_gaps  bottom_avg_gaps  gap_range  open_l_drift  open_s_drift  open_somewhere  close_l_drift  close_s_drift
symbol                                                                                                                                                                                                                               
SOL    2022-04-30 12:07:25      SOLUSDT           0     94.110000     94.093908  0.017099  0.017099     -0.001072     -0.053064        -0.255903   0.202839         False         False           False          False          False
ETH    2022-04-30 12:07:25      ETHUSDT           2   2834.110000   2833.258918  0.030030  0.030030      0.035083      0.021141        -0.208104   0.229245         False         False           False          False          False
LUNA   2022-04-30 12:07:25     LUNAUSDT           3     84.349000     84.301181  0.056692  0.056692      0.039393      0.083978        -0.147013   0.230991         False         False           False          False          False
FTT    2022-04-30 12:07:25      FTTUSDT          11     38.948828     38.973515 -0.063382  0.063382     -0.070297     -0.067805        -0.268473   0.200668         False         False           False          False          False
LTC    2022-04-30 12:07:25      LTCUSDT          12    101.054982    100.977669  0.076506  0.076506      0.093196      0.073205        -0.147295   0.220501         False         False           False          False          False
BTC    2022-04-30 12:07:25      BTCUSDT           1  38588.500000  38620.660939 -0.083343  0.083343     -0.083603     -0.013373        -0.164103   0.150729         False         False           False          False          False
ADA    2022-04-30 12:07:25      ADAUSDT           9      0.808237      0.809048 -0.100255  0.100255     -0.179270     -0.096048        -0.344156   0.248108         False         False           False          False          False
BNB    2022-04-30 12:07:25      BNBUSDT           5    397.617219    397.139254  0.120207  0.120207      0.119523      0.088980        -0.151543   0.240523         False         False           False          False           True
GMT    2022-04-30 12:07:25      GMTUSDT          18      3.883384      3.878309  0.130705  0.130705      0.188937      0.157986        -0.109001   0.266987         False         False           False          False          False
NEAR   2022-04-30 12:07:25     NEARUSDT          16     11.646347     11.629436  0.145198  0.145198      0.043233      0.070662        -0.328007   0.398669         False         False           False          False           True
XRP    2022-04-30 12:07:25      XRPUSDT          13      0.621500      0.622523 -0.164561  0.164561     -0.115132     -0.094042        -0.317305   0.223263         False         False           False          False          False
AVAX   2022-04-30 12:07:25     AVAXUSDT           4     62.980000     63.112327 -0.210109  0.210109     -0.226023     -0.207899        -0.444785   0.236886         False         False           False          False          False
CRV    2022-04-30 12:07:25      CRVUSDT          19      2.229826      2.234945 -0.229552  0.229552     -0.262806     -0.221750        -0.612909   0.391159         False         False           False          False          False
MATIC  2022-04-30 12:07:25    MATICUSDT           6      1.145414      1.148365 -0.257630  0.257630     -0.272712     -0.281243        -0.578181   0.296938         False         False           False          False          False
DOGE   2022-04-30 12:07:25     DOGEUSDT          15      0.135120      0.135486 -0.270544  0.270544     -0.286835     -0.285779        -0.486787   0.201008         False         False           False          False          False
ALGO   2022-04-30 12:07:25     ALGOUSDT          10      0.636400      0.638215 -0.285178  0.285178     -0.285178     -0.273956        -0.532266   0.258310         False         False           False          False          False
DOT    2022-04-30 12:07:25      DOTUSDT           8     16.130000     16.180793 -0.314895  0.314895     -0.314895     -0.202882        -0.455409   0.252526         False         False           False          False          False
ATOM   2022-04-30 12:07:25     ATOMUSDT           7     19.059827     19.129177 -0.363852  0.363852     -0.361163     -0.331054        -0.618786   0.287732         False         False           False          False          False
SRM    2022-04-30 12:07:25      SRMUSDT          17      1.970481      1.979691 -0.467407  0.467407     -0.491945     -0.491022        -0.784191   0.293169         False         False           False          False          False
APE    2022-04-30 12:07:25      APEUSDT          14     22.911170     22.700957  0.917510  0.917510      0.859717      0.709247         0.152396   0.556851          True         False            True          False           True
Try number: 1
Error on closing positions: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

Err: cannot convert float NaN to integer
Err type: <class 'ValueError'>
Err cause: None
Err cause type: <class 'NoneType'>
Err context: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Err context type: <class 'solana.rpc.core.RPCException'>
Error on logic: cannot convert float NaN to integer
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 526, in run_constant_parallel_logic
    imbalance_status, positions_dataframe = await self.imbalance_checker(fresh_data, coin_symbol, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 250, in imbalance_checker
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

Logic only list: 13.22
Test time only selecting coin:13.31
Logic selecting coin (plus potential list): 26.53
Logic only logic positions: 26.53
Test time only selecting coin:12.94
Logic selecting coin (plus potential list): 39.46
Logic only logic positions: 39.46
Test time only selecting coin:13.19
Logic selecting coin (plus potential list): 52.65
Logic only logic positions: 52.65
Test time only selecting coin:13.01
Logic selecting coin (plus potential list): 65.66
Logic only logic positions: 65.66
Test time only selecting coin:13.12
Logic selecting coin (plus potential list): 78.78
Logic only logic positions: 78.78
2022-04-30 12:09:20 --- Logic loop 78.78 seconds ---
Logic only list: 12.9
Test time only selecting coin:13.05
Logic selecting coin (plus potential list): 25.96
Logic only logic positions: 25.96
Test time only selecting coin:13.02
Logic selecting coin (plus potential list): 38.98
Logic only logic positions: 38.98
Test time only selecting coin:12.99
Logic selecting coin (plus potential list): 51.96
Logic only logic positions: 51.96
Test time only selecting coin:13.1
Logic selecting coin (plus potential list): 65.06
Logic only logic positions: 65.06
Test time only selecting coin:13.36
Logic selecting coin (plus potential list): 78.41
Logic only logic positions: 78.41
2022-04-30 12:10:35 --- Logic loop 78.41 seconds ---
Logic only list: 13.23
Test time only selecting coin:12.97
Logic selecting coin (plus potential list): 26.2
Logic only logic positions: 26.2
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 39.25
Logic only logic positions: 39.25
Test time only selecting coin:12.91
Logic selecting coin (plus potential list): 52.15
Logic only logic positions: 52.15
Test time only selecting coin:12.98
Logic selecting coin (plus potential list): 65.13
Logic only logic positions: 65.13
Test time only selecting coin:13.03
Logic selecting coin (plus potential list): 78.16
Logic only logic positions: 78.16
Test time only selecting coin:13.09
Logic selecting coin (plus potential list): 91.25
Logic only logic positions: 91.25
2022-04-30 12:12:10 --- Logic loop 91.25 seconds ---
Logic only list: 13.24
Test time only selecting coin:13.05
Logic selecting coin (plus potential list): 26.28
Logic only logic positions: 26.28
Test time only selecting coin:12.99
Logic selecting coin (plus potential list): 39.28
Logic only logic positions: 39.28
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 52.28
Logic only logic positions: 52.28
Test time only selecting coin:13.18
Logic selecting coin (plus potential list): 65.46
Logic only logic positions: 65.46
Test time only selecting coin:12.96
Logic selecting coin (plus potential list): 78.42
Logic only logic positions: 78.42
2022-04-30 12:13:25 --- Logic loop 78.42 seconds ---
Logic only list: 13.04
Test time only selecting coin:13.05
Logic selecting coin (plus potential list): 26.09
Logic only logic positions: 26.09
Test time only selecting coin:12.97
Logic selecting coin (plus potential list): 39.06
Logic only logic positions: 39.06
Test time only selecting coin:13.38
Logic selecting coin (plus potential list): 52.44
Logic only logic positions: 52.44
Test time only selecting coin:13.2
Logic selecting coin (plus potential list): 65.64
Logic only logic positions: 65.64
Test time only selecting coin:13.03
Logic selecting coin (plus potential list): 78.67
Logic only logic positions: 78.67
2022-04-30 12:14:45 --- Logic loop 78.68 seconds ---
Logic only list: 13.07
Test time only selecting coin:13.03
Logic selecting coin (plus potential list): 26.09
Logic only logic positions: 26.09
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 39.17
Logic only logic positions: 39.17
Test time only selecting coin:13.4
Logic selecting coin (plus potential list): 52.57
Logic only logic positions: 52.57
Test time only selecting coin:13.14
Logic selecting coin (plus potential list): 65.71
Logic only logic positions: 65.71
Test time only selecting coin:13.11
Logic selecting coin (plus potential list): 78.82
Logic only logic positions: 78.82
Test time only selecting coin:13.09
Logic selecting coin (plus potential list): 91.92
Logic only logic positions: 91.92
2022-04-30 12:16:15 --- Logic loop 91.92 seconds ---
Logic only list: 13.18
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 26.25
Logic only logic positions: 26.25
Test time only selecting coin:13.21
Logic selecting coin (plus potential list): 39.47
Logic only logic positions: 39.47
Test time only selecting coin:13.06
Logic selecting coin (plus potential list): 52.53
Logic only logic positions: 52.53
Test time only selecting coin:13.02
Logic selecting coin (plus potential list): 65.55
Logic only logic positions: 65.55
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 78.6
Logic only logic positions: 78.6
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 91.67
Logic only logic positions: 91.67
2022-04-30 12:17:50 --- Logic loop 91.67 seconds ---
Logic only list: 12.96
2022-04-30 12:18:05 --- Data loop 3.28 seconds ---
Test time only selecting coin:12.98
Logic selecting coin (plus potential list): 25.94
Logic only logic positions: 25.94
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 39.02
Logic only logic positions: 39.02
Test time only selecting coin:13.11
Logic selecting coin (plus potential list): 52.13
Logic only logic positions: 52.13
Test time only selecting coin:13.03
Logic selecting coin (plus potential list): 65.16
Logic only logic positions: 65.16
Test time only selecting coin:13.15
Logic selecting coin (plus potential list): 78.32
Logic only logic positions: 78.32
Test time only selecting coin:13.27
Logic selecting coin (plus potential list): 91.59
Logic only logic positions: 91.59
Test time only selecting coin:13.11
Logic selecting coin (plus potential list): 104.7
Logic only logic positions: 104.7
2022-04-30 12:19:35 --- Logic loop 104.7 seconds ---
Logic only list: 13.05
Test time only selecting coin:13.16
Logic selecting coin (plus potential list): 26.21
Logic only logic positions: 26.21
Test time only selecting coin:12.99
Logic selecting coin (plus potential list): 39.2
Logic only logic positions: 39.2
Test time only selecting coin:12.96
Logic selecting coin (plus potential list): 52.16
Logic only logic positions: 52.16
Test time only selecting coin:13.36
Logic selecting coin (plus potential list): 65.52
Logic only logic positions: 65.52
Test time only selecting coin:12.98
Logic selecting coin (plus potential list): 78.5
Logic only logic positions: 78.5
2022-04-30 12:20:50 --- Logic loop 78.5 seconds ---
Logic only list: 12.99
Test time only selecting coin:13.01
Logic selecting coin (plus potential list): 26.0
Logic only logic positions: 26.0
Test time only selecting coin:12.96
Logic selecting coin (plus potential list): 38.96
Logic only logic positions: 38.96
Test time only selecting coin:13.23
Logic selecting coin (plus potential list): 52.19
Logic only logic positions: 52.19
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 65.23
Logic only logic positions: 65.23
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 78.3
Logic only logic positions: 78.3
2022-04-30 12:22:10 --- Logic loop 78.3 seconds ---
Logic only list: 13.0
Test time only selecting coin:12.93
Logic selecting coin (plus potential list): 25.93
Logic only logic positions: 25.93
Test time only selecting coin:13.02
Logic selecting coin (plus potential list): 38.95
Logic only logic positions: 38.95
Test time only selecting coin:12.9
Logic selecting coin (plus potential list): 51.84
Logic only logic positions: 51.84
Test time only selecting coin:13.03
Logic selecting coin (plus potential list): 64.88
Logic only logic positions: 64.88
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 77.95
Logic only logic positions: 77.95
Test time only selecting coin:12.99
Logic selecting coin (plus potential list): 90.94
Logic only logic positions: 90.94
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 104.0
Logic only logic positions: 104.0
2022-04-30 12:23:55 --- Logic loop 104.0 seconds ---
Logic only list: 13.06
Test time only selecting coin:13.13
Logic selecting coin (plus potential list): 26.19
Logic only logic positions: 26.19
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 39.2
Logic only logic positions: 39.2
Test time only selecting coin:13.09
Logic selecting coin (plus potential list): 52.29
Logic only logic positions: 52.29
Test time only selecting coin:12.94
Logic selecting coin (plus potential list): 65.23
Logic only logic positions: 65.23
Test time only selecting coin:13.31
Logic selecting coin (plus potential list): 78.54
Logic only logic positions: 78.54
2022-04-30 12:25:15 --- Logic loop 78.54 seconds ---
Logic only list: 13.08
Test time only selecting coin:13.28
Logic selecting coin (plus potential list): 26.37
Logic only logic positions: 26.37
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 39.36
Logic only logic positions: 39.36
Test time only selecting coin:13.23
Logic selecting coin (plus potential list): 52.59
Logic only logic positions: 52.59
Test time only selecting coin:12.95
Logic selecting coin (plus potential list): 65.55
Logic only logic positions: 65.55
Test time only selecting coin:12.97
Logic selecting coin (plus potential list): 78.51
Logic only logic positions: 78.51
2022-04-30 12:26:30 --- Logic loop 78.51 seconds ---
Logic only list: 13.11
Test time only selecting coin:13.26
Logic selecting coin (plus potential list): 26.37
Logic only logic positions: 26.37
Test time only selecting coin:13.1
Logic selecting coin (plus potential list): 39.47
Logic only logic positions: 39.47
Test time only selecting coin:13.06
Logic selecting coin (plus potential list): 52.54
Logic only logic positions: 52.54
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 65.61
Logic only logic positions: 65.61
Test time only selecting coin:13.18
Logic selecting coin (plus potential list): 78.79
Logic only logic positions: 78.79
2022-04-30 12:27:50 --- Logic loop 78.79 seconds ---
Logic only list: 13.13
Test time only selecting coin:13.67
Logic selecting coin (plus potential list): 26.81
Logic only logic positions: 26.81
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 39.85
Logic only logic positions: 39.85
Test time only selecting coin:13.31
Logic selecting coin (plus potential list): 53.16
2022-04-30 12:28:45 NEAR Closing Drift short: All, closing Binance long: 74.0
                 timestamp binance_pair  drift_pair    bina_price   drift_price  gap_perc   gap_abs  fast_avg_gap  top_avg_gaps  bottom_avg_gaps  gap_range  open_l_drift  open_s_drift  open_somewhere  close_l_drift  close_s_drift
symbol                                                                                                                                                                                                                               
BNB    2022-04-30 12:28:30      BNBUSDT           5    397.250527    397.243054  0.001881  0.001881     -0.010839      0.088934        -0.151543   0.240477         False         False           False          False          False
ETH    2022-04-30 12:28:30      ETHUSDT           2   2830.900000   2831.192753 -0.010341  0.010341     -0.028539     -0.002433        -0.208753   0.206321         False         False           False          False          False
LTC    2022-04-30 12:28:30      LTCUSDT          12    101.200000    101.227083 -0.026762  0.026762     -0.021821      0.076526        -0.146268   0.222794         False         False           False          False          False
LUNA   2022-04-30 12:28:30     LUNAUSDT           3     84.322000     84.265695  0.066774  0.066774      0.055658      0.083800        -0.148649   0.232449         False         False           False          False          False
XRP    2022-04-30 12:28:30      XRPUSDT          13      0.622100      0.622542 -0.071055  0.071055     -0.062374     -0.084459        -0.327517   0.243058         False         False           False          False          False
NEAR   2022-04-30 12:28:30     NEARUSDT          16     11.612766     11.603430  0.080389  0.080389      0.075307      0.080147        -0.318465   0.398612         False         False           False          False           True
ADA    2022-04-30 12:28:30      ADAUSDT           9      0.807411      0.808161 -0.092846  0.092846     -0.130157     -0.102952        -0.352642   0.249690         False         False           False          False          False
BTC    2022-04-30 12:28:30      BTCUSDT           1  38579.795115  38620.010396 -0.104239  0.104239     -0.114804     -0.016996        -0.175766   0.158770         False         False           False          False          False
SOL    2022-04-30 12:28:30      SOLUSDT           0     93.830000     93.974721 -0.154238  0.154238     -0.175590     -0.053064        -0.269513   0.216449         False         False           False          False          False
FTT    2022-04-30 12:28:30      FTTUSDT          11     38.903000     38.973515 -0.181258  0.181258     -0.181258     -0.067126        -0.275950   0.208825         False         False           False          False          False
CRV    2022-04-30 12:28:30      CRVUSDT          19      2.230722      2.234898 -0.187206  0.187206     -0.229860     -0.215910        -0.612909   0.396999         False         False           False          False          False
GMT    2022-04-30 12:28:30      GMTUSDT          18      3.882800      3.875460  0.189038  0.189038      0.161292      0.166740        -0.106366   0.273107         False         False           False          False           True
ALGO   2022-04-30 12:28:30     ALGOUSDT          10      0.635300      0.636879 -0.248471  0.248471     -0.305332     -0.267008        -0.537267   0.270259         False         False           False          False          False
DOGE   2022-04-30 12:28:30     DOGEUSDT          15      0.134998      0.135348 -0.259223  0.259223     -0.296121     -0.281971        -0.495750   0.213779         False         False           False          False          False
DOT    2022-04-30 12:28:30      DOTUSDT           8     16.099339     16.143108 -0.271868  0.271868     -0.338957     -0.203170        -0.453539   0.250369         False         False           False          False          False
AVAX   2022-04-30 12:28:30     AVAXUSDT           4     62.880000     63.084301 -0.324906  0.324906     -0.349168     -0.219904        -0.443416   0.223513         False         False           False          False          False
ATOM   2022-04-30 12:28:30     ATOMUSDT           7     19.021000     19.084534 -0.334018  0.334018     -0.405789     -0.333826        -0.616645   0.282819         False         False           False          False          False
MATIC  2022-04-30 12:28:30    MATICUSDT           6      1.143524      1.147814 -0.375227  0.375227     -0.391966     -0.292646        -0.580923   0.288276         False         False           False          False          False
SRM    2022-04-30 12:28:30      SRMUSDT          17      1.965660      1.977057 -0.579808  0.579808     -0.579431     -0.493360        -0.788823   0.295463         False         False           False          False          False
APE    2022-04-30 12:28:30      APEUSDT          14     23.043183     22.859863  0.795550  0.795550      0.721965      0.756012         0.162199   0.593814          True         False            True          False           True
Try number: 1
Error on closing positions: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

Err: cannot convert float NaN to integer
Err type: <class 'ValueError'>
Err cause: None
Err cause type: <class 'NoneType'>
Err context: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Err context type: <class 'solana.rpc.core.RPCException'>
Error on logic: cannot convert float NaN to integer
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 526, in run_constant_parallel_logic
    imbalance_status, positions_dataframe = await self.imbalance_checker(fresh_data, coin_symbol, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 250, in imbalance_checker
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

Logic only list: 12.97
Test time only selecting coin:13.48
Logic selecting coin (plus potential list): 26.45
Logic only logic positions: 26.45
Test time only selecting coin:12.95
Logic selecting coin (plus potential list): 39.4
Logic only logic positions: 39.4
Test time only selecting coin:13.3
Logic selecting coin (plus potential list): 52.7
2022-04-30 12:29:55 NEAR Closing Drift short: All, closing Binance long: 74.0
                 timestamp binance_pair  drift_pair    bina_price   drift_price  gap_perc   gap_abs  fast_avg_gap  top_avg_gaps  bottom_avg_gaps  gap_range  open_l_drift  open_s_drift  open_somewhere  close_l_drift  close_s_drift
symbol                                                                                                                                                                                                                               
ETH    2022-04-30 12:29:40      ETHUSDT           2   2831.030000   2831.192753 -0.005749  0.005749     -0.015569     -0.002433        -0.208753   0.206321         False         False           False          False          False
XRP    2022-04-30 12:29:40      XRPUSDT          13      0.622539      0.622732 -0.030904  0.030904     -0.065101     -0.082680        -0.327517   0.244838         False         False           False          False          False
BNB    2022-04-30 12:29:40      BNBUSDT           5    397.100000    397.243054 -0.036025  0.036025     -0.001891      0.088934        -0.151543   0.240477         False         False           False          False          False
LTC    2022-04-30 12:29:40      LTCUSDT          12    101.264919    101.227083  0.037363  0.037363      0.015057      0.076588        -0.146268   0.222856         False         False           False          False          False
GMT    2022-04-30 12:29:40      GMTUSDT          18      3.875449      3.877980 -0.065312  0.065312      0.104316      0.168399        -0.106181   0.274580         False         False           False          False          False
LUNA   2022-04-30 12:29:40     LUNAUSDT           3     84.326000     84.265695  0.071514  0.071514      0.056117      0.083800        -0.148649   0.232449         False         False           False          False          False
ADA    2022-04-30 12:29:40      ADAUSDT           9      0.807382      0.808161 -0.096477  0.096477     -0.093448     -0.101434        -0.352642   0.251208         False         False           False          False          False
BTC    2022-04-30 12:29:40      BTCUSDT           1  38577.300000  38620.010396 -0.110714  0.110714     -0.110714     -0.016996        -0.175766   0.158770         False         False           False          False          False
NEAR   2022-04-30 12:29:40     NEARUSDT          16     11.629251     11.613267  0.137452  0.137452      0.097478      0.085758        -0.313859   0.399617         False         False           False          False           True
SOL    2022-04-30 12:29:40      SOLUSDT           0     93.840000     93.974721 -0.143565  0.143565     -0.143565     -0.053064        -0.269513   0.216449         False         False           False          False          False
FTT    2022-04-30 12:29:40      FTTUSDT          11     38.903000     38.973515 -0.181258  0.181258     -0.181258     -0.067126        -0.275950   0.208825         False         False           False          False          False
CRV    2022-04-30 12:29:40      CRVUSDT          19      2.230632      2.234898 -0.191228  0.191228     -0.190949     -0.215910        -0.612909   0.396999         False         False           False          False          False
DOGE   2022-04-30 12:29:40     DOGEUSDT          15      0.135038      0.135390 -0.260201  0.260201     -0.257084     -0.278871        -0.495750   0.216879         False         False           False          False          False
DOT    2022-04-30 12:29:40      DOTUSDT           8     16.100249     16.143108 -0.266196  0.266196     -0.274515     -0.203170        -0.453539   0.250369         False         False           False          False          False
ATOM   2022-04-30 12:29:40     ATOMUSDT           7     19.031839     19.086538 -0.287412  0.287412     -0.323458     -0.330734        -0.616645   0.285911         False         False           False          False          False
AVAX   2022-04-30 12:29:40     AVAXUSDT           4     62.880000     63.084829 -0.325745  0.325745     -0.325745     -0.219904        -0.443416   0.223513         False         False           False          False          False
ALGO   2022-04-30 12:29:40     ALGOUSDT          10      0.635400      0.637947 -0.400870  0.400870     -0.254699     -0.263995        -0.537267   0.273273         False         False           False          False          False
MATIC  2022-04-30 12:29:40    MATICUSDT           6      1.142386      1.147814 -0.475216  0.475216     -0.374715     -0.292646        -0.580923   0.288276         False         False           False          False          False
SRM    2022-04-30 12:29:40      SRMUSDT          17      1.966951      1.977057 -0.513759  0.513759     -0.539640     -0.493360        -0.788823   0.295463         False         False           False          False          False
APE    2022-04-30 12:29:40      APEUSDT          14     23.041191     22.870844  0.739315  0.739315      0.768853      0.762677         0.162199   0.600478         False         False           False          False          False
Try number: 1
Error on closing positions: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

Err: cannot convert float NaN to integer
Err type: <class 'ValueError'>
Err cause: None
Err cause type: <class 'NoneType'>
Err context: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Err context type: <class 'solana.rpc.core.RPCException'>
Error on logic: cannot convert float NaN to integer
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 526, in run_constant_parallel_logic
    imbalance_status, positions_dataframe = await self.imbalance_checker(fresh_data, coin_symbol, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 250, in imbalance_checker
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

Logic only list: 13.41
Test time only selecting coin:13.25
Logic selecting coin (plus potential list): 26.65
Logic only logic positions: 26.65
Test time only selecting coin:13.09
Logic selecting coin (plus potential list): 39.74
Logic only logic positions: 39.74
Test time only selecting coin:13.22
Logic selecting coin (plus potential list): 52.96
2022-04-30 12:31:05 NEAR Closing Drift short: All, closing Binance long: 74.0
                 timestamp binance_pair  drift_pair    bina_price   drift_price  gap_perc   gap_abs  fast_avg_gap  top_avg_gaps  bottom_avg_gaps  gap_range  open_l_drift  open_s_drift  open_somewhere  close_l_drift  close_s_drift
symbol                                                                                                                                                                                                                               
BNB    2022-04-30 12:30:50      BNBUSDT           5    397.240000    397.243054 -0.000769  0.000769     -0.008322      0.088934        -0.151543   0.240477         False         False           False          False          False
GMT    2022-04-30 12:30:50      GMTUSDT          18      3.877585      3.877980 -0.010176  0.010176     -0.016837      0.168399        -0.106023   0.274422         False         False           False          False          False
ETH    2022-04-30 12:30:50      ETHUSDT           2   2831.630000   2831.192753  0.015442  0.015442     -0.001334     -0.000491        -0.208753   0.208262         False         False           False          False          False
LTC    2022-04-30 12:30:50      LTCUSDT          12    101.197777    101.227083 -0.028959  0.028959      0.032599      0.076588        -0.146268   0.222856         False         False           False          False          False
XRP    2022-04-30 12:30:50      XRPUSDT          13      0.622837      0.623328 -0.078729  0.078729     -0.048872     -0.080917        -0.327517   0.246600         False         False           False          False          False
ADA    2022-04-30 12:30:50      ADAUSDT           9      0.807648      0.808327 -0.084101  0.084101     -0.095341     -0.100055        -0.352642   0.252587         False         False           False          False          False
LUNA   2022-04-30 12:30:50     LUNAUSDT           3     84.343000     84.265695  0.091655  0.091655      0.064996      0.084880        -0.148226   0.233106         False         False           False          False           True
BTC    2022-04-30 12:30:50      BTCUSDT           1  38581.900000  38620.010396 -0.098778  0.098778     -0.102673     -0.016996        -0.175766   0.158770         False         False           False          False          False
SOL    2022-04-30 12:30:50      SOLUSDT           0     93.850000     93.974721 -0.132894  0.132894     -0.143565     -0.053064        -0.269513   0.216449         False         False           False          False          False
NEAR   2022-04-30 12:30:50     NEARUSDT          16     11.661000     11.644087  0.145036  0.145036      0.121083      0.090010        -0.308315   0.398324         False         False           False          False           True
CRV    2022-04-30 12:30:50      CRVUSDT          19      2.231156      2.234898 -0.167736  0.167736     -0.182955     -0.208437        -0.612909   0.404472         False         False           False          False          False
FTT    2022-04-30 12:30:50      FTTUSDT          11     38.903000     38.973515 -0.181258  0.181258     -0.181258     -0.067126        -0.275950   0.208825         False         False           False          False          False
DOT    2022-04-30 12:30:50      DOTUSDT           8     16.109000     16.143108 -0.211730  0.211730     -0.252182     -0.203170        -0.453539   0.250369         False         False           False          False          False
DOGE   2022-04-30 12:30:50     DOGEUSDT          15      0.135168      0.135514 -0.255937  0.255937     -0.291871     -0.278449        -0.495750   0.217301         False         False           False          False          False
ATOM   2022-04-30 12:30:50     ATOMUSDT           7     19.037000     19.095532 -0.307465  0.307465     -0.293102     -0.328104        -0.616645   0.288541         False         False           False          False          False
AVAX   2022-04-30 12:30:50     AVAXUSDT           4     62.890000     63.084829 -0.309793  0.309793     -0.325745     -0.219904        -0.443416   0.223513         False         False           False          False          False
ALGO   2022-04-30 12:30:50     ALGOUSDT          10      0.635366      0.637947 -0.406295  0.406295     -0.408255     -0.263995        -0.537267   0.273273         False         False           False          False          False
MATIC  2022-04-30 12:30:50    MATICUSDT           6      1.142700      1.147814 -0.447565  0.447565     -0.463717     -0.292646        -0.580923   0.288276         False         False           False          False          False
SRM    2022-04-30 12:30:50      SRMUSDT          17      1.968070      1.978011 -0.505113  0.505113     -0.514721     -0.493314        -0.788823   0.295509         False         False           False          False          False
APE    2022-04-30 12:30:50      APEUSDT          14     23.040701     22.842566  0.859936  0.859936      0.742793      0.770122         0.162685   0.607436          True         False            True          False           True
Try number: 1
Error on closing positions: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

Err: cannot convert float NaN to integer
Err type: <class 'ValueError'>
Err cause: None
Err cause type: <class 'NoneType'>
Err context: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Err context type: <class 'solana.rpc.core.RPCException'>
Error on logic: cannot convert float NaN to integer
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 526, in run_constant_parallel_logic
    imbalance_status, positions_dataframe = await self.imbalance_checker(fresh_data, coin_symbol, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 250, in imbalance_checker
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

Logic only list: 13.08
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 26.14
Logic only logic positions: 26.14
Test time only selecting coin:12.98
Logic selecting coin (plus potential list): 39.12
Logic only logic positions: 39.12
Test time only selecting coin:13.05
Logic selecting coin (plus potential list): 52.18
Logic only logic positions: 52.18
Test time only selecting coin:13.15
Logic selecting coin (plus potential list): 65.32
Logic only logic positions: 65.32
Test time only selecting coin:13.3
Logic selecting coin (plus potential list): 78.62
Logic only logic positions: 78.62
Test time only selecting coin:13.32
Logic selecting coin (plus potential list): 91.95
Logic only logic positions: 91.95
2022-04-30 12:32:50 --- Logic loop 91.95 seconds ---
Logic only list: 13.19
Test time only selecting coin:12.98
Logic selecting coin (plus potential list): 26.17
Logic only logic positions: 26.17
Test time only selecting coin:13.01
Logic selecting coin (plus potential list): 39.18
Logic only logic positions: 39.18
Test time only selecting coin:13.06
Logic selecting coin (plus potential list): 52.24
2022-04-30 12:33:45 NEAR Closing Drift short: All, closing Binance long: 74.0
                 timestamp binance_pair  drift_pair    bina_price   drift_price  gap_perc   gap_abs  fast_avg_gap  top_avg_gaps  bottom_avg_gaps  gap_range  open_l_drift  open_s_drift  open_somewhere  close_l_drift  close_s_drift
symbol                                                                                                                                                                                                                               
ETH    2022-04-30 12:33:30      ETHUSDT           2   2831.075561   2831.192753 -0.004139  0.004139      0.010002      0.004921        -0.208753   0.213674         False         False           False          False          False
LUNA   2022-04-30 12:33:30     LUNAUSDT           3     84.301017     84.266868  0.040508  0.040508      0.077527      0.086883        -0.148089   0.234972         False         False           False          False          False
BNB    2022-04-30 12:33:30      BNBUSDT           5    397.445087    397.243054  0.050833  0.050833      0.051451      0.088934        -0.151543   0.240477         False         False           False          False          False
GMT    2022-04-30 12:33:30      GMTUSDT          18      3.874254      3.871196  0.078949  0.078949      0.087459      0.169049        -0.105627   0.274676         False         False           False          False          False
LTC    2022-04-30 12:33:30      LTCUSDT          12    101.316272    101.227083  0.088030  0.088030      0.083940      0.077750        -0.146268   0.224018         False         False           False          False           True
BTC    2022-04-30 12:33:30      BTCUSDT           1  38576.248748  38620.010396 -0.113442  0.113442     -0.088920     -0.016996        -0.175766   0.158770         False         False           False          False          False
SOL    2022-04-30 12:33:30      SOLUSDT           0     93.859518     93.974721 -0.122740  0.122740     -0.098940     -0.053064        -0.269513   0.216449         False         False           False          False          False
NEAR   2022-04-30 12:33:30     NEARUSDT          16     11.771000     11.756266  0.125176  0.125176      0.025843      0.093138        -0.306750   0.399888         False         False           False          False           True
FTT    2022-04-30 12:33:30      FTTUSDT          11     38.913472     38.973515 -0.154299  0.154299     -0.149996     -0.067126        -0.275950   0.208825         False         False           False          False          False
ADA    2022-04-30 12:33:30      ADAUSDT           9      0.807817      0.809206 -0.171919  0.171919     -0.123055     -0.098753        -0.352642   0.253889         False         False           False          False          False
XRP    2022-04-30 12:33:30      XRPUSDT          13      0.622637      0.623743 -0.177625  0.177625     -0.092307     -0.072356        -0.327517   0.255161         False         False           False          False          False
DOT    2022-04-30 12:33:30      DOTUSDT           8     16.112947     16.144879 -0.198175  0.198175     -0.154275     -0.198267        -0.453539   0.255273         False         False           False          False          False
CRV    2022-04-30 12:33:30      CRVUSDT          19      2.232471      2.237694 -0.233979  0.233979     -0.215040     -0.203710        -0.612909   0.409199         False         False           False          False          False
AVAX   2022-04-30 12:33:30     AVAXUSDT           4     62.863265     63.084186 -0.351431  0.351431     -0.324705     -0.219904        -0.443416   0.223513         False         False           False          False          False
MATIC  2022-04-30 12:33:30    MATICUSDT           6      1.143554      1.147814 -0.372552  0.372552     -0.380570     -0.292646        -0.580923   0.288276         False         False           False          False          False
ATOM   2022-04-30 12:33:30     ATOMUSDT           7     19.023758     19.097488 -0.387563  0.387563     -0.338658     -0.325958        -0.616645   0.290687         False         False           False          False          False
DOGE   2022-04-30 12:33:30     DOGEUSDT          15      0.134988      0.135542 -0.410281  0.410281     -0.362872     -0.276893        -0.495563   0.218670         False         False           False          False          False
ALGO   2022-04-30 12:33:30     ALGOUSDT          10      0.635220      0.637947 -0.429317  0.429317     -0.377381     -0.263995        -0.537267   0.273273         False         False           False          False          False
SRM    2022-04-30 12:33:30      SRMUSDT          17      1.969133      1.979345 -0.518623  0.518623     -0.525391     -0.493314        -0.788823   0.295509         False         False           False          False          False
APE    2022-04-30 12:33:30      APEUSDT          14     22.889000     22.761300  0.557911  0.557911      0.614418      0.775286         0.166030   0.609257         False         False           False          False          False
Try number: 1
Error on closing positions: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

Err: cannot convert float NaN to integer
Err type: <class 'ValueError'>
Err cause: None
Err cause type: <class 'NoneType'>
Err context: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Err context type: <class 'solana.rpc.core.RPCException'>
Error on logic: cannot convert float NaN to integer
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 526, in run_constant_parallel_logic
    imbalance_status, positions_dataframe = await self.imbalance_checker(fresh_data, coin_symbol, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 250, in imbalance_checker
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

Logic only list: 13.23
Test time only selecting coin:13.2
Logic selecting coin (plus potential list): 26.43
Logic only logic positions: 26.43
Test time only selecting coin:13.6
Logic selecting coin (plus potential list): 40.03
Logic only logic positions: 40.03
Test time only selecting coin:13.14
Logic selecting coin (plus potential list): 53.17
Logic only logic positions: 53.17
Test time only selecting coin:13.22
Logic selecting coin (plus potential list): 66.4
Logic only logic positions: 66.4
Test time only selecting coin:13.14
Logic selecting coin (plus potential list): 79.54
Logic only logic positions: 79.54
2022-04-30 12:35:20 --- Logic loop 79.54 seconds ---
Logic only list: 13.11
Test time only selecting coin:13.15
Logic selecting coin (plus potential list): 26.26
Logic only logic positions: 26.26
Test time only selecting coin:12.96
Logic selecting coin (plus potential list): 39.22
Logic only logic positions: 39.22
Test time only selecting coin:13.11
Logic selecting coin (plus potential list): 52.33
Logic only logic positions: 52.33
Test time only selecting coin:12.99
Logic selecting coin (plus potential list): 65.32
Logic only logic positions: 65.32
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 78.41
Logic only logic positions: 78.41
2022-04-30 12:36:40 --- Logic loop 78.41 seconds ---
Logic only list: 12.95
Test time only selecting coin:13.13
Logic selecting coin (plus potential list): 26.08
Logic only logic positions: 26.08
Test time only selecting coin:13.25
Logic selecting coin (plus potential list): 39.33
Logic only logic positions: 39.33
Test time only selecting coin:13.52
Logic selecting coin (plus potential list): 52.85
Logic only logic positions: 52.85
Test time only selecting coin:13.02
Logic selecting coin (plus potential list): 65.87
Logic only logic positions: 65.87
Test time only selecting coin:13.3
Logic selecting coin (plus potential list): 79.16
Logic only logic positions: 79.16
2022-04-30 12:38:00 --- Logic loop 79.16 seconds ---
Logic only list: 13.16
Test time only selecting coin:13.02
Logic selecting coin (plus potential list): 26.18
Logic only logic positions: 26.18
Test time only selecting coin:13.3
Logic selecting coin (plus potential list): 39.48
Logic only logic positions: 39.48
Test time only selecting coin:13.32
Logic selecting coin (plus potential list): 52.8
Logic only logic positions: 52.8
Test time only selecting coin:13.4
Logic selecting coin (plus potential list): 66.2
Logic only logic positions: 66.2
Test time only selecting coin:13.03
Logic selecting coin (plus potential list): 79.24
Logic only logic positions: 79.24
2022-04-30 12:39:20 --- Logic loop 79.24 seconds ---
Logic only list: 13.07
Test time only selecting coin:12.97
Logic selecting coin (plus potential list): 26.04
Logic only logic positions: 26.04
Test time only selecting coin:12.97
Logic selecting coin (plus potential list): 39.01
Logic only logic positions: 39.01
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 52.01
Logic only logic positions: 52.01
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 65.01
Logic only logic positions: 65.01
Test time only selecting coin:13.1
Logic selecting coin (plus potential list): 78.11
Logic only logic positions: 78.11
2022-04-30 12:40:35 --- Logic loop 78.11 seconds ---
Logic only list: 13.07
Test time only selecting coin:13.18
Logic selecting coin (plus potential list): 26.25
Logic only logic positions: 26.25
Test time only selecting coin:13.15
Logic selecting coin (plus potential list): 39.4
Logic only logic positions: 39.4
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 52.44
Logic only logic positions: 52.44
Test time only selecting coin:13.64
Logic selecting coin (plus potential list): 66.09
Logic only logic positions: 66.09
Test time only selecting coin:14.1
Logic selecting coin (plus potential list): 80.18
Logic only logic positions: 80.18
Test time only selecting coin:13.14
Logic selecting coin (plus potential list): 93.32
Logic only logic positions: 93.32
2022-04-30 12:42:10 --- Logic loop 93.32 seconds ---
Logic only list: 12.96
Test time only selecting coin:12.99
Logic selecting coin (plus potential list): 25.95
Logic only logic positions: 25.95
Test time only selecting coin:12.96
Logic selecting coin (plus potential list): 38.91
Logic only logic positions: 38.91
Test time only selecting coin:13.03
Logic selecting coin (plus potential list): 51.94
Logic only logic positions: 51.94
Test time only selecting coin:13.14
Logic selecting coin (plus potential list): 65.08
Logic only logic positions: 65.08
Test time only selecting coin:13.64
Logic selecting coin (plus potential list): 78.72
Logic only logic positions: 78.72
Test time only selecting coin:13.34
Logic selecting coin (plus potential list): 92.07
Logic only logic positions: 92.07
2022-04-30 12:43:40 --- Logic loop 92.07 seconds ---
Logic only list: 13.09
Test time only selecting coin:13.26
Logic selecting coin (plus potential list): 26.35
Logic only logic positions: 26.35
Test time only selecting coin:13.29
Logic selecting coin (plus potential list): 39.63
Logic only logic positions: 39.63
Test time only selecting coin:12.96
Logic selecting coin (plus potential list): 52.59
Logic only logic positions: 52.59
Test time only selecting coin:12.81
Logic selecting coin (plus potential list): 65.4
Logic only logic positions: 65.4
Test time only selecting coin:13.14
Logic selecting coin (plus potential list): 78.55
Logic only logic positions: 78.55
Test time only selecting coin:12.84
Logic selecting coin (plus potential list): 91.39
Logic only logic positions: 91.39
Test time only selecting coin:12.91
Logic selecting coin (plus potential list): 104.3
Logic only logic positions: 104.3
2022-04-30 12:45:25 --- Logic loop 104.3 seconds ---
Logic only list: 12.89
Test time only selecting coin:12.85
Logic selecting coin (plus potential list): 25.74
Logic only logic positions: 25.74
Test time only selecting coin:12.98
Logic selecting coin (plus potential list): 38.72
Logic only logic positions: 38.72
Test time only selecting coin:13.02
Logic selecting coin (plus potential list): 51.74
Logic only logic positions: 51.74
Test time only selecting coin:12.97
Logic selecting coin (plus potential list): 64.7
Logic only logic positions: 64.7
Test time only selecting coin:12.94
Logic selecting coin (plus potential list): 77.64
Logic only logic positions: 77.64
2022-04-30 12:46:45 --- Logic loop 77.64 seconds ---
Logic only list: 13.18
Test time only selecting coin:12.88
Logic selecting coin (plus potential list): 26.06
Logic only logic positions: 26.06
Test time only selecting coin:13.56
Logic selecting coin (plus potential list): 39.62
Logic only logic positions: 39.62
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 52.69
Logic only logic positions: 52.69
Test time only selecting coin:13.28
Logic selecting coin (plus potential list): 65.97
Logic only logic positions: 65.97
Test time only selecting coin:13.33
Logic selecting coin (plus potential list): 79.3
Logic only logic positions: 79.3
2022-04-30 12:48:05 --- Logic loop 79.3 seconds ---
Logic only list: 13.0
Test time only selecting coin:12.92
Logic selecting coin (plus potential list): 25.92
Logic only logic positions: 25.92
Test time only selecting coin:13.03
Logic selecting coin (plus potential list): 38.95
Logic only logic positions: 38.95
Test time only selecting coin:12.94
Logic selecting coin (plus potential list): 51.89
Logic only logic positions: 51.89
Test time only selecting coin:12.89
Logic selecting coin (plus potential list): 64.78
Logic only logic positions: 64.78
Test time only selecting coin:13.21
Logic selecting coin (plus potential list): 77.99
Logic only logic positions: 77.99
2022-04-30 12:49:20 --- Logic loop 77.99 seconds ---
Logic only list: 12.9
Test time only selecting coin:12.92
Logic selecting coin (plus potential list): 25.82
Logic only logic positions: 25.82
Test time only selecting coin:12.88
Logic selecting coin (plus potential list): 38.7
Logic only logic positions: 38.7
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 51.77
Logic only logic positions: 51.77
Test time only selecting coin:12.83
Logic selecting coin (plus potential list): 64.59
Logic only logic positions: 64.59
Test time only selecting coin:13.64
Logic selecting coin (plus potential list): 78.24
Logic only logic positions: 78.24
2022-04-30 12:50:40 --- Logic loop 78.24 seconds ---
Logic only list: 12.96
Test time only selecting coin:12.87
Logic selecting coin (plus potential list): 25.83
Logic only logic positions: 25.83
Test time only selecting coin:12.92
Logic selecting coin (plus potential list): 38.74
Logic only logic positions: 38.75
Test time only selecting coin:12.95
Logic selecting coin (plus potential list): 51.69
Logic only logic positions: 51.69
Test time only selecting coin:12.81
Logic selecting coin (plus potential list): 64.5
Logic only logic positions: 64.5
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 77.54
Logic only logic positions: 77.54
2022-04-30 12:51:55 --- Logic loop 77.54 seconds ---
Logic only list: 12.97
Test time only selecting coin:12.91
Logic selecting coin (plus potential list): 25.89
Logic only logic positions: 25.89
Test time only selecting coin:12.84
Logic selecting coin (plus potential list): 38.73
Logic only logic positions: 38.73
Test time only selecting coin:12.83
Logic selecting coin (plus potential list): 51.56
2022-04-30 12:52:50 NEAR Closing Drift short: All, closing Binance long: 74.0
                 timestamp binance_pair  drift_pair    bina_price   drift_price  gap_perc   gap_abs  fast_avg_gap  top_avg_gaps  bottom_avg_gaps  gap_range  open_l_drift  open_s_drift  open_somewhere  close_l_drift  close_s_drift
symbol                                                                                                                                                                                                                               
GMT    2022-04-30 12:52:35      GMTUSDT          18      3.856900      3.856980 -0.002065  0.002065      0.029308      0.169049        -0.106466   0.275515         False         False           False          False          False
ETH    2022-04-30 12:52:35      ETHUSDT           2   2825.728681   2828.220189 -0.088172  0.088172     -0.097073      0.004921        -0.210058   0.214979         False         False           False          False          False
LTC    2022-04-30 12:52:35      LTCUSDT          12    100.990000    101.080412 -0.089526  0.089526     -0.094352      0.078050        -0.144478   0.222527         False         False           False          False          False
LUNA   2022-04-30 12:52:35     LUNAUSDT           3     84.034000     84.125712 -0.109136  0.109136     -0.131970      0.082252        -0.146990   0.229242         False         False           False          False          False
NEAR   2022-04-30 12:52:35     NEARUSDT          16     11.637000     11.621402  0.134038  0.134038      0.019440      0.102421        -0.283408   0.385829         False         False           False          False           True
BNB    2022-04-30 12:52:35      BNBUSDT           5    396.690000    397.234616 -0.137290  0.137290     -0.139796      0.074773        -0.155193   0.229967         False         False           False          False          False
SOL    2022-04-30 12:52:35      SOLUSDT           0     93.640000     93.783189 -0.152914  0.152914     -0.177691     -0.053064        -0.276258   0.223194         False         False           False          False          False
XRP    2022-04-30 12:52:35      XRPUSDT          13      0.622226      0.623319 -0.175677  0.175677     -0.186236     -0.072186        -0.328439   0.256253         False         False           False          False          False
BTC    2022-04-30 12:52:35      BTCUSDT           1  38544.900000  38619.425147 -0.193346  0.193346     -0.200680     -0.016996        -0.196845   0.179850         False         False           False          False          False
FTT    2022-04-30 12:52:35      FTTUSDT          11     38.846596     38.949103 -0.263878  0.263878     -0.268898     -0.067852        -0.296770   0.228918         False         False           False          False          False
CRV    2022-04-30 12:52:35      CRVUSDT          19      2.226275      2.232712 -0.289140  0.289140     -0.289811     -0.203710        -0.612649   0.408939         False         False           False          False          False
ADA    2022-04-30 12:52:35      ADAUSDT           9      0.806071      0.808575 -0.310688  0.310688     -0.313032     -0.101949        -0.364040   0.262090         False         False           False          False          False
DOT    2022-04-30 12:52:35      DOTUSDT           8     16.052000     16.105590 -0.333851  0.333851     -0.343440     -0.203185        -0.451582   0.248396         False         False           False          False          False
MATIC  2022-04-30 12:52:35    MATICUSDT           6      1.139642      1.143651 -0.351765  0.351765     -0.381086     -0.311265        -0.582892   0.271627         False         False           False          False          False
ALGO   2022-04-30 12:52:35     ALGOUSDT          10      0.633100      0.635763 -0.420583  0.420583     -0.424272     -0.266443        -0.541775   0.275332         False         False           False          False          False
AVAX   2022-04-30 12:52:35     AVAXUSDT           4     62.650000     62.914928 -0.422871  0.422871     -0.454939     -0.219904        -0.445491   0.225587         False         False           False          False          False
ATOM   2022-04-30 12:52:35     ATOMUSDT           7     18.965000     19.052077 -0.459144  0.459144     -0.498150     -0.325958        -0.614917   0.288960         False         False           False          False          False
DOGE   2022-04-30 12:52:35     DOGEUSDT          15      0.134419      0.135074 -0.486819  0.486819     -0.479531     -0.277221        -0.495898   0.218677         False         False           False          False          False
SRM    2022-04-30 12:52:35      SRMUSDT          17      1.957051      1.970378 -0.680975  0.680975     -0.676438     -0.496712        -0.789761   0.293050         False         False           False          False          False
APE    2022-04-30 12:52:35      APEUSDT          14     23.287000     23.114104  0.742458  0.742458      0.724968      0.793216         0.196722   0.596494         False         False           False          False          False
Try number: 1
Error on closing positions: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

Err: cannot convert float NaN to integer
Err type: <class 'ValueError'>
Err cause: None
Err cause type: <class 'NoneType'>
Err context: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Err context type: <class 'solana.rpc.core.RPCException'>
Error on logic: cannot convert float NaN to integer
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 526, in run_constant_parallel_logic
    imbalance_status, positions_dataframe = await self.imbalance_checker(fresh_data, coin_symbol, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 250, in imbalance_checker
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

Logic only list: 12.91
Test time only selecting coin:12.93
Logic selecting coin (plus potential list): 25.84
Logic only logic positions: 25.84
Test time only selecting coin:12.78
Logic selecting coin (plus potential list): 38.62
Logic only logic positions: 38.62
Test time only selecting coin:12.94
Logic selecting coin (plus potential list): 51.56
Logic only logic positions: 51.56
Test time only selecting coin:12.84
Logic selecting coin (plus potential list): 64.4
Logic only logic positions: 64.4
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 77.47
Logic only logic positions: 77.47
2022-04-30 12:54:25 --- Logic loop 77.47 seconds ---
Logic only list: 13.03
Test time only selecting coin:12.94
Logic selecting coin (plus potential list): 25.97
Logic only logic positions: 25.97
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 39.01
Logic only logic positions: 39.01
Test time only selecting coin:12.93
Logic selecting coin (plus potential list): 51.94
Logic only logic positions: 51.94
Test time only selecting coin:12.83
Logic selecting coin (plus potential list): 64.77
Logic only logic positions: 64.77
Test time only selecting coin:13.13
Logic selecting coin (plus potential list): 77.9
Logic only logic positions: 77.9
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 90.94
Logic only logic positions: 90.94
2022-04-30 12:55:55 --- Logic loop 90.94 seconds ---
Logic only list: 12.92
Test time only selecting coin:12.87
Logic selecting coin (plus potential list): 25.8
Logic only logic positions: 25.8
Test time only selecting coin:12.94
Logic selecting coin (plus potential list): 38.74
Logic only logic positions: 38.74
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 51.81
Logic only logic positions: 51.81
Test time only selecting coin:12.89
Logic selecting coin (plus potential list): 64.7
Logic only logic positions: 64.7
Test time only selecting coin:12.88
Logic selecting coin (plus potential list): 77.58
Logic only logic positions: 77.58
Test time only selecting coin:13.15
Logic selecting coin (plus potential list): 90.73
Logic only logic positions: 90.73
2022-04-30 12:57:25 --- Logic loop 90.73 seconds ---
Logic only list: 13.07
Test time only selecting coin:12.96
Logic selecting coin (plus potential list): 26.03
Logic only logic positions: 26.03
Test time only selecting coin:12.92
Logic selecting coin (plus potential list): 38.95
Logic only logic positions: 38.95
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 51.95
Logic only logic positions: 51.95
Test time only selecting coin:12.95
Logic selecting coin (plus potential list): 64.9
Logic only logic positions: 64.9
Test time only selecting coin:13.06
Logic selecting coin (plus potential list): 77.96
Logic only logic positions: 77.96
Test time only selecting coin:13.15
Logic selecting coin (plus potential list): 91.12
Logic only logic positions: 91.12
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 104.12
Logic only logic positions: 104.12
2022-04-30 12:59:10 --- Logic loop 104.12 seconds ---
Logic only list: 12.92
Test time only selecting coin:13.24
Logic selecting coin (plus potential list): 26.16
Logic only logic positions: 26.16
Test time only selecting coin:13.09
Logic selecting coin (plus potential list): 39.25
Logic only logic positions: 39.25
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 52.33
Logic only logic positions: 52.33
Test time only selecting coin:12.88
Logic selecting coin (plus potential list): 65.21
Logic only logic positions: 65.21
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 78.21
Logic only logic positions: 78.21
Test time only selecting coin:12.96
Logic selecting coin (plus potential list): 91.17
Logic only logic positions: 91.17
Test time only selecting coin:12.96
Logic selecting coin (plus potential list): 104.13
Logic only logic positions: 104.13
2022-04-30 13:00:55 --- Logic loop 104.13 seconds ---
Logic only list: 13.02
Test time only selecting coin:12.92
Logic selecting coin (plus potential list): 25.94
Logic only logic positions: 25.94
Test time only selecting coin:12.95
Logic selecting coin (plus potential list): 38.89
Logic only logic positions: 38.89
Test time only selecting coin:12.96
Logic selecting coin (plus potential list): 51.84
Logic only logic positions: 51.85
Test time only selecting coin:12.94
Logic selecting coin (plus potential list): 64.79
Logic only logic positions: 64.79
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 77.83
Logic only logic positions: 77.83
Test time only selecting coin:13.06
Logic selecting coin (plus potential list): 90.89
Logic only logic positions: 90.89
2022-04-30 13:02:25 --- Logic loop 90.89 seconds ---
Logic only list: 12.9
Test time only selecting coin:12.91
Logic selecting coin (plus potential list): 25.81
Logic only logic positions: 25.81
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 38.88
Logic only logic positions: 38.88
Test time only selecting coin:12.95
Logic selecting coin (plus potential list): 51.83
Logic only logic positions: 51.83
Test time only selecting coin:12.93
Logic selecting coin (plus potential list): 64.76
Logic only logic positions: 64.76
Test time only selecting coin:12.94
Logic selecting coin (plus potential list): 77.7
Logic only logic positions: 77.7
2022-04-30 13:03:40 --- Logic loop 77.7 seconds ---
Logic only list: 13.46
Test time only selecting coin:13.24
Logic selecting coin (plus potential list): 26.7
Logic only logic positions: 26.7
Test time only selecting coin:13.09
Logic selecting coin (plus potential list): 39.8
Logic only logic positions: 39.8
Test time only selecting coin:12.88
Logic selecting coin (plus potential list): 52.68
Logic only logic positions: 52.68
Test time only selecting coin:12.92
Logic selecting coin (plus potential list): 65.59
Logic only logic positions: 65.59
Test time only selecting coin:12.85
Logic selecting coin (plus potential list): 78.45
Logic only logic positions: 78.45
Test time only selecting coin:12.94
Logic selecting coin (plus potential list): 91.39
Logic only logic positions: 91.39
2022-04-30 13:05:15 --- Logic loop 91.39 seconds ---
Logic only list: 13.16
Test time only selecting coin:12.93
Logic selecting coin (plus potential list): 26.09
Logic only logic positions: 26.09
Test time only selecting coin:12.85
Logic selecting coin (plus potential list): 38.94
Logic only logic positions: 38.94
Test time only selecting coin:13.18
Logic selecting coin (plus potential list): 52.12
Logic only logic positions: 52.12
Test time only selecting coin:13.2
Logic selecting coin (plus potential list): 65.32
Logic only logic positions: 65.32
Test time only selecting coin:12.87
Logic selecting coin (plus potential list): 78.19
Logic only logic positions: 78.19
2022-04-30 13:06:30 --- Logic loop 78.19 seconds ---
Logic only list: 13.11
Test time only selecting coin:13.01
Logic selecting coin (plus potential list): 26.12
Logic only logic positions: 26.12
Test time only selecting coin:13.67
Logic selecting coin (plus potential list): 39.79
Logic only logic positions: 39.79
Test time only selecting coin:12.84
Logic selecting coin (plus potential list): 52.63
Logic only logic positions: 52.63
Test time only selecting coin:13.22
Logic selecting coin (plus potential list): 65.85
Logic only logic positions: 65.85
Test time only selecting coin:12.95
Logic selecting coin (plus potential list): 78.8
Logic only logic positions: 78.8
2022-04-30 13:07:50 --- Logic loop 78.8 seconds ---
Logic only list: 13.2
Test time only selecting coin:12.98
Logic selecting coin (plus potential list): 26.18
Logic only logic positions: 26.18
Test time only selecting coin:12.95
Logic selecting coin (plus potential list): 39.13
Logic only logic positions: 39.13
Test time only selecting coin:12.91
Logic selecting coin (plus potential list): 52.04
Logic only logic positions: 52.04
Test time only selecting coin:12.88
Logic selecting coin (plus potential list): 64.92
Logic only logic positions: 64.92
Test time only selecting coin:12.9
Logic selecting coin (plus potential list): 77.82
Logic only logic positions: 77.82
2022-04-30 13:09:10 --- Logic loop 77.82 seconds ---
Logic only list: 12.96
Test time only selecting coin:12.9
Logic selecting coin (plus potential list): 25.87
Logic only logic positions: 25.87
Test time only selecting coin:12.79
Logic selecting coin (plus potential list): 38.66
Logic only logic positions: 38.66
Test time only selecting coin:12.99
Logic selecting coin (plus potential list): 51.65
2022-04-30 13:10:00 NEAR Closing Drift short: All, closing Binance long: 74.0
                 timestamp binance_pair  drift_pair    bina_price   drift_price  gap_perc   gap_abs  fast_avg_gap  top_avg_gaps  bottom_avg_gaps  gap_range  open_l_drift  open_s_drift  open_somewhere  close_l_drift  close_s_drift
symbol                                                                                                                                                                                                                               
BNB    2022-04-30 13:09:45      BNBUSDT           5    396.562009    396.586671 -0.006219  0.006219     -0.007811      0.033358        -0.165065   0.198424         False         False           False          False          False
BTC    2022-04-30 13:09:45      BTCUSDT           1  38555.432471  38565.959858 -0.027305  0.027305     -0.029493     -0.027612        -0.217129   0.189517         False         False           False          False          False
ETH    2022-04-30 13:09:45      ETHUSDT           2   2826.510000   2827.433702 -0.032680  0.032680     -0.033146      0.001747        -0.210874   0.212621         False         False           False          False          False
GMT    2022-04-30 13:09:45      GMTUSDT          18      3.873700      3.874978 -0.032992  0.032992     -0.001450      0.165054        -0.107412   0.272465         False         False           False          False          False
LUNA   2022-04-30 13:09:45     LUNAUSDT           3     83.580084     83.678322 -0.117538  0.117538     -0.084545      0.078813        -0.147468   0.226281         False         False           False          False          False
LTC    2022-04-30 13:09:45      LTCUSDT          12    101.320333    101.192055  0.126606  0.126606      0.098870      0.081636        -0.143834   0.225470         False         False           False          False           True
NEAR   2022-04-30 13:09:45     NEARUSDT          16     11.583000     11.566440  0.142966  0.142966      0.136471      0.109470        -0.280100   0.389570         False         False           False          False           True
ADA    2022-04-30 13:09:45      ADAUSDT           9      0.808100      0.809871 -0.219181  0.219181     -0.219734     -0.111213        -0.368985   0.257772         False         False           False          False          False
XRP    2022-04-30 13:09:45      XRPUSDT          13      0.623485      0.624854 -0.219637  0.219637     -0.216799     -0.068017        -0.328439   0.260422         False         False           False          False          False
FTT    2022-04-30 13:09:45      FTTUSDT          11     38.861000     38.949103 -0.226714  0.226714     -0.226714     -0.085406        -0.323092   0.237686         False         False           False          False          False
DOT    2022-04-30 13:09:45      DOTUSDT           8     16.071775     16.112032 -0.250481  0.250481     -0.250755     -0.211116        -0.451582   0.240465         False         False           False          False          False
CRV    2022-04-30 13:09:45      CRVUSDT          19      2.229052      2.234825 -0.259020  0.259020     -0.252358     -0.191934        -0.611652   0.419718         False         False           False          False          False
DOGE   2022-04-30 13:09:45     DOGEUSDT          15      0.134719      0.135072 -0.262189  0.262189     -0.287172     -0.275669        -0.498207   0.222538         False         False           False          False          False
SOL    2022-04-30 13:09:45      SOLUSDT           0     93.620000     93.876261 -0.273725  0.273725     -0.281928     -0.054895        -0.280948   0.226054         False         False           False          False          False
MATIC  2022-04-30 13:09:45    MATICUSDT           6      1.142277      1.145585 -0.289609  0.289609     -0.327077     -0.292695        -0.582582   0.289886         False         False           False          False          False
AVAX   2022-04-30 13:09:45     AVAXUSDT           4     62.702178     62.891592 -0.302085  0.302085     -0.337550     -0.219904        -0.461915   0.242012         False         False           False          False          False
ALGO   2022-04-30 13:09:45     ALGOUSDT          10      0.633120      0.635722 -0.411043  0.411043     -0.410971     -0.267605        -0.544723   0.277118         False         False           False          False          False
ATOM   2022-04-30 13:09:45     ATOMUSDT           7     18.970000     19.057127 -0.459286  0.459286     -0.453991     -0.328914        -0.614917   0.286003         False         False           False          False          False
SRM    2022-04-30 13:09:45      SRMUSDT          17      1.957493      1.970160 -0.647098  0.647098     -0.648620     -0.521649        -0.789778   0.268129         False         False           False          False          False
APE    2022-04-30 13:09:45      APEUSDT          14     23.178000     23.014894  0.703711  0.703711      0.738620      0.826208         0.241399   0.584809         False         False           False          False          False
Try number: 1
Error on closing positions: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

Err: cannot convert float NaN to integer
Err type: <class 'ValueError'>
Err cause: None
Err cause type: <class 'NoneType'>
Err context: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Err context type: <class 'solana.rpc.core.RPCException'>
Error on logic: cannot convert float NaN to integer
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 526, in run_constant_parallel_logic
    imbalance_status, positions_dataframe = await self.imbalance_checker(fresh_data, coin_symbol, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 250, in imbalance_checker
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

Logic only list: 13.13
Test time only selecting coin:13.01
Logic selecting coin (plus potential list): 26.14
Logic only logic positions: 26.14
Test time only selecting coin:13.12
Logic selecting coin (plus potential list): 39.26
Logic only logic positions: 39.26
Test time only selecting coin:12.94
Logic selecting coin (plus potential list): 52.21
Logic only logic positions: 52.21
Test time only selecting coin:12.96
Logic selecting coin (plus potential list): 65.17
Logic only logic positions: 65.17
Test time only selecting coin:12.99
Logic selecting coin (plus potential list): 78.15
Logic only logic positions: 78.15
2022-04-30 13:11:35 --- Logic loop 78.15 seconds ---
Logic only list: 12.82
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 25.82
Logic only logic positions: 25.82
Test time only selecting coin:12.91
Logic selecting coin (plus potential list): 38.73
Logic only logic positions: 38.73
Test time only selecting coin:12.94
Logic selecting coin (plus potential list): 51.66
Logic only logic positions: 51.66
Test time only selecting coin:12.98
Logic selecting coin (plus potential list): 64.64
Logic only logic positions: 64.64
Test time only selecting coin:12.95
Logic selecting coin (plus potential list): 77.58
Logic only logic positions: 77.58
2022-04-30 13:12:50 --- Logic loop 77.58 seconds ---
Logic only list: 12.96
Test time only selecting coin:12.9
Logic selecting coin (plus potential list): 25.85
Logic only logic positions: 25.85
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 38.94
Logic only logic positions: 38.94
Test time only selecting coin:13.1
Logic selecting coin (plus potential list): 52.04
Logic only logic positions: 52.04
Test time only selecting coin:12.92
Logic selecting coin (plus potential list): 64.96
Logic only logic positions: 64.96
Test time only selecting coin:12.92
Logic selecting coin (plus potential list): 77.88
Logic only logic positions: 77.88
Test time only selecting coin:13.06
Logic selecting coin (plus potential list): 90.94
Logic only logic positions: 90.94
2022-04-30 13:14:20 --- Logic loop 90.94 seconds ---
Logic only list: 12.93
Test time only selecting coin:13.14
Logic selecting coin (plus potential list): 26.07
Logic only logic positions: 26.07
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 39.15
Logic only logic positions: 39.15
Test time only selecting coin:13.03
Logic selecting coin (plus potential list): 52.18
Logic only logic positions: 52.18
Test time only selecting coin:12.83
Logic selecting coin (plus potential list): 65.0
Logic only logic positions: 65.0
Test time only selecting coin:13.53
Logic selecting coin (plus potential list): 78.53
Logic only logic positions: 78.53
2022-04-30 13:15:40 --- Logic loop 78.53 seconds ---
Logic only list: 13.23
Test time only selecting coin:12.98
Logic selecting coin (plus potential list): 26.2
Logic only logic positions: 26.2
Test time only selecting coin:12.83
Logic selecting coin (plus potential list): 39.04
Logic only logic positions: 39.04
Test time only selecting coin:12.9
Logic selecting coin (plus potential list): 51.94
Logic only logic positions: 51.94
Test time only selecting coin:12.92
Logic selecting coin (plus potential list): 64.86
Logic only logic positions: 64.86
Test time only selecting coin:13.21
Logic selecting coin (plus potential list): 78.07
Logic only logic positions: 78.07
2022-04-30 13:17:00 --- Logic loop 78.07 seconds ---
Logic only list: 12.94
Test time only selecting coin:13.18
Logic selecting coin (plus potential list): 26.12
Logic only logic positions: 26.12
Test time only selecting coin:12.96
Logic selecting coin (plus potential list): 39.08
Logic only logic positions: 39.08
Test time only selecting coin:12.93
Logic selecting coin (plus potential list): 52.01
2022-04-30 13:17:50 NEAR Closing Drift short: All, closing Binance long: 74.0
                 timestamp binance_pair  drift_pair    bina_price   drift_price  gap_perc   gap_abs  fast_avg_gap  top_avg_gaps  bottom_avg_gaps  gap_range  open_l_drift  open_s_drift  open_somewhere  close_l_drift  close_s_drift
symbol                                                                                                                                                                                                                               
LUNA   2022-04-30 13:17:35     LUNAUSDT           3     83.482000     83.491468 -0.011341  0.011341     -0.022125      0.081806        -0.147038   0.228843         False         False           False          False          False
LTC    2022-04-30 13:17:35      LTCUSDT          12    101.371391    101.327325  0.043470  0.043470      0.013665      0.083714        -0.143263   0.226978         False         False           False          False          False
BNB    2022-04-30 13:17:35      BNBUSDT           5    396.800029    396.586671  0.053770  0.053770      0.053762      0.037975        -0.165065   0.203041         False         False           False          False           True
BTC    2022-04-30 13:17:35      BTCUSDT           1  38589.000000  38611.629607 -0.058643  0.058643     -0.049995     -0.025556        -0.217129   0.191573         False         False           False          False          False
ETH    2022-04-30 13:17:35      ETHUSDT           2   2826.250000   2827.975944 -0.061068  0.061068     -0.060337      0.001822        -0.208635   0.210457         False         False           False          False          False
CRV    2022-04-30 13:17:35      CRVUSDT          19      2.234000      2.235431 -0.064074  0.064074     -0.105805     -0.169739        -0.573508   0.403769         False         False           False          False          False
GMT    2022-04-30 13:17:35      GMTUSDT          18      3.907297      3.903683  0.092484  0.092484      0.048149      0.174121        -0.107173   0.281294         False         False           False          False          False
XRP    2022-04-30 13:17:35      XRPUSDT          13      0.624700      0.625487 -0.125960  0.125960     -0.072685     -0.067224        -0.324012   0.256788         False         False           False          False          False
FTT    2022-04-30 13:17:35      FTTUSDT          11     38.886000     38.949103 -0.162278  0.162278     -0.160990     -0.085406        -0.323092   0.237686         False         False           False          False          False
SOL    2022-04-30 13:17:35      SOLUSDT           0     93.704649     93.874962 -0.181755  0.181755     -0.156654     -0.054895        -0.283427   0.228532         False         False           False          False          False
NEAR   2022-04-30 13:17:35     NEARUSDT          16     11.580000     11.557302  0.196010  0.196010      0.157416      0.122997        -0.263010   0.386006         False         False           False          False           True
DOT    2022-04-30 13:17:35      DOTUSDT           8     16.075127     16.119391 -0.275362  0.275362     -0.261192     -0.203713        -0.446663   0.242950         False         False           False          False          False
AVAX   2022-04-30 13:17:35     AVAXUSDT           4     62.720000     62.903139 -0.291995  0.291995     -0.284258     -0.219904        -0.457452   0.237548         False         False           False          False          False
ADA    2022-04-30 13:17:35      ADAUSDT           9      0.808489      0.811053 -0.317085  0.317085     -0.303367     -0.111213        -0.368985   0.257772         False         False           False          False          False
MATIC  2022-04-30 13:17:35    MATICUSDT           6      1.141800      1.145837 -0.353570  0.353570     -0.362360     -0.285566        -0.571358   0.285792         False         False           False          False          False
ATOM   2022-04-30 13:17:35     ATOMUSDT           7     18.981219     19.048522 -0.354575  0.354575     -0.354191     -0.328104        -0.613135   0.285031         False         False           False          False          False
ALGO   2022-04-30 13:17:35     ALGOUSDT          10      0.633000      0.635511 -0.396685  0.396685     -0.412548     -0.267605        -0.545005   0.277401         False         False           False          False          False
DOGE   2022-04-30 13:17:35     DOGEUSDT          15      0.134608      0.135151 -0.403991  0.403991     -0.311320     -0.272531        -0.497137   0.224606         False         False           False          False          False
SRM    2022-04-30 13:17:35      SRMUSDT          17      1.958000      1.970411 -0.633848  0.633848     -0.619282     -0.521649        -0.789778   0.268129         False         False           False          False          False
APE    2022-04-30 13:17:35      APEUSDT          14     23.324000     23.110190  0.916695  0.916695      0.802857      0.834212         0.255022   0.579190          True         False            True          False           True
Try number: 1
Error on closing positions: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

Err: cannot convert float NaN to integer
Err type: <class 'ValueError'>
Err cause: None
Err cause type: <class 'NoneType'>
Err context: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Err context type: <class 'solana.rpc.core.RPCException'>
Error on logic: cannot convert float NaN to integer
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 526, in run_constant_parallel_logic
    imbalance_status, positions_dataframe = await self.imbalance_checker(fresh_data, coin_symbol, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 250, in imbalance_checker
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

Logic only list: 13.0
Test time only selecting coin:12.87
Logic selecting coin (plus potential list): 25.87
Logic only logic positions: 25.87
Test time only selecting coin:12.92
Logic selecting coin (plus potential list): 38.79
Logic only logic positions: 38.79
Test time only selecting coin:12.93
Logic selecting coin (plus potential list): 51.72
Logic only logic positions: 51.72
Test time only selecting coin:13.3
Logic selecting coin (plus potential list): 65.02
Logic only logic positions: 65.02
Test time only selecting coin:12.96
Logic selecting coin (plus potential list): 77.98
Logic only logic positions: 77.98
2022-04-30 13:19:25 --- Logic loop 77.98 seconds ---
Logic only list: 13.13
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 26.2
Logic only logic positions: 26.2
Test time only selecting coin:12.86
Logic selecting coin (plus potential list): 39.07
Logic only logic positions: 39.07
Test time only selecting coin:13.15
Logic selecting coin (plus potential list): 52.22
Logic only logic positions: 52.22
Test time only selecting coin:13.03
Logic selecting coin (plus potential list): 65.25
Logic only logic positions: 65.25
Test time only selecting coin:12.96
Logic selecting coin (plus potential list): 78.21
Logic only logic positions: 78.21
2022-04-30 13:20:45 --- Logic loop 78.21 seconds ---
Logic only list: 12.97
Test time only selecting coin:12.91
Logic selecting coin (plus potential list): 25.88
Logic only logic positions: 25.88
Test time only selecting coin:12.95
Logic selecting coin (plus potential list): 38.84
Logic only logic positions: 38.84
Test time only selecting coin:13.06
Logic selecting coin (plus potential list): 51.89
Logic only logic positions: 51.89
Test time only selecting coin:13.36
Logic selecting coin (plus potential list): 65.25
Logic only logic positions: 65.25
Test time only selecting coin:13.3
Logic selecting coin (plus potential list): 78.55
Logic only logic positions: 78.55
2022-04-30 13:22:00 --- Logic loop 78.55 seconds ---
Logic only list: 12.97
Test time only selecting coin:13.02
Logic selecting coin (plus potential list): 25.99
Logic only logic positions: 25.99
Test time only selecting coin:13.03
Logic selecting coin (plus potential list): 39.02
Logic only logic positions: 39.02
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 52.02
2022-04-30 13:22:55 NEAR Closing Drift short: All, closing Binance long: 74.0
                 timestamp binance_pair  drift_pair    bina_price   drift_price  gap_perc   gap_abs  fast_avg_gap  top_avg_gaps  bottom_avg_gaps  gap_range  open_l_drift  open_s_drift  open_somewhere  close_l_drift  close_s_drift
symbol                                                                                                                                                                                                                               
BTC    2022-04-30 13:22:40      BTCUSDT           1  38608.244374  38611.629607 -0.008768  0.008768      0.000224     -0.014428        -0.217129   0.202701         False         False           False          False          False
LTC    2022-04-30 13:22:40      LTCUSDT          12    101.463546    101.496708 -0.032684  0.032684     -0.031076      0.086834        -0.140047   0.226880         False         False           False          False          False
ETH    2022-04-30 13:22:40      ETHUSDT           2   2827.464583   2828.518342 -0.037269  0.037269     -0.024562      0.004193        -0.208104   0.212297         False         False           False          False          False
BNB    2022-04-30 13:22:40      BNBUSDT           5    396.750479    396.586671  0.041288  0.041288      0.058366      0.051104        -0.165065   0.216170         False         False           False          False          False
LUNA   2022-04-30 13:22:40     LUNAUSDT           3     83.789390     83.727006  0.074453  0.074453      0.072124      0.087813        -0.146767   0.234580         False         False           False          False          False
FTT    2022-04-30 13:22:40      FTTUSDT          11     38.919302     38.951497 -0.082721  0.082721     -0.086531     -0.083341        -0.323092   0.239751         False         False           False          False          False
GMT    2022-04-30 13:22:40      GMTUSDT          18      3.891800      3.888198  0.092553  0.092553      0.091270      0.175016        -0.104173   0.279189         False         False           False          False          False
CRV    2022-04-30 13:22:40      CRVUSDT          19      2.237710      2.240270 -0.114386  0.114386     -0.072384     -0.153772        -0.560723   0.406952         False         False           False          False          False
SOL    2022-04-30 13:22:40      SOLUSDT           0     93.929818     94.087834 -0.168228  0.168228     -0.144239     -0.053064        -0.283427   0.230363         False         False           False          False          False
NEAR   2022-04-30 13:22:40     NEARUSDT          16     11.625088     11.604672  0.175622  0.175622      0.125118      0.130368        -0.255241   0.385610         False         False           False          False           True
ADA    2022-04-30 13:22:40      ADAUSDT           9      0.809500      0.811114 -0.199425  0.199425     -0.194470     -0.111071        -0.368985   0.257914         False         False           False          False          False
DOT    2022-04-30 13:22:40      DOTUSDT           8     16.105937     16.144769 -0.241103  0.241103     -0.209605     -0.197149        -0.443071   0.245922         False         False           False          False          False
MATIC  2022-04-30 13:22:40    MATICUSDT           6      1.143539      1.146441 -0.253790  0.253790     -0.262913     -0.271812        -0.550366   0.278554         False         False           False          False          False
XRP    2022-04-30 13:22:40      XRPUSDT          13      0.625282      0.627047 -0.282229  0.282229     -0.247243     -0.067042        -0.317305   0.250262         False         False           False          False          False
AVAX   2022-04-30 13:22:40     AVAXUSDT           4     62.784329     62.975497 -0.304483  0.304483     -0.295424     -0.218588        -0.454693   0.236105         False         False           False          False          False
ATOM   2022-04-30 13:22:40     ATOMUSDT           7     19.012469     19.074522 -0.326380  0.326380     -0.331703     -0.325741        -0.600863   0.275122         False         False           False          False          False
ALGO   2022-04-30 13:22:40     ALGOUSDT          10      0.633400      0.635511 -0.333340  0.333340     -0.342035     -0.267605        -0.535974   0.268369         False         False           False          False          False
DOGE   2022-04-30 13:22:40     DOGEUSDT          15      0.134715      0.135275 -0.415753  0.415753     -0.379179     -0.270906        -0.497137   0.226231         False         False           False          False          False
SRM    2022-04-30 13:22:40      SRMUSDT          17      1.963545      1.975157 -0.591378  0.591378     -0.627739     -0.521419        -0.787721   0.266302         False         False           False          False          False
APE    2022-04-30 13:22:40      APEUSDT          14     23.594000     23.418727  0.742873  0.742873      0.699229      0.849003         0.261669   0.587335         False         False           False          False          False
Try number: 1
Error on closing positions: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

Err: cannot convert float NaN to integer
Err type: <class 'ValueError'>
Err cause: None
Err cause type: <class 'NoneType'>
Err context: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Err context type: <class 'solana.rpc.core.RPCException'>
Error on logic: cannot convert float NaN to integer
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 526, in run_constant_parallel_logic
    imbalance_status, positions_dataframe = await self.imbalance_checker(fresh_data, coin_symbol, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 250, in imbalance_checker
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

Logic only list: 12.89
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 25.96
Logic only logic positions: 25.96
Test time only selecting coin:13.44
Logic selecting coin (plus potential list): 39.4
Logic only logic positions: 39.4
Test time only selecting coin:13.02
Logic selecting coin (plus potential list): 52.42
2022-04-30 13:24:05 NEAR Closing Drift short: All, closing Binance long: 74.0
                 timestamp binance_pair  drift_pair    bina_price   drift_price  gap_perc   gap_abs  fast_avg_gap  top_avg_gaps  bottom_avg_gaps  gap_range  open_l_drift  open_s_drift  open_somewhere  close_l_drift  close_s_drift
symbol                                                                                                                                                                                                                               
BNB    2022-04-30 13:23:50      BNBUSDT           5    396.650000    396.586671  0.015966  0.015966      0.033608      0.051104        -0.165065   0.216170         False         False           False          False          False
ETH    2022-04-30 13:23:50      ETHUSDT           2   2827.692705   2828.518342 -0.029198  0.029198     -0.028539      0.004193        -0.208104   0.212297         False         False           False          False          False
BTC    2022-04-30 13:23:50      BTCUSDT           1  38599.771052  38611.629607 -0.030722  0.030722     -0.012789     -0.013370        -0.217129   0.203759         False         False           False          False          False
LTC    2022-04-30 13:23:50      LTCUSDT          12    101.462386    101.496708 -0.033828  0.033828     -0.034267      0.086834        -0.140047   0.226880         False         False           False          False          False
FTT    2022-04-30 13:23:50      FTTUSDT          11     38.917046     38.951497 -0.088524  0.088524     -0.084241     -0.083232        -0.323092   0.239861         False         False           False          False          False
LUNA   2022-04-30 13:23:50     LUNAUSDT           3     83.753000     83.675695  0.092301  0.092301      0.058477      0.087926        -0.146767   0.234693         False         False           False          False           True
GMT    2022-04-30 13:23:50      GMTUSDT          18      3.896463      3.891390  0.130208  0.130208      0.095679      0.175294        -0.102303   0.277597         False         False           False          False          False
CRV    2022-04-30 13:23:50      CRVUSDT          19      2.237000      2.240270 -0.146170  0.146170     -0.146170     -0.147475        -0.560723   0.413248         False         False           False          False          False
SOL    2022-04-30 13:23:50      SOLUSDT           0     93.880928     94.087834 -0.220392  0.220392     -0.176473     -0.053064        -0.283427   0.230363         False         False           False          False          False
DOT    2022-04-30 13:23:50      DOTUSDT           8     16.104000     16.144769 -0.253163  0.253163     -0.257017     -0.197149        -0.443071   0.245922         False         False           False          False          False
AVAX   2022-04-30 13:23:50     AVAXUSDT           4     62.810000     62.975497 -0.263488  0.263488     -0.293054     -0.218588        -0.454693   0.236105         False         False           False          False          False
ADA    2022-04-30 13:23:50      ADAUSDT           9      0.808718      0.811114 -0.296326  0.296326     -0.226222     -0.111071        -0.368985   0.257914         False         False           False          False          False
ATOM   2022-04-30 13:23:50     ATOMUSDT           7     19.000000     19.059939 -0.315467  0.315467     -0.336031     -0.325654        -0.600863   0.275209         False         False           False          False          False
XRP    2022-04-30 13:23:50      XRPUSDT          13      0.624708      0.626900 -0.350883  0.350883     -0.327441     -0.067042        -0.319768   0.252726         False         False           False           True          False
ALGO   2022-04-30 13:23:50     ALGOUSDT          10      0.633249      0.635511 -0.357193  0.357193     -0.337009     -0.267605        -0.535974   0.268369         False         False           False          False          False
DOGE   2022-04-30 13:23:50     DOGEUSDT          15      0.134771      0.135275 -0.373999  0.373999     -0.412805     -0.270906        -0.497137   0.226231         False         False           False          False          False
NEAR   2022-04-30 13:23:50     NEARUSDT          16     11.619000     11.575090  0.377918  0.377918      0.201347      0.135649        -0.255241   0.390891         False         False           False          False           True
MATIC  2022-04-30 13:23:50    MATICUSDT           6      1.141985      1.146441 -0.390252  0.390252     -0.334951     -0.271812        -0.550366   0.278554         False         False           False          False          False
SRM    2022-04-30 13:23:50      SRMUSDT          17      1.963438      1.975157 -0.596881  0.596881     -0.591921     -0.521419        -0.787721   0.266302         False         False           False          False          False
APE    2022-04-30 13:23:50      APEUSDT          14     23.663000     23.492834  0.719123  0.719123      0.768107      0.852559         0.265218   0.587341         False         False           False          False          False
Try number: 1
Error on closing positions: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

Err: cannot convert float NaN to integer
Err type: <class 'ValueError'>
Err cause: None
Err cause type: <class 'NoneType'>
Err context: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Err context type: <class 'solana.rpc.core.RPCException'>
Error on logic: cannot convert float NaN to integer
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 526, in run_constant_parallel_logic
    imbalance_status, positions_dataframe = await self.imbalance_checker(fresh_data, coin_symbol, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 250, in imbalance_checker
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

Logic only list: 12.98
Test time only selecting coin:12.95
Logic selecting coin (plus potential list): 25.93
Logic only logic positions: 25.93
Test time only selecting coin:13.07
Logic selecting coin (plus potential list): 39.0
Logic only logic positions: 39.0
Test time only selecting coin:13.53
Logic selecting coin (plus potential list): 52.52
Logic only logic positions: 52.52
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 65.53
Logic only logic positions: 65.53
Test time only selecting coin:13.01
Logic selecting coin (plus potential list): 78.54
Logic only logic positions: 78.54
Test time only selecting coin:13.04
Logic selecting coin (plus potential list): 91.58
Logic only logic positions: 91.58
2022-04-30 13:25:50 --- Logic loop 91.58 seconds ---
2022-04-30 13:25:50: Account value sum: 2419.11, Bina: 1197.84 Drift: 1221.27
Logic only list: 13.4
Test time only selecting coin:12.93
Logic selecting coin (plus potential list): 26.33
Logic only logic positions: 26.33
Test time only selecting coin:13.14
Logic selecting coin (plus potential list): 39.47
Logic only logic positions: 39.47
Test time only selecting coin:13.11
Logic selecting coin (plus potential list): 52.58
2022-04-30 13:26:45 NEAR Closing Drift short: All, closing Binance long: 74.0
                 timestamp binance_pair  drift_pair    bina_price   drift_price  gap_perc   gap_abs  fast_avg_gap  top_avg_gaps  bottom_avg_gaps  gap_range  open_l_drift  open_s_drift  open_somewhere  close_l_drift  close_s_drift
symbol                                                                                                                                                                                                                               
BNB    2022-04-30 13:26:35      BNBUSDT           5    396.619557    396.586671  0.008292  0.008292      0.008335      0.051104        -0.165065   0.216170         False         False           False          False          False
LUNA   2022-04-30 13:26:35     LUNAUSDT           3     83.724579     83.686014  0.046061  0.046061      0.055517      0.088893        -0.146767   0.235660         False         False           False          False          False
BTC    2022-04-30 13:26:35      BTCUSDT           1  38591.699676  38611.629607 -0.051643  0.051643     -0.037913     -0.013370        -0.217129   0.203759         False         False           False          False          False
LTC    2022-04-30 13:26:35      LTCUSDT          12    101.442341    101.496708 -0.053594  0.053594     -0.048339      0.086834        -0.136052   0.222886         False         False           False          False          False
ETH    2022-04-30 13:26:35      ETHUSDT           2   2826.759761   2828.518342 -0.062212  0.062212     -0.039493      0.004193        -0.208104   0.212297         False         False           False          False          False
GMT    2022-04-30 13:26:35      GMTUSDT          18      3.890192      3.892709 -0.064684  0.064684     -0.052115      0.175885        -0.101955   0.277840         False         False           False          False          False
FTT    2022-04-30 13:26:35      FTTUSDT          11     38.897101     38.951497 -0.139845  0.139845     -0.126103     -0.083232        -0.323092   0.239861         False         False           False          False          False
NEAR   2022-04-30 13:26:35     NEARUSDT          16     11.558772     11.541562  0.148897  0.148897      0.012416      0.138434        -0.249912   0.388345         False         False           False          False           True
CRV    2022-04-30 13:26:35      CRVUSDT          19      2.236292      2.240270 -0.177867  0.177867     -0.167922     -0.146170        -0.519831   0.373661         False         False           False          False          False
ADA    2022-04-30 13:26:35      ADAUSDT           9      0.808100      0.809932 -0.226758  0.226758     -0.273748     -0.111071        -0.368985   0.257914         False         False           False          False          False
DOT    2022-04-30 13:26:35      DOTUSDT           8     16.097107     16.144769 -0.296092  0.296092     -0.267266     -0.197149        -0.443071   0.245922         False         False           False          False          False
SOL    2022-04-30 13:26:35      SOLUSDT           0     93.804937     94.087834 -0.301580  0.301580     -0.285477     -0.053064        -0.285477   0.232413         False         False           False           True          False
XRP    2022-04-30 13:26:35      XRPUSDT          13      0.624819      0.626775 -0.312947  0.312947     -0.316045     -0.067042        -0.323813   0.256771         False         False           False          False          False
AVAX   2022-04-30 13:26:35     AVAXUSDT           4     62.757130     62.975497 -0.347956  0.347956     -0.344167     -0.218588        -0.454693   0.236105         False         False           False          False          False
ATOM   2022-04-30 13:26:35     ATOMUSDT           7     18.974371     19.049085 -0.393764  0.393764     -0.355800     -0.323227        -0.600863   0.277636         False         False           False          False          False
DOGE   2022-04-30 13:26:35     DOGEUSDT          15      0.134670      0.135275 -0.449128  0.449128     -0.424322     -0.270906        -0.497137   0.226231         False         False           False          False          False
MATIC  2022-04-30 13:26:35    MATICUSDT           6      1.141218      1.146441 -0.457637  0.457637     -0.403645     -0.271812        -0.550366   0.278554         False         False           False          False          False
ALGO   2022-04-30 13:26:35     ALGOUSDT          10      0.632590      0.635511 -0.461679  0.461679     -0.447778     -0.267605        -0.535974   0.268369         False         False           False          False          False
SRM    2022-04-30 13:26:35      SRMUSDT          17      1.961837      1.975157 -0.678993  0.678993     -0.649981     -0.521419        -0.787721   0.266302         False         False           False          False          False
APE    2022-04-30 13:26:35      APEUSDT          14     23.754492     23.539202  0.906310  0.906310      0.935043      0.865788         0.273880   0.591909         False         False           False          False          False
Try number: 1
Error on closing positions: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

Err: cannot convert float NaN to integer
Err type: <class 'ValueError'>
Err cause: None
Err cause type: <class 'NoneType'>
Err context: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}
Err context type: <class 'solana.rpc.core.RPCException'>
Error on logic: cannot convert float NaN to integer
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 509, in run_constant_parallel_logic
    close_drift_short = await drift_close_order(API_drift, drift_index=coin_row["drift_pair"])
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 127, in drift_close_order
    close_position = await API["drift_acct"].close_position(market_index=drift_index)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house.py", line 834, in close_position
    return await self.program.provider.send(tx)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/anchorpy/provider.py", line 145, in send
    resp = await self.connection.send_transaction(tx, *all_signers, opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1179, in send_transaction
    txn_resp = await self.send_raw_transaction(txn.serialize(), opts=opts)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1137, in send_raw_transaction
    return await self.__post_send_with_confirm(*post_send_args)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/async_api.py", line 1236, in __post_send_with_confirm
    resp = self._post_send(resp)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/solana/rpc/core.py", line 418, in _post_send
    raise RPCException(error)
solana.rpc.core.RPCException: {'code': -32002, 'message': 'Transaction simulation failed: Error processing Instruction 0: custom program error: 0x177a', 'data': {'accounts': None, 'err': {'InstructionError': [0, {'Custom': 6010}]}, 'logs': ['Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN invoke [1]', 'Program log: Instruction: ClosePosition', 'Program log: Custom program error: 0x177a', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN consumed 14918 of 200000 compute units', 'Program dammHkt7jmytvbS3nHTxQNEcP59aE57nxwV21YdqEDN failed: custom program error: 0x177a'], 'unitsConsumed': 0}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 526, in run_constant_parallel_logic
    imbalance_status, positions_dataframe = await self.imbalance_checker(fresh_data, coin_symbol, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 250, in imbalance_checker
    positions_dataframe = await self.get_positions_summary(fresh_data, API_drift, API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 313, in get_positions_summary
    drift_positions = await drift_load_positions(API_drift)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 76, in drift_load_positions
    positions_df["notional"] = np.array(await (async_apply(positions_df["market_index"], API["drift_user"].get_position_value))) / QUOTE_PRECISION
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Drift/Drift_utils.py", line 58, in async_apply
    price = await lambd(x)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/driftpy/clearing_house_user.py", line 127, in get_position_value
    assert(market_index is None or int(market_index))
ValueError: cannot convert float NaN to integer

Logic only list: 12.84
Test time only selecting coin:13.01
Logic selecting coin (plus potential list): 25.85
Logic only logic positions: 25.85
Test time only selecting coin:13.08
Logic selecting coin (plus potential list): 38.94
Logic only logic positions: 38.94
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 51.94
Logic only logic positions: 51.94
Test time only selecting coin:13.01
Logic selecting coin (plus potential list): 64.95
Logic only logic positions: 64.95
Test time only selecting coin:13.0
Logic selecting coin (plus potential list): 77.95
Logic only logic positions: 77.95
Test time only selecting coin:12.96
Logic selecting coin (plus potential list): 90.91
Logic only logic positions: 90.91
Test time only selecting coin:12.97
Logic selecting coin (plus potential list): 103.88
Logic only logic positions: 103.88
2022-04-30 13:28:45 --- Logic loop 103.88 seconds ---
Logic only list: 12.85
Test time only selecting coin:12.87
Logic selecting coin (plus potential list): 25.71
Logic only logic positions: 25.71
Test time only selecting coin:15.23
Logic selecting coin (plus potential list): 40.94
Logic only logic positions: 40.94
Test time only selecting coin:13.5
Logic selecting coin (plus potential list): 54.44
Logic only logic positions: 54.44
Test time only selecting coin:13.62
Logic selecting coin (plus potential list): 68.06
Logic only logic positions: 68.06
Process Process-2:
Process Process-1:
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/usr/lib/python3.9/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
  File "/usr/lib/python3.9/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 567, in main
    asyncio.run(self.run_constant_parallel_logic())
  File "/usr/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/lib/python3.9/asyncio/base_events.py", line 629, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.9/asyncio/base_events.py", line 596, in run_forever
    self._run_once()
  File "/usr/lib/python3.9/asyncio/base_events.py", line 1890, in _run_once
    handle._run()
  File "/usr/lib/python3.9/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 382, in run_constant_parallel_logic
    fresh_data = self.fresh_data_aggregator()
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 277, in fresh_data_aggregator
    frame["top_avg_gaps"] = frame["gap_perc"].rolling(self.ZSCORE_PERIOD, self.ZSCORE_PERIOD).apply(
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/pandas/core/window/rolling.py", line 1842, in apply
    return super().apply(
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/pandas/core/window/rolling.py", line 1321, in apply
    return self._apply(
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/pandas/core/window/rolling.py", line 590, in _apply
    return self._apply_blockwise(homogeneous_func, name)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/pandas/core/window/rolling.py", line 442, in _apply_blockwise
    return self._apply_series(homogeneous_func, name)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/pandas/core/window/rolling.py", line 431, in _apply_series
    result = homogeneous_func(values)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/pandas/core/window/rolling.py", line 582, in homogeneous_func
    result = calc(values)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/pandas/core/window/rolling.py", line 579, in calc
    return func(x, start, end, min_periods, *numba_args)
Traceback (most recent call last):
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/pandas/core/window/rolling.py", line 1347, in apply_func
    return window_func(values, begin, end, min_periods)
  File "pandas/_libs/window/aggregations.pyx", line 1295, in pandas._libs.window.aggregations.roll_apply
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/pandas/core/indexing.py", line 130, in iloc
    @property
KeyboardInterrupt
  File "/usr/lib/python3.9/multiprocessing/popen_fork.py", line 27, in poll
Traceback (most recent call last):
  File "/usr/lib/python3.9/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
  File "/usr/lib/python3.9/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 161, in main
    asyncio.run(self.run_constant_parallel_fresh_data_update())
  File "/usr/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/lib/python3.9/asyncio/base_events.py", line 629, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.9/asyncio/base_events.py", line 596, in run_forever
    self._run_once()
  File "/usr/lib/python3.9/asyncio/base_events.py", line 1890, in _run_once
    handle._run()
  File "/usr/lib/python3.9/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 125, in run_constant_parallel_fresh_data_update
    historical_arb_df = await self.update_history_dataframe(historical_arb_df=historical_arb_df, API_drift=API_drift, API_binance=API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Strategies/Drift_Bina_ARB/Drift_Bina_ARB_Live.py", line 91, in update_history_dataframe
    bina_prices = binance_get_futures_pair_prices_rates(API_binance)
  File "/home/kalindro/Desktop/Projekty_python/Boty/Cyber_Oasis_Project/Gieldy/Binance/Binance_utils.py", line 200, in binance_get_futures_pair_prices_rates
    prices_dataframe = df(general_client.futures_mark_price())
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/binance/client.py", line 5735, in futures_mark_price
    return self._request_futures_api('get', 'premiumIndex', data=params)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/binance/client.py", line 339, in _request_futures_api
    return self._request(method, uri, signed, True, **kwargs)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/binance/client.py", line 314, in _request
    self.response = getattr(self.session, method)(uri, **kwargs)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/requests/sessions.py", line 542, in get
    return self.request('GET', url, **kwargs)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/requests/sessions.py", line 529, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/requests/sessions.py", line 645, in send
    r = adapter.send(request, **kwargs)
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/requests/adapters.py", line 440, in send
    resp = conn.urlopen(
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/urllib3/connectionpool.py", line 703, in urlopen
    httplib_response = self._make_request(
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/urllib3/connectionpool.py", line 449, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "/home/kalindro/Desktop/Projekty_python/.venvs/Frankfurt_Smith_392Venv/lib/python3.9/site-packages/urllib3/connectionpool.py", line 444, in _make_request
    httplib_response = conn.getresponse()
  File "/usr/lib/python3.9/http/client.py", line 1347, in getresponse
    response.begin()
  File "/usr/lib/python3.9/http/client.py", line 307, in begin
    version, status, reason = self._read_status()
  File "/usr/lib/python3.9/http/client.py", line 268, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/usr/lib/python3.9/socket.py", line 704, in readinto
    return self._sock.recv_into(b)
  File "/usr/lib/python3.9/ssl.py", line 1241, in recv_into
    return self.read(nbytes, buffer)
  File "/usr/lib/python3.9/ssl.py", line 1099, in read
    return self._sslobj.read(len, buffer)
KeyboardInterrupt
    pid, sts = os.waitpid(self.pid, flag)
KeyboardInterrupt

Process finished with exit code 0
